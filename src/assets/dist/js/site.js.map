{"version":3,"mappings":"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","names":["_isPlaceholder","a","_curry1","fn","f1","_curry2","f2","b","_b","_a","_curry3","f3","c","_c","_has","prop","obj","type","val","_isObject","x","_isInteger","n","_isString","_nth","offset","list","idx","_cloneRegExp","pattern","_clone","value","deep","map","_ObjectMap","_isPrimitive","copy","copiedValue","cachedCopy","key","param","hashedKey","bucket","p","i","element","clone","_path","pathAr","mergeWithKey","l","r","result","k","mergeDeepWithKey","lObj","rObj","lVal","rVal","mergeDeepWith","path","pickBy","test","isFunction","isString","isNull","isUndefined","isNullOrUndefined","isDefined","isDefinedAndNotNull","isDefinedNotNullAndNotEmptyString","isTypeOfError","getValueByPath","keyPath","pathParts","hasValueByPath","isObjectAndNotNull","isObjectLiteralAndNotNull","mergeDeepRightObjectArrays","leftValue","rightValue","mergedArray","index","mergeDeepRight","leftObject","rightObject","isNonEmptyObject","removeUndefinedValues","removeUndefinedAndNullValues","trim","removeDoubleSpaces","tryStringify","retVal","bytesToBase64","bytes","binString","toBase64","pageArgumentsToCallOptions","category","name","properties","options","callback","payload","trackArgumentsToCallOptions","event","identifyArgumentsToCallOptions","userId","traits","aliasArgumentsToCallOptions","to","from","groupArgumentsToCallOptions","groupId","CAPABILITIES_MANAGER","CONFIG_MANAGER","EVENT_MANAGER","PLUGINS_MANAGER","USER_SESSION_MANAGER","ERROR_HANDLER","PLUGIN_ENGINE","STORE_MANAGER","READY_API","EVENT_REPOSITORY","EXTERNAL_SRC_LOADER","HTTP_CLIENT","RS_APP","ANALYTICS_CORE","APP_NAME","APP_VERSION","APP_NAMESPACE","MODULE_TYPE","ADBLOCK_PAGE_CATEGORY","ADBLOCK_PAGE_NAME","ADBLOCK_PAGE_PATH","GLOBAL_PRELOAD_BUFFER","CONSENT_TRACK_EVENT_NAME","QUERY_PARAM_TRAIT_PREFIX","QUERY_PARAM_PROPERTY_PREFIX","QUERY_PARAM_ANONYMOUS_ID_KEY","QUERY_PARAM_USER_ID_KEY","QUERY_PARAM_TRACK_EVENT_NAME_KEY","DEFAULT_XHR_TIMEOUT_MS","DEFAULT_COOKIE_MAX_AGE_MS","DEFAULT_SESSION_TIMEOUT_MS","MIN_SESSION_TIMEOUT_MS","DEFAULT_DATA_PLANE_EVENTS_BUFFER_TIMEOUT_MS","DEBOUNCED_TIMEOUT_MS","createExposedGlobals","analyticsInstanceId","setExposedGlobal","keyName","getExposedGlobal","debounce","func","thisArg","delay","timeoutId","args","getEventDataFromQueryString","params","dataTypeNamePrefix","data","dataKey","retrieveEventsFromQueryString","argumentsArray","eventArgumentToQueryParamMap","queryObject","getPreloadedLoadEvent","preloadedEventsArray","loadMethodName","loadEvent","promotePreloadedConsentEventsToTop","consentMethodName","consentEvents","bufferedEvent","nonConsentEvents","retrievePreloadBufferEvents","instance","consumePreloadBufferedEvent","analyticsInstance","methodName","callOptions","DEFAULT_EXT_SRC_LOAD_TIMEOUT_MS","LOG_CONTEXT_SEPARATOR","SCRIPT_ALREADY_EXISTS_ERROR","id","SCRIPT_LOAD_ERROR","url","SCRIPT_LOAD_TIMEOUT_ERROR","timeout","CIRCULAR_REFERENCE_WARNING","context","JSON_STRINGIFY_WARNING","JSON_STRINGIFY","getCircularReplacer","excludeNull","excludeKeys","logger","ancestors","stringifyWithoutCircular","err","getMutatedError","issue","finalError","EXTERNAL_SOURCE_LOAD_ORIGIN","createScriptElement","async","onload","onerror","extraAttributes","scriptElement","attributeName","insertScript","newScriptElement","headElements","scriptElements","_d","headElement","htmlElement","jsFileLoader","resolve","reject","timeoutID","ExternalSrcLoader","errorHandler","__publicField","config","isFireAndForget","error","t","s","h","f","o","v","e","u","E","d","y","_","g","BufferQueue","item","LOG_LEVEL_MAP","DEFAULT_LOG_LEVEL","LOG_MSG_PREFIX","LOG_MSG_PREFIX_STYLE","LOG_MSG_STYLE","Logger","minLogLevel","scope","logProvider","logMethod","scopeVal","logLevel","msg","originalMsg","styledLogArgs","defaultLogger","SUPPORTED_STORAGE_TYPES","DEFAULT_STORAGE_TYPE","SOURCE_CONFIG_OPTION_ERROR","SOURCE_CONFIG_RESOLUTION_ERROR","SOURCE_DISABLED_ERROR","XHR_PAYLOAD_PREP_ERROR","EVENT_OBJECT_GENERATION_ERROR","PLUGIN_EXT_POINT_MISSING_ERROR","PLUGIN_EXT_POINT_INVALID_ERROR","COMPONENT_BASE_URL_ERROR","component","UNSUPPORTED_CONSENT_MANAGER_ERROR","selectedConsentManager","consentManagersToPluginNameMap","REPORTING_PLUGIN_INIT_FAILURE_ERROR","NOTIFY_FAILURE_ERROR","PLUGIN_NAME_MISSING_ERROR","PLUGIN_ALREADY_EXISTS_ERROR","pluginName","PLUGIN_NOT_FOUND_ERROR","PLUGIN_ENGINE_BUG_ERROR","PLUGIN_DEPS_ERROR","notExistDeps","PLUGIN_INVOCATION_ERROR","extPoint","STORAGE_UNAVAILABILITY_ERROR_PREFIX","storageType","SOURCE_CONFIG_FETCH_ERROR","reason","WRITE_KEY_VALIDATION_ERROR","writeKey","DATA_PLANE_URL_VALIDATION_ERROR","dataPlaneUrl","READY_API_CALLBACK_ERROR","XHR_DELIVERY_ERROR","prefix","status","statusText","XHR_REQUEST_ERROR","XHR_SEND_ERROR","STORE_DATA_SAVE_ERROR","STORE_DATA_FETCH_ERROR","DATA_SERVER_REQUEST_FAIL_ERROR","FAILED_SETTING_COOKIE_FROM_SERVER_ERROR","FAILED_SETTING_COOKIE_FROM_SERVER_GLOBAL_ERROR","STORAGE_TYPE_VALIDATION_WARNING","defaultStorageType","UNSUPPORTED_ERROR_REPORTING_PROVIDER_WARNING","selectedErrorReportingProvider","errorReportingProvidersToPluginNameMap","defaultProvider","UNSUPPORTED_STORAGE_ENCRYPTION_VERSION_WARNING","selectedStorageEncryptionVersion","storageEncryptionVersionsToPluginNameMap","defaultVersion","STORAGE_DATA_MIGRATION_OVERRIDE_WARNING","storageEncryptionVersion","RESERVED_KEYWORD_WARNING","property","parentKeyPath","reservedElements","UNSUPPORTED_BEACON_API_WARNING","TIMEOUT_NOT_NUMBER_WARNING","defaultValue","TIMEOUT_ZERO_WARNING","TIMEOUT_NOT_RECOMMENDED_WARNING","minTimeout","INVALID_SESSION_ID_WARNING","sessionId","minSessionIdLength","STORAGE_QUOTA_EXCEEDED_WARNING","STORAGE_UNAVAILABLE_WARNING","entry","selectedStorageType","finalStorageType","WRITE_KEY_NOT_A_STRING_ERROR","EMPTY_GROUP_CALL_ERROR","READY_CALLBACK_INVOKE_ERROR","API_CALLBACK_INVOKE_ERROR","NATIVE_DEST_PLUGIN_INITIALIZE_ERROR","DATAPLANE_PLUGIN_INITIALIZE_ERROR","DMT_PLUGIN_INITIALIZE_ERROR","NATIVE_DEST_PLUGIN_ENQUEUE_ERROR","DATAPLANE_PLUGIN_ENQUEUE_ERROR","INVALID_CONFIG_URL_WARNING","configUrl","POLYFILL_SCRIPT_LOAD_ERROR","scriptId","UNSUPPORTED_PRE_CONSENT_STORAGE_STRATEGY","selectedStrategy","defaultStrategy","UNSUPPORTED_PRE_CONSENT_EVENTS_DELIVERY_TYPE","selectedDeliveryType","defaultDeliveryType","generateMisconfiguredPluginsWarning","configurationStatus","missingPlugins","shouldAddMissingPlugins","isSinglePlugin","pluginsString","baseWarning","INVALID_POLYFILL_URL_WARNING","customPolyfillUrl","CDN_INT_DIR","CDN_PLUGINS_DIR","URL_PATTERN","BUILD_TYPE","SDK_CDN_BASE_URL","CDN_ARCH_VERSION_DIR","DEST_SDK_BASE_URL","PLUGINS_BASE_URL","DEFAULT_CONFIG_BE_URL","DEFAULT_ERROR_REPORTING_PROVIDER","DEFAULT_STORAGE_ENCRYPTION_VERSION","DEFAULT_DATA_PLANE_EVENTS_TRANSPORT","ConsentManagersToPluginNameMap","ErrorReportingProvidersToPluginNameMap","StorageEncryptionVersionsToPluginNameMap","DataPlaneEventsTransportToPluginNameMap","DEFAULT_DATA_SERVICE_ENDPOINT","defaultLoadOptions","loadOptionsState","DEFAULT_USER_SESSION_VALUES","SERVER_SIDE_COOKIES_DEBOUNCE_TIME","defaultSessionConfiguration","sessionState","capabilitiesState","reportingState","sourceConfigState","lifecycleState","consentsState","metricsState","contextState","nativeDestinationsState","eventBufferState","pluginsState","storageState","serverSideCookiesState","dataPlaneEventsState","defaultStateValues","state","PluginEngine","plugin","errorMessage","pos","pluginItem","lifeCycleName","dependency","allowMultiple","extensionPointName","noCall","throws","extensionPointNameParts","pluginMethodPath","method","defaultPluginEngine","FAILED_REQUEST_ERR_MSG_PREFIX","ERROR_MESSAGES_TO_BE_FILTERED","LOAD_ORIGIN","processError","eventTarget","isAllowedToBeNotified","ErrorHandler","pluginEngine","externalSrcLoader","errReportingInitVal","client","customMessage","shouldAlwaysThrow","errorType","normalizedError","breadcrumb","defaultErrorHandler","isNonCloudDestination","destination","isHybridModeDestination","getNonCloudDestinations","destinations","pluginNamesList","remotesMap","loadJS","resolvedUrl","script","merge","obj1","obj2","mergedObj","wrapShareModule","remoteFrom","__federation_method_ensure","remoteId","remote","__vitePreload","lib","shareScope","__federation_method_wrapDefault","module","need","__federation_method_getRemote","remoteName","componentName","factory","getFederatedModuleImport","federatedModulesBuildPluginImports","activePluginNames","remotePlugins","lazyLoadImport","getMandatoryPluginsMap","getOptionalPluginsMap","getRemotePluginsMap","pluginsInventory","remotePluginsInventory","PluginsManager","engine","pluginsToLoadFromConfig","pluginGroupsToProcess","addMissingPlugins","group","pluginsToConfigure","pluginsToLoad","availablePlugins","activePlugins","failedPlugins","localPlugin","remotePluginsList","remotePluginKey","remotePluginModule","plugins","responseTextToJson","responseText","onError","DEFAULT_XHR_REQUEST_OPTIONS","createXhrRequestOptions","basicAuthHeader","requestOptions","xhrRequest","xhr","xhrReject","xhrError","headerName","HttpClient","isRawResponse","noBtoa","authVal","defaultHttpClient","COOKIE_STORAGE","LOCAL_STORAGE","SESSION_STORAGE","MEMORY_STORAGE","NO_STORAGE","userIdKey","userTraitsKey","anonymousUserIdKey","groupIdKey","groupTraitsKey","pageInitialReferrerKey","pageInitialReferringDomainKey","sessionInfoKey","authTokenKey","COOKIE_KEYS","STORAGE_TEST_COOKIE","STORAGE_TEST_LOCAL_STORAGE","STORAGE_TEST_SESSION_STORAGE","STORAGE_TEST_TOP_LEVEL_DOMAIN","CLIENT_DATA_STORE_COOKIE","CLIENT_DATA_STORE_LS","CLIENT_DATA_STORE_MEMORY","CLIENT_DATA_STORE_SESSION","USER_SESSION_KEYS","storageClientDataStoreNameMap","COOKIE_DATA_ENCODING_ERROR","encode","decode","parse","str","pairs","pair","pairItem","set","optionsConfig","cookieString","all","cookieStringValue","get","cookie","detectAdBlockers","baseUrl","httpClient","details","hasCrypto$1","hasUAClientHints","hasBeacon","isIE11","getUserAgentClientHint","level","ua","isDatasetAvailable","testElement","legacyJSEngineRequiredPolyfills","isLegacyJSEngine","requiredCapabilitiesList","needsPolyfill","isCapabilityMissing","getScreenDetails","screenDetails","isStorageQuotaExceeded","matchingNames","matchingCodes","isQuotaExceededError","isStorageAvailable","storageInstance","storage","testData","msgPrefix","legacyGetHostname","href","levelsFunc","host","parts","last","levels","domain","cname","opts","getDefaultCookieOptions","topDomain","getDefaultLocalStorageOptions","getDefaultSessionStorageOptions","getDefaultInMemoryStorageOptions","_CookieStorage","CookieStorage","InMemoryStorage","defaultInMemoryStorage","commonjsGlobal","getDefaultExportFromCjs","store$1","exports","global","isJSON","stringify","deserialize","isArray","dealIncognito","_KEY","_VALUE","inMemoryStorage","Store","ret","dt","len","arr","_Store","store","argm","storeExports","LocalStorage","defaultLocalStorage","SessionStorage","keys","defaultSessionStorage","getStorageEngine","configureCookieStorageEngine","cookieStorageOptions","configureLocalStorageEngine","configureInMemoryStorageEngine","configureSessionStorageEngine","configureStorageEngines","localStorageOptions","inMemoryStorageOptions","sessionStorageOptions","pluginsManager","validKeys","noKeyValidation","noCompoundKey","compoundKey","validKeyName","validKey","mode","formattedValue","getStorageTypeFromPreConsentIfApplicable","sessionKey","overriddenStorageType","StoreManager","loadOptions","globalStorageType","entriesOptions","postConsentStorageOpts","trulyAnonymousTracking","storageEntries","storageKey","configuredStorageType","_e","_f","storeConfig","storageEngine","removeDuplicateSlashes","isValidURL","validateWriteKey","validateDataPlaneUrl","validateLoadArgs","isValidSourceConfig","res","isValidStorageType","getTopDomainUrl","urlObj","protocol","getDataServiceUrl","endpoint","formattedEndpoint","filterEnabledDestination","nativeDestinations","removeTrailingSlashes","getDomain","getReferringDomain","referrer","extractUTMParameters","UTM_PREFIX","sParam","utmParam","getUrlWithoutHash","urlWithoutHash","isSDKRunningInChromeExtension","DEFAULT_PRE_CONSENT_STORAGE_STRATEGY","DEFAULT_PRE_CONSENT_EVENTS_DELIVERY_TYPE","isErrorReportingEnabled","sourceConfig","getErrorReportingProviderNameFromConfig","isMetricsReportingEnabled","DEFAULT_INTEGRATIONS_CONFIG","getValidPostConsentOptions","validOptions","clonedOptions","isValidConsentsData","getConsentManagerInfo","consentManagementOpts","provider","consentManagerPluginName","getConsentManagementData","allowedConsentIds","deniedConsentIds","initialized","enabled","consentsData","getSDKUrl","scripts","sdkFileNameRegex","src","updateReportingState","errReportingProvider","errReportingProviderPlugin","updateStorageStateFromLoadOptions","useServerSideCookies","dataServiceEndpoint","storageOptsFromLoad","encryptionPluginName","configuredMigrationValue","finalMigrationVal","cookieOptions","dataServiceUrl","curHost","dataServiceHost","updateConsentsStateFromLoadOptions","preConsentOpts","storageStrategy","StorageStrategies","eventsDeliveryType","deliveryTypes","updateConsentsState","resp","resolutionStrategy","cmpMetadata","updateDataPlaneEventsStateFromLoadOptions","defaultEventsQueuePluginName","eventsQueuePluginName","getSourceConfigURL","lockIntegrationsVersion","lockPluginsVersion","defSearchParams","origin","searchParams","pathname","hash","configUrlInstance","getSDKComponentBaseURL","componentType","pathSuffix","baseURL","currentVersion","lockVersion","customURL","sdkComponentURL","sdkURL","getIntegrationsCDNPath","customIntegrationsCDNPath","getPluginsCDNPath","customPluginsCDNPath","ConfigManager","destSDKBaseURL","pluginsSDKBaseURL","intgCdnUrl","pluginsCDNPath","response","sourceConfigFunc","pRes","getTimezone","timezone","getReferrer","getCanonicalUrl","tags","canonicalUrl","tag","getUserAgent","userAgent","brave","matchedArr","getLanguage","getDefaultPageProperties","tabUrl","pageUrl","search","title","POLYFILL_URL","POLYFILL_LOAD_TIMEOUT","POLYFILL_SCRIPT_ID","CapabilitiesManager","uach","polyfillUrl","isDefaultPolyfillService","polyfillCallbackName","polyfillCallback","random","SIZE","HEX$1","IDX$1","BUFFER$1","v4$1","tmp","out","IDX","HEX","BUFFER","v4","num","hasCrypto","generateUUID","getCurrentTimeFormatted","CHANNEL","TOP_LEVEL_ELEMENTS","CONTEXT_RESERVED_ELEMENTS","RESERVED_ELEMENTS","isNumber","hasMinLength","minimumLength","isPositiveInteger","MIN_SESSION_ID_LENGTH","hasSessionExpired","expiresAt","timestamp","generateSessionId","isManualSessionIdValid","generateAutoTrackingSession","sessionTimeout","generateManualTrackingSession","isStorageTypeValidForStoringData","generateAnonymousId","getContextPageProperties","pageProps","curPageProps","ctxPageProps","getUpdatedPageProperties","optionsPageProps","checkForReservedElementsInObject","checkForReservedElements","rudderEvent","contextualTraits","updateTopLevelEventElements","getMergedContext","rudderContext","tempContext","shouldUseGlobalIntegrationsConfigInEvents","processOptions","getEventIntegrationsConfig","integrationsConfig","finalIntgConfig","getEnrichedEvent","commonEventData","processedEvent","RudderEventFactory","props","enrichedEvent","groupEvent","eventObj","EventManager","eventRepository","userSessionManager","UserSessionManager","storeManager","externalAnonymousIdCookieName","anonymousIdOptions","externalAnonymousId","sessionInfo","configuredSessionTrackingInfo","initialSessionInfo","persistedInitialReferrer","persistedInitialReferringDomain","initialReferrer","entryName","entries","storageTypesForMigration","currentStorage","curStore","persistentStoreNames","stores","storeName","storageEntry","migratedVal","autoTrack","configuredSessionTimeout","cookiesData","encryptedCookieData","cData","encryptedValue","_h","_g","cb","cookieValue","before","each","cookieName","anonymousId","rudderAmpLinkerParam","finalAnonymousId","persistedAnonymousId","resetAnonymousId","noNewSessionStart","session","manualTrack","referringDomain","token","defaultOptionalPluginsList","normalizeLoadOptions","loadOptionsFromState","normalizedLoadOpts","DATA_PLANE_QUEUE_EXT_POINT_PREFIX","DESTINATIONS_QUEUE_EXT_POINT_PREFIX","DMT_EXT_POINT_PREFIX","getOverriddenIntegrationOptions","eventIntgConfig","destinationsIntgConfig","intgName","getFinalEvent","finalEvent","overriddenIntgOpts","shouldBufferEventsForPreConsent","EventRepository","bufferEventsBeforeConsent","shouldBufferDpEvents","dest","dpQEvent","dQEvent","dispatchSDKEvent","customEvent","Analytics","clonedDataPlaneUrl","clonedLoadOptions","bufferedEvents","eventToProcess","totalDestinationsToLoad","isBufferedInvocation","previousId","trackOptions","pageOptions","_RudderAnalytics","instanceId","RudderAnalytics","updateAnonymousIdField","anonymousIdField","rudderanalytics","registerEvents","anchor","currentUrl","button","checkIfHtmxIsLoaded","count"],"sources":["../../../../node_modules/@rudderstack/analytics-js/dist/npm/modern/esm/index.js","../../site/src/js/scripts/rudderStack.js"],"sourcesContent":["function _isPlaceholder(a){return a!=null&&typeof a==='object'&&a['@@functional/placeholder']===true;}\n\n/**\n * Optimized internal one-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */function _curry1(fn){return function f1(a){if(arguments.length===0||_isPlaceholder(a)){return f1;}else {return fn.apply(this,arguments);}};}\n\n/**\n * Optimized internal two-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */function _curry2(fn){return function f2(a,b){switch(arguments.length){case 0:return f2;case 1:return _isPlaceholder(a)?f2:_curry1(function(_b){return fn(a,_b);});default:return _isPlaceholder(a)&&_isPlaceholder(b)?f2:_isPlaceholder(a)?_curry1(function(_a){return fn(_a,b);}):_isPlaceholder(b)?_curry1(function(_b){return fn(a,_b);}):fn(a,b);}};}\n\n/**\n * Optimized internal three-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */function _curry3(fn){return function f3(a,b,c){switch(arguments.length){case 0:return f3;case 1:return _isPlaceholder(a)?f3:_curry2(function(_b,_c){return fn(a,_b,_c);});case 2:return _isPlaceholder(a)&&_isPlaceholder(b)?f3:_isPlaceholder(a)?_curry2(function(_a,_c){return fn(_a,b,_c);}):_isPlaceholder(b)?_curry2(function(_b,_c){return fn(a,_b,_c);}):_curry1(function(_c){return fn(a,b,_c);});default:return _isPlaceholder(a)&&_isPlaceholder(b)&&_isPlaceholder(c)?f3:_isPlaceholder(a)&&_isPlaceholder(b)?_curry2(function(_a,_b){return fn(_a,_b,c);}):_isPlaceholder(a)&&_isPlaceholder(c)?_curry2(function(_a,_c){return fn(_a,b,_c);}):_isPlaceholder(b)&&_isPlaceholder(c)?_curry2(function(_b,_c){return fn(a,_b,_c);}):_isPlaceholder(a)?_curry1(function(_a){return fn(_a,b,c);}):_isPlaceholder(b)?_curry1(function(_b){return fn(a,_b,c);}):_isPlaceholder(c)?_curry1(function(_c){return fn(a,b,_c);}):fn(a,b,c);}};}\n\nfunction _has(prop,obj){return Object.prototype.hasOwnProperty.call(obj,prop);}\n\n/**\n * Gives a single-word string description of the (native) type of a value,\n * returning such answers as 'Object', 'Number', 'Array', or 'Null'. Does not\n * attempt to distinguish user Object types any further, reporting them all as\n * 'Object'.\n *\n * @func\n * @memberOf R\n * @since v0.8.0\n * @category Type\n * @sig * -> String\n * @param {*} val The value to test\n * @return {String}\n * @example\n *\n *      R.type({}); //=> \"Object\"\n *      R.type(1); //=> \"Number\"\n *      R.type(false); //=> \"Boolean\"\n *      R.type('s'); //=> \"String\"\n *      R.type(null); //=> \"Null\"\n *      R.type([]); //=> \"Array\"\n *      R.type(/[A-z]/); //=> \"RegExp\"\n *      R.type(() => {}); //=> \"Function\"\n *      R.type(async () => {}); //=> \"AsyncFunction\"\n *      R.type(undefined); //=> \"Undefined\"\n *      R.type(BigInt(123)); //=> \"BigInt\"\n */var type=/*#__PURE__*/_curry1(function type(val){return val===null?'Null':val===undefined?'Undefined':Object.prototype.toString.call(val).slice(8,-1);});\n\nfunction _isObject(x){return Object.prototype.toString.call(x)==='[object Object]';}\n\n/**\n * Determine if the passed argument is an integer.\n *\n * @private\n * @param {*} n\n * @category Type\n * @return {Boolean}\n */const _isInteger = Number.isInteger||function _isInteger(n){return n<<0===n;};\n\nfunction _isString(x){return Object.prototype.toString.call(x)==='[object String]';}\n\nfunction _nth(offset,list){var idx=offset<0?list.length+offset:offset;return _isString(list)?list.charAt(idx):list[idx];}\n\nfunction _cloneRegExp(pattern){return new RegExp(pattern.source,pattern.flags?pattern.flags:(pattern.global?'g':'')+(pattern.ignoreCase?'i':'')+(pattern.multiline?'m':'')+(pattern.sticky?'y':'')+(pattern.unicode?'u':'')+(pattern.dotAll?'s':''));}\n\n/**\n * Copies an object.\n *\n * @private\n * @param {*} value The value to be copied\n * @param {Boolean} deep Whether or not to perform deep cloning.\n * @return {*} The copied value.\n */function _clone(value,deep,map){map||(map=new _ObjectMap());// this avoids the slower switch with a quick if decision removing some milliseconds in each run.\nif(_isPrimitive(value)){return value;}var copy=function copy(copiedValue){// Check for circular and same references on the object graph and return its corresponding clone.\nvar cachedCopy=map.get(value);if(cachedCopy){return cachedCopy;}map.set(value,copiedValue);for(var key in value){if(Object.prototype.hasOwnProperty.call(value,key)){copiedValue[key]=_clone(value[key],true,map);}}return copiedValue;};switch(type(value)){case'Object':return copy(Object.create(Object.getPrototypeOf(value)));case'Array':return copy(Array(value.length));case'Date':return new Date(value.valueOf());case'RegExp':return _cloneRegExp(value);case'Int8Array':case'Uint8Array':case'Uint8ClampedArray':case'Int16Array':case'Uint16Array':case'Int32Array':case'Uint32Array':case'Float32Array':case'Float64Array':case'BigInt64Array':case'BigUint64Array':return value.slice();default:return value;}}function _isPrimitive(param){var type=typeof param;return param==null||type!='object'&&type!='function';}var _ObjectMap=/*#__PURE__*/function(){function _ObjectMap(){this.map={};this.length=0;}_ObjectMap.prototype.set=function(key,value){var hashedKey=this.hash(key);var bucket=this.map[hashedKey];if(!bucket){this.map[hashedKey]=bucket=[];}bucket.push([key,value]);this.length+=1;};_ObjectMap.prototype.hash=function(key){var hashedKey=[];for(var value in key){hashedKey.push(Object.prototype.toString.call(key[value]));}return hashedKey.join();};_ObjectMap.prototype.get=function(key){/**\n     * depending on the number of objects to be cloned is faster to just iterate over the items in the map just because the hash function is so costly,\n     * on my tests this number is 180, anything above that using the hash function is faster.\n     */if(this.length<=180){for(var p in this.map){var bucket=this.map[p];for(var i=0;i<bucket.length;i+=1){var element=bucket[i];if(element[0]===key){return element[1];}}}return;}var hashedKey=this.hash(key);var bucket=this.map[hashedKey];if(!bucket){return;}for(var i=0;i<bucket.length;i+=1){var element=bucket[i];if(element[0]===key){return element[1];}}};return _ObjectMap;}();\n\n/**\n * Creates a deep copy of the source that can be used in place of the source\n * object without retaining any references to it.\n * The source object may contain (nested) `Array`s and `Object`s,\n * `Number`s, `String`s, `Boolean`s and `Date`s.\n * `Function`s are assigned by reference rather than copied.\n *\n * Dispatches to a `clone` method if present.\n *\n * Note that if the source object has multiple nodes that share a reference,\n * the returned object will have the same structure, but the references will\n * be pointed to the location within the cloned value.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Object\n * @sig {*} -> {*}\n * @param {*} value The object or array to clone\n * @return {*} A deeply cloned copy of `val`\n * @example\n *\n *      const objects = [{}, {}, {}];\n *      const objectsClone = R.clone(objects);\n *      objects === objectsClone; //=> false\n *      objects[0] === objectsClone[0]; //=> false\n */var clone=/*#__PURE__*/_curry1(function clone(value){return value!=null&&typeof value.clone==='function'?value.clone():_clone(value);});\n\nfunction _path(pathAr,obj){var val=obj;for(var i=0;i<pathAr.length;i+=1){if(val==null){return undefined;}var p=pathAr[i];if(_isInteger(p)){val=_nth(p,val);}else {val=val[p];}}return val;}\n\n/**\n * Creates a new object with the own properties of the two provided objects. If\n * a key exists in both objects, the provided function is applied to the key\n * and the values associated with the key in each object, with the result being\n * used as the value associated with the key in the returned object.\n *\n * @func\n * @memberOf R\n * @since v0.19.0\n * @category Object\n * @sig ((String, a, a) -> a) -> {a} -> {a} -> {a}\n * @param {Function} fn\n * @param {Object} l\n * @param {Object} r\n * @return {Object}\n * @see R.mergeDeepWithKey, R.merge, R.mergeWith\n * @example\n *\n *      let concatValues = (k, l, r) => k == 'values' ? R.concat(l, r) : r\n *      R.mergeWithKey(concatValues,\n *                     { a: true, thing: 'foo', values: [10, 20] },\n *                     { b: true, thing: 'bar', values: [15, 35] });\n *      //=> { a: true, b: true, thing: 'bar', values: [10, 20, 15, 35] }\n * @symb R.mergeWithKey(f, { x: 1, y: 2 }, { y: 5, z: 3 }) = { x: 1, y: f('y', 2, 5), z: 3 }\n */var mergeWithKey=/*#__PURE__*/_curry3(function mergeWithKey(fn,l,r){var result={};var k;l=l||{};r=r||{};for(k in l){if(_has(k,l)){result[k]=_has(k,r)?fn(k,l[k],r[k]):l[k];}}for(k in r){if(_has(k,r)&&!_has(k,result)){result[k]=r[k];}}return result;});\n\n/**\n * Creates a new object with the own properties of the two provided objects.\n * If a key exists in both objects:\n * - and both associated values are also objects then the values will be\n *   recursively merged.\n * - otherwise the provided function is applied to the key and associated values\n *   using the resulting value as the new value associated with the key.\n * If a key only exists in one object, the value will be associated with the key\n * of the resulting object.\n *\n * @func\n * @memberOf R\n * @since v0.24.0\n * @category Object\n * @sig ((String, a, a) -> a) -> {a} -> {a} -> {a}\n * @param {Function} fn\n * @param {Object} lObj\n * @param {Object} rObj\n * @return {Object}\n * @see R.mergeWithKey, R.mergeDeepWith\n * @example\n *\n *      let concatValues = (k, l, r) => k == 'values' ? R.concat(l, r) : r\n *      R.mergeDeepWithKey(concatValues,\n *                         { a: true, c: { thing: 'foo', values: [10, 20] }},\n *                         { b: true, c: { thing: 'bar', values: [15, 35] }});\n *      //=> { a: true, b: true, c: { thing: 'bar', values: [10, 20, 15, 35] }}\n */var mergeDeepWithKey=/*#__PURE__*/_curry3(function mergeDeepWithKey(fn,lObj,rObj){return mergeWithKey(function(k,lVal,rVal){if(_isObject(lVal)&&_isObject(rVal)){return mergeDeepWithKey(fn,lVal,rVal);}else {return fn(k,lVal,rVal);}},lObj,rObj);});\n\n/**\n * Creates a new object with the own properties of the two provided objects.\n * If a key exists in both objects:\n * - and both associated values are also objects then the values will be\n *   recursively merged.\n * - otherwise the provided function is applied to associated values using the\n *   resulting value as the new value associated with the key.\n * If a key only exists in one object, the value will be associated with the key\n * of the resulting object.\n *\n * @func\n * @memberOf R\n * @since v0.24.0\n * @category Object\n * @sig ((a, a) -> a) -> {a} -> {a} -> {a}\n * @param {Function} fn\n * @param {Object} lObj\n * @param {Object} rObj\n * @return {Object}\n * @see R.mergeWith, R.mergeDeepWithKey\n * @example\n *\n *      R.mergeDeepWith(R.concat,\n *                      { a: true, c: { values: [10, 20] }},\n *                      { b: true, c: { values: [15, 35] }});\n *      //=> { a: true, b: true, c: { values: [10, 20, 15, 35] }}\n */var mergeDeepWith=/*#__PURE__*/_curry3(function mergeDeepWith(fn,lObj,rObj){return mergeDeepWithKey(function(k,lVal,rVal){return fn(lVal,rVal);},lObj,rObj);});\n\n/**\n * Retrieves the value at a given path. The nodes of the path can be arbitrary strings or non-negative integers.\n * For anything else, the value is unspecified. Integer paths are meant to index arrays, strings are meant for objects.\n *\n * @func\n * @memberOf R\n * @since v0.2.0\n * @category Object\n * @typedefn Idx = String | Int | Symbol\n * @sig [Idx] -> {a} -> a | Undefined\n * @sig Idx = String | NonNegativeInt\n * @param {Array} path The path to use.\n * @param {Object} obj The object or array to retrieve the nested property from.\n * @return {*} The data at `path`.\n * @see R.prop, R.nth, R.assocPath, R.dissocPath\n * @example\n *\n *      R.path(['a', 'b'], {a: {b: 2}}); //=> 2\n *      R.path(['a', 'b'], {c: {b: 2}}); //=> undefined\n *      R.path(['a', 'b', 0], {a: {b: [1, 2, 3]}}); //=> 1\n *      R.path(['a', 'b', -2], {a: {b: [1, 2, 3]}}); //=> 2\n *      R.path([2], {'2': 2}); //=> 2\n *      R.path([-2], {'-2': 'a'}); //=> undefined\n */var path=/*#__PURE__*/_curry2(_path);\n\n/**\n * Returns a partial copy of an object containing only the keys that satisfy\n * the supplied predicate.\n *\n * @func\n * @memberOf R\n * @since v0.8.0\n * @category Object\n * @sig ((v, k) -> Boolean) -> {k: v} -> {k: v}\n * @param {Function} pred A predicate to determine whether or not a key\n *        should be included on the output object.\n * @param {Object} obj The object to copy from\n * @return {Object} A new object with only properties that satisfy `pred`\n *         on it.\n * @see R.pick, R.filter\n * @example\n *\n *      const isUpperCase = (val, key) => key.toUpperCase() === key;\n *      R.pickBy(isUpperCase, {a: 1, b: 2, A: 3, B: 4}); //=> {A: 3, B: 4}\n */var pickBy=/*#__PURE__*/_curry2(function pickBy(test,obj){var result={};for(var prop in obj){if(test(obj[prop],prop,obj)){result[prop]=obj[prop];}}return result;});\n\n/**\n * A function to check given value is a function\n * @param value input value\n * @returns boolean\n */ // eslint-disable-next-line @typescript-eslint/ban-types\nconst isFunction=value=>typeof value==='function'&&Boolean(value.constructor&&value.call&&value.apply);/**\n * A function to check given value is a string\n * @param value input value\n * @returns boolean\n */const isString=value=>typeof value==='string';/**\n * A function to check given value is null or not\n * @param value input value\n * @returns boolean\n */const isNull=value=>value===null;/**\n * A function to check given value is undefined\n * @param value input value\n * @returns boolean\n */const isUndefined=value=>typeof value==='undefined';/**\n * A function to check given value is null or undefined\n * @param value input value\n * @returns boolean\n */const isNullOrUndefined=value=>isNull(value)||isUndefined(value);/**\n * A function to check given value is defined\n * @param value input value\n * @returns boolean\n */const isDefined=value=>!isUndefined(value);/**\n * A function to check given value is defined and not null\n * @param value input value\n * @returns boolean\n */const isDefinedAndNotNull=value=>!isNullOrUndefined(value);/**\n * A function to check given value is defined and not null\n * @param value input value\n * @returns boolean\n */const isDefinedNotNullAndNotEmptyString=value=>isDefinedAndNotNull(value)&&value!=='';/**\n * Determines if the input is an instance of Error\n * @param obj input value\n * @returns true if the input is an instance of Error and false otherwise\n */const isTypeOfError=obj=>obj instanceof Error;\n\nconst getValueByPath=(obj,keyPath)=>{const pathParts=keyPath.split('.');return path(pathParts,obj);};const hasValueByPath=(obj,path)=>Boolean(getValueByPath(obj,path));/**\n * Checks if the input is an object literal or built-in object type and not null\n * @param value Input value\n * @returns true if the input is an object and not null\n */const isObjectAndNotNull=value=>!isNull(value)&&typeof value==='object'&&!Array.isArray(value);/**\n * Checks if the input is an object literal and not null\n * @param value Input value\n * @returns true if the input is an object and not null\n */const isObjectLiteralAndNotNull=value=>!isNull(value)&&Object.prototype.toString.call(value)==='[object Object]';const mergeDeepRightObjectArrays=(leftValue,rightValue)=>{if(!Array.isArray(leftValue)||!Array.isArray(rightValue)){return clone(rightValue);}const mergedArray=clone(leftValue);rightValue.forEach((value,index)=>{mergedArray[index]=Array.isArray(value)||isObjectAndNotNull(value)?// eslint-disable-next-line @typescript-eslint/no-use-before-define\nmergeDeepRight(mergedArray[index],value):value;});return mergedArray;};const mergeDeepRight=(leftObject,rightObject)=>mergeDeepWith(mergeDeepRightObjectArrays,leftObject,rightObject);/**\n Checks if the input is a non-empty object literal type and not undefined or null\n * @param value input any\n * @returns boolean\n */const isNonEmptyObject=value=>isObjectLiteralAndNotNull(value)&&Object.keys(value).length>0;/**\n * A utility to recursively remove undefined values from an object\n * @param obj input object\n * @returns a new object\n */const removeUndefinedValues=obj=>{const result=pickBy(isDefined,obj);Object.keys(result).forEach(key=>{const value=result[key];if(isObjectLiteralAndNotNull(value)){result[key]=removeUndefinedValues(value);}});return result;};/**\n * A utility to recursively remove undefined and null values from an object\n * @param obj input object\n * @returns a new object\n */const removeUndefinedAndNullValues=obj=>{const result=pickBy(isDefinedAndNotNull,obj);Object.keys(result).forEach(key=>{const value=result[key];if(isObjectLiteralAndNotNull(value)){result[key]=removeUndefinedAndNullValues(value);}});return result;};\n\nconst trim=value=>value.replace(/^\\s+|\\s+$/gm,'');const removeDoubleSpaces=value=>value.replace(/ {2,}/g,' ');/**\n * A function to convert values to string\n * @param val input value\n * @returns stringified value\n */const tryStringify=val=>{let retVal=val;if(!isString(val)&&!isNullOrUndefined(val)){try{retVal=JSON.stringify(val);}catch(e){retVal=null;}}return retVal;};// The following text encoding and decoding is done before base64 encoding to prevent\n/**\n * Converts a bytes array to base64 encoded string\n * @param bytes bytes array to be converted to base64\n * @returns base64 encoded string\n */const bytesToBase64=bytes=>{const binString=Array.from(bytes,x=>String.fromCodePoint(x)).join('');return globalThis.btoa(binString);};/**\n * Encodes a string to base64 even with unicode characters\n * @param value input string\n * @returns base64 encoded string\n */const toBase64=value=>bytesToBase64(new TextEncoder().encode(value));\n\n//   if yes make them null instead of omitting in overloaded cases\n/*\n * Normalise the overloaded arguments of the page call facade\n */const pageArgumentsToCallOptions=(category,name,properties,options,callback)=>{const payload={category:category,name:name,properties:properties,options:options};if(isFunction(callback)){payload.callback=callback;}if(isFunction(options)){payload.category=category;payload.name=name;payload.properties=properties;delete payload.options;payload.callback=options;}if(isFunction(properties)){payload.category=category;payload.name=name;delete payload.properties;delete payload.options;payload.callback=properties;}if(isFunction(name)){payload.category=category;delete payload.name;delete payload.properties;delete payload.options;payload.callback=name;}if(isFunction(category)){delete payload.category;delete payload.name;delete payload.properties;delete payload.options;payload.callback=category;}if(isObjectLiteralAndNotNull(category)){delete payload.name;delete payload.category;payload.properties=category;payload.options=name;}else if(isObjectLiteralAndNotNull(name)){delete payload.name;payload.properties=name;payload.options=!isFunction(properties)?properties:null;}// if the category argument alone is provided b/w category and name,\n// use it as name and set category to undefined\nif(isString(category)&&!isString(name)){delete payload.category;payload.name=category;}// Rest of the code is just to clean up undefined values\n// and set some proper defaults\n// Also, to clone the incoming object type arguments\nif(!isDefined(payload.category)){delete payload.category;}if(!isDefined(payload.name)){delete payload.name;}payload.properties=payload.properties?clone(payload.properties):{};if(isDefined(payload.options)){payload.options=clone(payload.options);}else {delete payload.options;}// add name and category to properties\npayload.properties=mergeDeepRight(isObjectLiteralAndNotNull(payload.properties)?payload.properties:{},{name:isString(payload.name)?payload.name:null,category:isString(payload.category)?payload.category:null});return payload;};/*\n * Normalise the overloaded arguments of the track call facade\n */const trackArgumentsToCallOptions=(event,properties,options,callback)=>{const payload={name:event,properties:properties,options:options};if(isFunction(callback)){payload.callback=callback;}if(isFunction(options)){payload.properties=properties;delete payload.options;payload.callback=options;}if(isFunction(properties)){delete payload.properties;delete payload.options;payload.callback=properties;}// Rest of the code is just to clean up undefined values\n// and set some proper defaults\n// Also, to clone the incoming object type arguments\npayload.properties=isDefinedAndNotNull(payload.properties)?clone(payload.properties):{};if(isDefined(payload.options)){payload.options=clone(payload.options);}else {delete payload.options;}return payload;};/*\n * Normalise the overloaded arguments of the identify call facade\n */const identifyArgumentsToCallOptions=(userId,traits,options,callback)=>{const payload={userId:userId,traits:traits,options:options};if(isFunction(callback)){payload.callback=callback;}if(isFunction(options)){payload.userId=userId;payload.traits=traits;delete payload.options;payload.callback=options;}if(isFunction(traits)){payload.userId=userId;delete payload.traits;delete payload.options;payload.callback=traits;}if(isObjectLiteralAndNotNull(userId)||isNull(userId)){// Explicitly set null to prevent resetting the existing value\n// in the Analytics class\npayload.userId=null;payload.traits=userId;payload.options=traits;}// Rest of the code is just to clean up undefined values\n// and set some proper defaults\n// Also, to clone the incoming object type arguments\nif(isDefined(payload.userId)){payload.userId=tryStringify(payload.userId);}else {delete payload.userId;}if(isObjectLiteralAndNotNull(payload.traits)){payload.traits=clone(payload.traits);}else {delete payload.traits;}if(isDefined(payload.options)){payload.options=clone(payload.options);}else {delete payload.options;}return payload;};/*\n * Normalise the overloaded arguments of the alias call facade\n */const aliasArgumentsToCallOptions=(to,from,options,callback)=>{const payload={to:to,from:from,options:options};if(isFunction(callback)){payload.callback=callback;}if(isFunction(options)){payload.to=to;payload.from=from;delete payload.options;payload.callback=options;}if(isFunction(from)){payload.to=to;delete payload.from;delete payload.options;payload.callback=from;}else if(isObjectLiteralAndNotNull(from)||isNull(from)){payload.to=to;delete payload.from;payload.options=from;}if(isFunction(to)){delete payload.to;delete payload.from;delete payload.options;payload.callback=to;}else if(isObjectLiteralAndNotNull(to)||isNull(to)){delete payload.to;delete payload.from;payload.options=to;}// Rest of the code is just to clean up undefined values\n// and set some proper defaults\n// Also, to clone the incoming object type arguments\nif(isDefined(payload.to)){payload.to=tryStringify(payload.to);}else {delete payload.to;}if(isDefined(payload.from)){payload.from=tryStringify(payload.from);}else {delete payload.from;}if(isDefined(payload.options)){payload.options=clone(payload.options);}else {delete payload.options;}return payload;};/*\n * Normalise the overloaded arguments of the group call facade\n */const groupArgumentsToCallOptions=(groupId,traits,options,callback)=>{const payload={groupId:groupId,traits:traits,options:options};if(isFunction(callback)){payload.callback=callback;}if(isFunction(options)){payload.groupId=groupId;payload.traits=traits;delete payload.options;payload.callback=options;}if(isFunction(traits)){payload.groupId=groupId;delete payload.traits;delete payload.options;payload.callback=traits;}// TODO: why do we enable overload for group that only passes callback? is there any use case?\nif(isFunction(groupId)){// Explicitly set null to prevent resetting the existing value\npayload.groupId=null;delete payload.traits;delete payload.options;payload.callback=groupId;}else if(isObjectLiteralAndNotNull(groupId)||isNull(groupId)){// Explicitly set null to prevent resetting the existing value\n// in the Analytics class\npayload.groupId=null;payload.traits=groupId;payload.options=!isFunction(traits)?traits:null;}// Rest of the code is just to clean up undefined values\n// and set some proper defaults\n// Also, to clone the incoming object type arguments\nif(isDefined(payload.groupId)){payload.groupId=tryStringify(payload.groupId);}else {delete payload.groupId;}payload.traits=isObjectLiteralAndNotNull(payload.traits)?clone(payload.traits):{};if(isDefined(payload.options)){payload.options=clone(payload.options);}else {delete payload.options;}return payload;};\n\nconst CAPABILITIES_MANAGER='CapabilitiesManager';const CONFIG_MANAGER='ConfigManager';const EVENT_MANAGER='EventManager';const PLUGINS_MANAGER='PluginsManager';const USER_SESSION_MANAGER='UserSessionManager';const ERROR_HANDLER='ErrorHandler';const PLUGIN_ENGINE='PluginEngine';const STORE_MANAGER='StoreManager';const READY_API='readyApi';const EVENT_REPOSITORY='EventRepository';const EXTERNAL_SRC_LOADER='ExternalSrcLoader';const HTTP_CLIENT='HttpClient';const RS_APP='RudderStackApplication';const ANALYTICS_CORE='AnalyticsCore';\n\nconst APP_NAME='RudderLabs JavaScript SDK';const APP_VERSION='3.5.2';const APP_NAMESPACE='com.rudderlabs.javascript';const MODULE_TYPE='npm';const ADBLOCK_PAGE_CATEGORY='RudderJS-Initiated';const ADBLOCK_PAGE_NAME='ad-block page request';const ADBLOCK_PAGE_PATH='/ad-blocked';const GLOBAL_PRELOAD_BUFFER='preloadedEventsBuffer';const CONSENT_TRACK_EVENT_NAME='Consent Management Interaction';\n\nconst QUERY_PARAM_TRAIT_PREFIX='ajs_trait_';const QUERY_PARAM_PROPERTY_PREFIX='ajs_prop_';const QUERY_PARAM_ANONYMOUS_ID_KEY='ajs_aid';const QUERY_PARAM_USER_ID_KEY='ajs_uid';const QUERY_PARAM_TRACK_EVENT_NAME_KEY='ajs_event';\n\nconst DEFAULT_XHR_TIMEOUT_MS=10*1000;// 10 seconds\nconst DEFAULT_COOKIE_MAX_AGE_MS=31536000*1000;// 1 year\nconst DEFAULT_SESSION_TIMEOUT_MS=30*60*1000;// 30 minutes\nconst MIN_SESSION_TIMEOUT_MS=10*1000;// 10 seconds\nconst DEFAULT_DATA_PLANE_EVENTS_BUFFER_TIMEOUT_MS=10*1000;// 10 seconds\nconst DEBOUNCED_TIMEOUT_MS=250;// 250 milliseconds\n\n/**\n * Create globally accessible RudderStackGlobals object\n */const createExposedGlobals=(analyticsInstanceId='app')=>{if(!globalThis.RudderStackGlobals){globalThis.RudderStackGlobals={};}if(!globalThis.RudderStackGlobals[analyticsInstanceId]){globalThis.RudderStackGlobals[analyticsInstanceId]={};}};/**\n * Add move values to globally accessible RudderStackGlobals object per analytics instance\n */const setExposedGlobal=(keyName,value,analyticsInstanceId='app')=>{createExposedGlobals(analyticsInstanceId);globalThis.RudderStackGlobals[analyticsInstanceId][keyName]=value;};/**\n * Get values from globally accessible RudderStackGlobals object by analytics instance\n */const getExposedGlobal=(keyName,analyticsInstanceId='app')=>{createExposedGlobals(analyticsInstanceId);return globalThis.RudderStackGlobals[analyticsInstanceId][keyName];};function debounce(func,thisArg,delay=DEBOUNCED_TIMEOUT_MS){let timeoutId;return (...args)=>{globalThis.clearTimeout(timeoutId);timeoutId=globalThis.setTimeout(()=>{func.apply(thisArg,args);},delay);};}\n\n/**\n * Parse query string params into object values for keys that start with a defined prefix\n */const getEventDataFromQueryString=(params,dataTypeNamePrefix)=>{const data={};params.forEach((value,key)=>{if(key.startsWith(dataTypeNamePrefix)){// remove prefix from key name\nconst dataKey=key.substring(dataTypeNamePrefix.length);// add new key value pair in generated object\ndata[dataKey]=params.get(key);}});return data;};/**\n * Parse query string into preload buffer events & push into existing array before any other events\n */const retrieveEventsFromQueryString=(argumentsArray=[])=>{// Mapping for trait and properties values based on key prefix\nconst eventArgumentToQueryParamMap={trait:QUERY_PARAM_TRAIT_PREFIX,properties:QUERY_PARAM_PROPERTY_PREFIX};const queryObject=new URLSearchParams(globalThis.location.search);// Add track events with name and properties\nif(queryObject.get(QUERY_PARAM_TRACK_EVENT_NAME_KEY)){argumentsArray.unshift(['track',queryObject.get(QUERY_PARAM_TRACK_EVENT_NAME_KEY),getEventDataFromQueryString(queryObject,eventArgumentToQueryParamMap.properties)]);}// Set userId and user traits\nif(queryObject.get(QUERY_PARAM_USER_ID_KEY)){argumentsArray.unshift(['identify',queryObject.get(QUERY_PARAM_USER_ID_KEY),getEventDataFromQueryString(queryObject,eventArgumentToQueryParamMap.trait)]);}// Set anonymousID\nif(queryObject.get(QUERY_PARAM_ANONYMOUS_ID_KEY)){argumentsArray.unshift(['setAnonymousId',queryObject.get(QUERY_PARAM_ANONYMOUS_ID_KEY)]);}};/**\n * Retrieve an existing buffered load method call and remove from the existing array\n */const getPreloadedLoadEvent=preloadedEventsArray=>{const loadMethodName='load';let loadEvent=[];/**\n   * Iterate the buffered API calls until we find load call and process it separately\n   */let i=0;while(i<preloadedEventsArray.length){if(preloadedEventsArray[i]&&preloadedEventsArray[i][0]===loadMethodName){loadEvent=clone(preloadedEventsArray[i]);preloadedEventsArray.splice(i,1);break;}i+=1;}return loadEvent;};/**\n * Promote consent events to the top of the preloaded events array\n * @param preloadedEventsArray Preloaded events array\n * @returns None\n */const promotePreloadedConsentEventsToTop=preloadedEventsArray=>{const consentMethodName='consent';const consentEvents=preloadedEventsArray.filter(bufferedEvent=>bufferedEvent[0]===consentMethodName);const nonConsentEvents=preloadedEventsArray.filter(bufferedEvent=>bufferedEvent[0]!==consentMethodName);// Remove all elements and add consent events first followed by non consent events\n// eslint-disable-next-line unicorn/no-useless-spread\npreloadedEventsArray.splice(0,preloadedEventsArray.length,...consentEvents,...nonConsentEvents);};/**\n * Retrieve any existing events that were triggered before SDK load and enqueue in buffer\n */const retrievePreloadBufferEvents=instance=>{const preloadedEventsArray=getExposedGlobal(GLOBAL_PRELOAD_BUFFER)||[];// Get events that are pre-populated via query string params\nretrieveEventsFromQueryString(preloadedEventsArray);// Enqueue the non load events in the buffer of the global rudder analytics singleton\nif(preloadedEventsArray.length>0){instance.enqueuePreloadBufferEvents(preloadedEventsArray);setExposedGlobal(GLOBAL_PRELOAD_BUFFER,[]);}};const consumePreloadBufferedEvent=(event,analyticsInstance)=>{const methodName=event.shift();let callOptions;if(isFunction(analyticsInstance[methodName])){switch(methodName){case'page':callOptions=pageArgumentsToCallOptions(...event);break;case'track':callOptions=trackArgumentsToCallOptions(...event);break;case'identify':callOptions=identifyArgumentsToCallOptions(...event);break;case'alias':callOptions=aliasArgumentsToCallOptions(...event);break;case'group':callOptions=groupArgumentsToCallOptions(...event);break;default:analyticsInstance[methodName](...event);break;}if(callOptions){analyticsInstance[methodName](callOptions);}}};\n\nconst DEFAULT_EXT_SRC_LOAD_TIMEOUT_MS=10*1000;// 10 seconds\n\nconst LOG_CONTEXT_SEPARATOR=':: ';const SCRIPT_ALREADY_EXISTS_ERROR=id=>`A script with the id \"${id}\" is already loaded. Skipping the loading of this script to prevent conflicts.`;const SCRIPT_LOAD_ERROR=(id,url)=>`Failed to load the script with the id \"${id}\" from URL \"${url}\".`;const SCRIPT_LOAD_TIMEOUT_ERROR=(id,url,timeout)=>`A timeout of ${timeout} ms occurred while trying to load the script with id \"${id}\" from URL \"${url}\".`;const CIRCULAR_REFERENCE_WARNING=(context,key)=>`${context}${LOG_CONTEXT_SEPARATOR}A circular reference has been detected in the object and the property \"${key}\" has been dropped from the output.`;const JSON_STRINGIFY_WARNING=`Failed to convert the value to a JSON string.`;\n\nconst JSON_STRINGIFY='JSONStringify';const getCircularReplacer=(excludeNull,excludeKeys,logger)=>{const ancestors=[];// Here we do not want to use arrow function to use \"this\" in function context\n// eslint-disable-next-line func-names\nreturn function(key,value){if(excludeKeys?.includes(key)){return undefined;}if(excludeNull&&isNullOrUndefined(value)){return undefined;}if(typeof value!=='object'||isNull(value)){return value;}// `this` is the object that value is contained in, i.e., its direct parent.\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore-next-line\nwhile(ancestors.length>0&&ancestors[ancestors.length-1]!==this){ancestors.pop();}if(ancestors.includes(value)){logger?.warn(CIRCULAR_REFERENCE_WARNING(JSON_STRINGIFY,key));return '[Circular Reference]';}ancestors.push(value);return value;};};/**\n * Utility method for JSON stringify object excluding null values & circular references\n *\n * @param {*} value input\n * @param {boolean} excludeNull if it should exclude nul or not\n * @param {function} logger optional logger methods for warning\n * @returns string\n */const stringifyWithoutCircular=(value,excludeNull,excludeKeys,logger)=>{try{return JSON.stringify(value,getCircularReplacer(excludeNull,excludeKeys,logger));}catch(err){logger?.warn(JSON_STRINGIFY_WARNING,err);return null;}};\n\n/**\n * Get mutated error with issue prepended to error message\n * @param err Original error\n * @param issue Issue to prepend to error message\n * @returns Instance of Error with message prepended with issue\n */const getMutatedError=(err,issue)=>{let finalError=err;if(!isTypeOfError(err)){finalError=new Error(`${issue}: ${stringifyWithoutCircular(err)}`);}else {finalError.message=`${issue}: ${err.message}`;}return finalError;};\n\nconst EXTERNAL_SOURCE_LOAD_ORIGIN='RS_JS_SDK';\n\n/**\n * Create the DOM element to load a script marked as RS SDK originated\n *\n * @param {*} url The URL of the script to be loaded\n * @param {*} id ID for the script tag\n * @param {*} async Whether to load the script in async mode. Defaults to `true` [optional]\n * @param {*} onload callback to invoke onload [optional]\n * @param {*} onerror callback to invoke onerror [optional]\n * @param {*} extraAttributes key/value pair with html attributes to add in html tag [optional]\n *\n * @returns HTMLScriptElement\n */const createScriptElement=(url,id,async=true,onload=null,onerror=null,extraAttributes={})=>{const scriptElement=document.createElement('script');scriptElement.type='text/javascript';scriptElement.onload=onload;scriptElement.onerror=onerror;scriptElement.src=url;scriptElement.id=id;scriptElement.async=async;Object.keys(extraAttributes).forEach(attributeName=>{scriptElement.setAttribute(attributeName,extraAttributes[attributeName]);});scriptElement.setAttribute('data-loader',EXTERNAL_SOURCE_LOAD_ORIGIN);return scriptElement;};/**\n * Add script DOM element to DOM\n *\n * @param {*} newScriptElement the script element to add\n *\n * @returns\n */const insertScript=newScriptElement=>{// First try to add it to the head\nconst headElements=document.getElementsByTagName('head');if(headElements.length>0){headElements[0]?.insertBefore(newScriptElement,headElements[0]?.firstChild);return;}// Else wise add it before the first script tag\nconst scriptElements=document.getElementsByTagName('script');if(scriptElements.length>0&&scriptElements[0]?.parentNode){scriptElements[0]?.parentNode.insertBefore(newScriptElement,scriptElements[0]);return;}// Create a new head element and add the script as fallback\nconst headElement=document.createElement('head');headElement.appendChild(newScriptElement);const htmlElement=document.getElementsByTagName('html')[0];htmlElement?.insertBefore(headElement,htmlElement.firstChild);};/**\n * Loads external js file as a script html tag\n *\n * @param {*} url The URL of the script to be loaded\n * @param {*} id ID for the script tag\n * @param {*} timeout loading timeout\n * @param {*} async Whether to load the script in async mode. Defaults to `true` [optional]\n * @param {*} extraAttributes key/value pair with html attributes to add in html tag [optional]\n *\n * @returns\n */const jsFileLoader=(url,id,timeout,async=true,extraAttributes)=>new Promise((resolve,reject)=>{const scriptExists=document.getElementById(id);if(scriptExists){reject(new Error(SCRIPT_ALREADY_EXISTS_ERROR(id)));}try{let timeoutID;const onload=()=>{globalThis.clearTimeout(timeoutID);resolve(id);};const onerror=()=>{globalThis.clearTimeout(timeoutID);reject(new Error(SCRIPT_LOAD_ERROR(id,url)));};// Create the DOM element to load the script and add it to the DOM\ninsertScript(createScriptElement(url,id,async,onload,onerror,extraAttributes));// Reject on timeout\ntimeoutID=globalThis.setTimeout(()=>{reject(new Error(SCRIPT_LOAD_TIMEOUT_ERROR(id,url,timeout)));},timeout);}catch(err){reject(getMutatedError(err,SCRIPT_LOAD_ERROR(id,url)));}});\n\n/**\n * Service to load external resources/files\n */class ExternalSrcLoader{hasErrorHandler=false;constructor(errorHandler,logger,timeout=DEFAULT_EXT_SRC_LOAD_TIMEOUT_MS){this.errorHandler=errorHandler;this.logger=logger;this.timeout=timeout;this.hasErrorHandler=Boolean(this.errorHandler);this.onError=this.onError.bind(this);}/**\n   * Load external resource of type javascript\n   */loadJSFile(config){const{url,id,timeout,async,callback,extraAttributes}=config;const isFireAndForget=!isFunction(callback);jsFileLoader(url,id,timeout||this.timeout,async,extraAttributes).then(id=>{if(!isFireAndForget){callback(id);}}).catch(err=>{this.onError(err);if(!isFireAndForget){callback();}});}/**\n   * Handle errors\n   */onError(error){if(this.hasErrorHandler){this.errorHandler?.onError(error,EXTERNAL_SRC_LOADER);}else {throw error;}}}\n\nvar i=Symbol.for(\"preact-signals\");function t(){if(!(s>1)){var i,t=!1;while(void 0!==h){var r=h;h=void 0;f++;while(void 0!==r){var o=r.o;r.o=void 0;r.f&=-3;if(!(8&r.f)&&c(r))try{r.c();}catch(r){if(!t){i=r;t=!0;}}r=o;}}f=0;s--;if(t)throw i;}else s--;}function r(i){if(s>0)return i();s++;try{return i();}finally{t();}}var o=void 0;var h=void 0,s=0,f=0,v=0;function e(i){if(void 0!==o){var t=i.n;if(void 0===t||t.t!==o){t={i:0,S:i,p:o.s,n:void 0,t:o,e:void 0,x:void 0,r:t};if(void 0!==o.s)o.s.n=t;o.s=t;i.n=t;if(32&o.f)i.S(t);return t;}else if(-1===t.i){t.i=0;if(void 0!==t.n){t.n.p=t.p;if(void 0!==t.p)t.p.n=t.n;t.p=o.s;t.n=void 0;o.s.n=t;o.s=t;}return t;}}}function u(i){this.v=i;this.i=0;this.n=void 0;this.t=void 0;}u.prototype.brand=i;u.prototype.h=function(){return !0;};u.prototype.S=function(i){if(this.t!==i&&void 0===i.e){i.x=this.t;if(void 0!==this.t)this.t.e=i;this.t=i;}};u.prototype.U=function(i){if(void 0!==this.t){var t=i.e,r=i.x;if(void 0!==t){t.x=r;i.e=void 0;}if(void 0!==r){r.e=t;i.x=void 0;}if(i===this.t)this.t=r;}};u.prototype.subscribe=function(i){var t=this;return E(function(){var r=t.value,n=o;o=void 0;try{i(r);}finally{o=n;}});};u.prototype.valueOf=function(){return this.value;};u.prototype.toString=function(){return this.value+\"\";};u.prototype.toJSON=function(){return this.value;};u.prototype.peek=function(){var i=o;o=void 0;try{return this.value;}finally{o=i;}};Object.defineProperty(u.prototype,\"value\",{get:function(){var i=e(this);if(void 0!==i)i.i=this.i;return this.v;},set:function(i){if(i!==this.v){if(f>100)throw new Error(\"Cycle detected\");this.v=i;this.i++;v++;s++;try{for(var r=this.t;void 0!==r;r=r.x)r.t.N();}finally{t();}}}});function d(i){return new u(i);}function c(i){for(var t=i.s;void 0!==t;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return !0;return !1;}function a(i){for(var t=i.s;void 0!==t;t=t.n){var r=t.S.n;if(void 0!==r)t.r=r;t.S.n=t;t.i=-1;if(void 0===t.n){i.s=t;break;}}}function l(i){var t=i.s,r=void 0;while(void 0!==t){var o=t.p;if(-1===t.i){t.S.U(t);if(void 0!==o)o.n=t.n;if(void 0!==t.n)t.n.p=o;}else r=t;t.S.n=t.r;if(void 0!==t.r)t.r=void 0;t=o;}i.s=r;}function y(i){u.call(this,void 0);this.x=i;this.s=void 0;this.g=v-1;this.f=4;}(y.prototype=new u()).h=function(){this.f&=-3;if(1&this.f)return !1;if(32==(36&this.f))return !0;this.f&=-5;if(this.g===v)return !0;this.g=v;this.f|=1;if(this.i>0&&!c(this)){this.f&=-2;return !0;}var i=o;try{a(this);o=this;var t=this.x();if(16&this.f||this.v!==t||0===this.i){this.v=t;this.f&=-17;this.i++;}}catch(i){this.v=i;this.f|=16;this.i++;}o=i;l(this);this.f&=-2;return !0;};y.prototype.S=function(i){if(void 0===this.t){this.f|=36;for(var t=this.s;void 0!==t;t=t.n)t.S.S(t);}u.prototype.S.call(this,i);};y.prototype.U=function(i){if(void 0!==this.t){u.prototype.U.call(this,i);if(void 0===this.t){this.f&=-33;for(var t=this.s;void 0!==t;t=t.n)t.S.U(t);}}};y.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var i=this.t;void 0!==i;i=i.x)i.t.N();}};Object.defineProperty(y.prototype,\"value\",{get:function(){if(1&this.f)throw new Error(\"Cycle detected\");var i=e(this);this.h();if(void 0!==i)i.i=this.i;if(16&this.f)throw this.v;return this.v;}});function _(i){var r=i.u;i.u=void 0;if(\"function\"==typeof r){s++;var n=o;o=void 0;try{r();}catch(t){i.f&=-2;i.f|=8;g(i);throw t;}finally{o=n;t();}}}function g(i){for(var t=i.s;void 0!==t;t=t.n)t.S.U(t);i.x=void 0;i.s=void 0;_(i);}function p(i){if(o!==this)throw new Error(\"Out-of-order effect\");l(this);o=i;this.f&=-2;if(8&this.f)g(this);t();}function b(i){this.x=i;this.u=void 0;this.s=void 0;this.o=void 0;this.f=32;}b.prototype.c=function(){var i=this.S();try{if(8&this.f)return;if(void 0===this.x)return;var t=this.x();if(\"function\"==typeof t)this.u=t;}finally{i();}};b.prototype.S=function(){if(1&this.f)throw new Error(\"Cycle detected\");this.f|=1;this.f&=-9;_(this);a(this);s++;var i=o;o=this;return p.bind(this,i);};b.prototype.N=function(){if(!(2&this.f)){this.f|=2;this.o=h;h=this;}};b.prototype.d=function(){this.f|=8;if(!(1&this.f))g(this);};function E(i){var t=new b(i);try{t.c();}catch(i){t.d();throw i;}return t.d.bind(t);}\n\n/**\n * A buffer queue to serve as a store for any type of data\n */class BufferQueue{constructor(){this.items=[];}enqueue(item){this.items.push(item);}dequeue(){if(this.items.length===0){return null;}return this.items.shift();}isEmpty(){return this.items.length===0;}size(){return this.items.length;}clear(){this.items=[];}}\n\nconst LOG_LEVEL_MAP={LOG:0,INFO:1,DEBUG:2,WARN:3,ERROR:4,NONE:5};const DEFAULT_LOG_LEVEL='ERROR';const LOG_MSG_PREFIX='RS SDK';const LOG_MSG_PREFIX_STYLE='font-weight: bold; background: black; color: white;';const LOG_MSG_STYLE='font-weight: normal;';/**\n * Service to log messages/data to output provider, default is console\n */class Logger{constructor(minLogLevel=DEFAULT_LOG_LEVEL,scope='',logProvider=console){this.minLogLevel=LOG_LEVEL_MAP[minLogLevel];this.scope=scope;this.logProvider=logProvider;}log(...data){this.outputLog('LOG',data);}info(...data){this.outputLog('INFO',data);}debug(...data){this.outputLog('DEBUG',data);}warn(...data){this.outputLog('WARN',data);}error(...data){this.outputLog('ERROR',data);}outputLog(logMethod,data){if(this.minLogLevel<=LOG_LEVEL_MAP[logMethod]){this.logProvider[logMethod.toLowerCase()]?.(...this.formatLogData(data));}}setScope(scopeVal){this.scope=scopeVal||this.scope;}// TODO: should we allow to change the level via global variable on run time\n//  to assist on the fly debugging?\nsetMinLogLevel(logLevel){this.minLogLevel=LOG_LEVEL_MAP[logLevel];if(isUndefined(this.minLogLevel)){this.minLogLevel=LOG_LEVEL_MAP[DEFAULT_LOG_LEVEL];}}/**\n   * Formats the console message using `scope` and styles\n   */formatLogData(data){if(Array.isArray(data)&&data.length>0){// prefix SDK identifier\nlet msg=`%c ${LOG_MSG_PREFIX}`;// format the log message using `scope`\nif(this.scope){msg=`${msg} - ${this.scope}`;}// trim whitespaces for original message\nconst originalMsg=isString(data[0])?data[0].trim():'';// prepare the final message\nmsg=`${msg} %c ${originalMsg}`;const styledLogArgs=[msg,LOG_MSG_PREFIX_STYLE,// add style for the prefix\nLOG_MSG_STYLE// reset the style for the actual message\n];// add first it if it was not a string msg\nif(!isString(data[0])){styledLogArgs.push(data[0]);}// append rest of the original arguments\nstyledLogArgs.push(...data.slice(1));return styledLogArgs;}return data;}}const defaultLogger=new Logger();\n\n// default is v3\nconst SUPPORTED_STORAGE_TYPES=['localStorage','memoryStorage','cookieStorage','sessionStorage','none'];const DEFAULT_STORAGE_TYPE='cookieStorage';\n\nconst SOURCE_CONFIG_OPTION_ERROR=`\"getSourceConfig\" must be a function. Please make sure that it is defined and returns a valid source configuration object.`;const SOURCE_CONFIG_RESOLUTION_ERROR=`Unable to process/parse source configuration response.`;const SOURCE_DISABLED_ERROR=`The source is disabled. Please enable the source in the dashboard to send events.`;const XHR_PAYLOAD_PREP_ERROR=`Failed to prepare data for the request.`;const EVENT_OBJECT_GENERATION_ERROR=`Failed to generate the event object.`;const PLUGIN_EXT_POINT_MISSING_ERROR=`Failed to invoke plugin because the extension point name is missing.`;const PLUGIN_EXT_POINT_INVALID_ERROR=`Failed to invoke plugin because the extension point name is invalid.`;const COMPONENT_BASE_URL_ERROR=component=>`Failed to load the SDK as the base URL for ${component} is not valid.`;// ERROR\nconst UNSUPPORTED_CONSENT_MANAGER_ERROR=(context,selectedConsentManager,consentManagersToPluginNameMap)=>`${context}${LOG_CONTEXT_SEPARATOR}The consent manager \"${selectedConsentManager}\" is not supported. Please choose one of the following supported consent managers: \"${Object.keys(consentManagersToPluginNameMap)}\".`;const REPORTING_PLUGIN_INIT_FAILURE_ERROR=context=>`${context}${LOG_CONTEXT_SEPARATOR}Failed to initialize the error reporting plugin.`;const NOTIFY_FAILURE_ERROR=context=>`${context}${LOG_CONTEXT_SEPARATOR}Failed to notify the error.`;const PLUGIN_NAME_MISSING_ERROR=context=>`${context}${LOG_CONTEXT_SEPARATOR}Plugin name is missing.`;const PLUGIN_ALREADY_EXISTS_ERROR=(context,pluginName)=>`${context}${LOG_CONTEXT_SEPARATOR}Plugin \"${pluginName}\" already exists.`;const PLUGIN_NOT_FOUND_ERROR=(context,pluginName)=>`${context}${LOG_CONTEXT_SEPARATOR}Plugin \"${pluginName}\" not found.`;const PLUGIN_ENGINE_BUG_ERROR=(context,pluginName)=>`${context}${LOG_CONTEXT_SEPARATOR}Plugin \"${pluginName}\" not found in plugins but found in byName. This indicates a bug in the plugin engine. Please report this issue to the development team.`;const PLUGIN_DEPS_ERROR=(context,pluginName,notExistDeps)=>`${context}${LOG_CONTEXT_SEPARATOR}Plugin \"${pluginName}\" could not be loaded because some of its dependencies \"${notExistDeps}\" do not exist.`;const PLUGIN_INVOCATION_ERROR=(context,extPoint,pluginName)=>`${context}${LOG_CONTEXT_SEPARATOR}Failed to invoke the \"${extPoint}\" extension point of plugin \"${pluginName}\".`;const STORAGE_UNAVAILABILITY_ERROR_PREFIX=(context,storageType)=>`${context}${LOG_CONTEXT_SEPARATOR}The \"${storageType}\" storage type is `;const SOURCE_CONFIG_FETCH_ERROR=reason=>`Failed to fetch the source config. Reason: ${reason}`;const WRITE_KEY_VALIDATION_ERROR=writeKey=>`The write key \"${writeKey}\" is invalid. It must be a non-empty string. Please check that the write key is correct and try again.`;const DATA_PLANE_URL_VALIDATION_ERROR=dataPlaneUrl=>`The data plane URL \"${dataPlaneUrl}\" is invalid. It must be a valid URL string. Please check that the data plane URL is correct and try again.`;const READY_API_CALLBACK_ERROR=context=>`${context}${LOG_CONTEXT_SEPARATOR}The callback is not a function.`;const XHR_DELIVERY_ERROR=(prefix,status,statusText,url)=>`${prefix} with status: ${status}, ${statusText} for URL: ${url}.`;const XHR_REQUEST_ERROR=(prefix,e,url)=>`${prefix} due to timeout or no connection (${e?e.type:''}) for URL: ${url}.`;const XHR_SEND_ERROR=(prefix,url)=>`${prefix} for URL: ${url}`;const STORE_DATA_SAVE_ERROR=key=>`Failed to save the value for \"${key}\" to storage`;const STORE_DATA_FETCH_ERROR=key=>`Failed to retrieve or parse data for \"${key}\" from storage`;const DATA_SERVER_REQUEST_FAIL_ERROR=status=>`The server responded with status ${status} while setting the cookies. As a fallback, the cookies will be set client side.`;const FAILED_SETTING_COOKIE_FROM_SERVER_ERROR=key=>`The server failed to set the ${key} cookie. As a fallback, the cookies will be set client side.`;const FAILED_SETTING_COOKIE_FROM_SERVER_GLOBAL_ERROR=`Failed to set/remove cookies via server. As a fallback, the cookies will be managed client side.`;// WARNING\nconst STORAGE_TYPE_VALIDATION_WARNING=(context,storageType,defaultStorageType)=>`${context}${LOG_CONTEXT_SEPARATOR}The storage type \"${storageType}\" is not supported. Please choose one of the following supported types: \"${SUPPORTED_STORAGE_TYPES}\". The default type \"${defaultStorageType}\" will be used instead.`;const UNSUPPORTED_ERROR_REPORTING_PROVIDER_WARNING=(context,selectedErrorReportingProvider,errorReportingProvidersToPluginNameMap,defaultProvider)=>`${context}${LOG_CONTEXT_SEPARATOR}The error reporting provider \"${selectedErrorReportingProvider}\" is not supported. Please choose one of the following supported providers: \"${Object.keys(errorReportingProvidersToPluginNameMap)}\". The default provider \"${defaultProvider}\" will be used instead.`;const UNSUPPORTED_STORAGE_ENCRYPTION_VERSION_WARNING=(context,selectedStorageEncryptionVersion,storageEncryptionVersionsToPluginNameMap,defaultVersion)=>`${context}${LOG_CONTEXT_SEPARATOR}The storage encryption version \"${selectedStorageEncryptionVersion}\" is not supported. Please choose one of the following supported versions: \"${Object.keys(storageEncryptionVersionsToPluginNameMap)}\". The default version \"${defaultVersion}\" will be used instead.`;const STORAGE_DATA_MIGRATION_OVERRIDE_WARNING=(context,storageEncryptionVersion,defaultVersion)=>`${context}${LOG_CONTEXT_SEPARATOR}The storage data migration has been disabled because the configured storage encryption version (${storageEncryptionVersion}) is not the latest (${defaultVersion}). To enable storage data migration, please update the storage encryption version to the latest version.`;const RESERVED_KEYWORD_WARNING=(context,property,parentKeyPath,reservedElements)=>`${context}${LOG_CONTEXT_SEPARATOR}The \"${property}\" property defined under \"${parentKeyPath}\" is a reserved keyword. Please choose a different property name to avoid conflicts with reserved keywords (${reservedElements}).`;const UNSUPPORTED_BEACON_API_WARNING=context=>`${context}${LOG_CONTEXT_SEPARATOR}The Beacon API is not supported by your browser. The events will be sent using XHR instead.`;const TIMEOUT_NOT_NUMBER_WARNING=(context,timeout,defaultValue)=>`${context}${LOG_CONTEXT_SEPARATOR}The session timeout value \"${timeout}\" is not a number. The default timeout of ${defaultValue} ms will be used instead.`;const TIMEOUT_ZERO_WARNING=context=>`${context}${LOG_CONTEXT_SEPARATOR}The session timeout value is 0, which disables the automatic session tracking feature. If you want to enable session tracking, please provide a positive integer value for the timeout.`;const TIMEOUT_NOT_RECOMMENDED_WARNING=(context,timeout,minTimeout)=>`${context}${LOG_CONTEXT_SEPARATOR}The session timeout value ${timeout} ms is less than the recommended minimum of ${minTimeout} ms. Please consider increasing the timeout value to ensure optimal performance and reliability.`;const INVALID_SESSION_ID_WARNING=(context,sessionId,minSessionIdLength)=>`${context}${LOG_CONTEXT_SEPARATOR}The provided session ID (${sessionId}) is either invalid, not a positive integer, or not at least \"${minSessionIdLength}\" digits long. A new session ID will be auto-generated instead.`;const STORAGE_QUOTA_EXCEEDED_WARNING=context=>`${context}${LOG_CONTEXT_SEPARATOR}The storage is either full or unavailable, so the data will not be persisted. Switching to in-memory storage.`;const STORAGE_UNAVAILABLE_WARNING=(context,entry,selectedStorageType,finalStorageType)=>`${context}${LOG_CONTEXT_SEPARATOR}The storage type \"${selectedStorageType}\" is not available for entry \"${entry}\". The SDK will initialize the entry with \"${finalStorageType}\" storage type instead.`;const WRITE_KEY_NOT_A_STRING_ERROR=(context,writeKey)=>`${context}${LOG_CONTEXT_SEPARATOR}The write key \"${writeKey}\" is not a string. Please check that the write key is correct and try again.`;const EMPTY_GROUP_CALL_ERROR=context=>`${context}${LOG_CONTEXT_SEPARATOR}The group() method must be called with at least one argument.`;const READY_CALLBACK_INVOKE_ERROR=`Failed to invoke the ready callback`;const API_CALLBACK_INVOKE_ERROR=`API Callback Invocation Failed`;const NATIVE_DEST_PLUGIN_INITIALIZE_ERROR=`NativeDestinationQueuePlugin initialization failed`;const DATAPLANE_PLUGIN_INITIALIZE_ERROR=`XhrQueuePlugin initialization failed`;const DMT_PLUGIN_INITIALIZE_ERROR=`DeviceModeTransformationPlugin initialization failed`;const NATIVE_DEST_PLUGIN_ENQUEUE_ERROR=`NativeDestinationQueuePlugin event enqueue failed`;const DATAPLANE_PLUGIN_ENQUEUE_ERROR=`XhrQueuePlugin event enqueue failed`;const INVALID_CONFIG_URL_WARNING=(context,configUrl)=>`${context}${LOG_CONTEXT_SEPARATOR}The provided source config URL \"${configUrl}\" is invalid. Using the default source config URL instead.`;const POLYFILL_SCRIPT_LOAD_ERROR=(scriptId,url)=>`Failed to load the polyfill script with ID \"${scriptId}\" from URL ${url}.`;const UNSUPPORTED_PRE_CONSENT_STORAGE_STRATEGY=(context,selectedStrategy,defaultStrategy)=>`${context}${LOG_CONTEXT_SEPARATOR}The pre-consent storage strategy \"${selectedStrategy}\" is not supported. Please choose one of the following supported strategies: \"none, session, anonymousId\". The default strategy \"${defaultStrategy}\" will be used instead.`;const UNSUPPORTED_PRE_CONSENT_EVENTS_DELIVERY_TYPE=(context,selectedDeliveryType,defaultDeliveryType)=>`${context}${LOG_CONTEXT_SEPARATOR}The pre-consent events delivery type \"${selectedDeliveryType}\" is not supported. Please choose one of the following supported types: \"immediate, buffer\". The default type \"${defaultDeliveryType}\" will be used instead.`;const generateMisconfiguredPluginsWarning=(context,configurationStatus,missingPlugins,shouldAddMissingPlugins)=>{const isSinglePlugin=missingPlugins.length===1;const pluginsString=isSinglePlugin?` '${missingPlugins[0]}' plugin was`:` ['${missingPlugins.join(\"', '\")}'] plugins were`;const baseWarning=`${context}${LOG_CONTEXT_SEPARATOR}${configurationStatus}, but${pluginsString} not configured to load.`;if(shouldAddMissingPlugins){return `${baseWarning} So, ${isSinglePlugin?'the plugin':'those plugins'} will be loaded automatically.`;}return `${baseWarning} Ignore if this was intentional. Otherwise, consider adding ${isSinglePlugin?'it':'them'} to the 'plugins' load API option.`;};const INVALID_POLYFILL_URL_WARNING=(context,customPolyfillUrl)=>`${context}${LOG_CONTEXT_SEPARATOR}The provided polyfill URL \"${customPolyfillUrl}\" is invalid. The default polyfill URL will be used instead.`;// DEBUG\n\nconst CDN_INT_DIR='js-integrations';const CDN_PLUGINS_DIR='plugins';const URL_PATTERN=new RegExp('^(https?:\\\\/\\\\/)'+// protocol\n'('+'((([a-zA-Z\\\\d]([a-zA-Z\\\\d-]*[a-zA-Z\\\\d])*)\\\\.)+[a-zA-Z]{2,}|'+// domain name\n'localhost|'+// localhost\n'((25[0-5]|2[0-4][0-9]|[0-1]?[0-9]?[0-9]?)\\\\.){3}'+// OR IP (v4) address first 3 octets\n'(25[0-5]|2[0-4][0-9]|[0-1]?[0-9]?[0-9]?))'+// last octet of IP address\n')'+'(\\\\:\\\\d+)?'+// port\n'(\\\\/[-a-zA-Z\\\\d%_.~+]*)*'+// path\n'(\\\\?[;&a-zA-Z\\\\d%_.~+=-]*)?'+// query string\n'(\\\\#[-a-zA-Z\\\\d_]*)?$')// fragment locator\n;\n\nconst BUILD_TYPE='modern';const SDK_CDN_BASE_URL='https://cdn.rudderlabs.com';const CDN_ARCH_VERSION_DIR='v3';const DEST_SDK_BASE_URL=`${SDK_CDN_BASE_URL}/${CDN_ARCH_VERSION_DIR}/${BUILD_TYPE}/${CDN_INT_DIR}`;const PLUGINS_BASE_URL=`${SDK_CDN_BASE_URL}/${CDN_ARCH_VERSION_DIR}/${BUILD_TYPE}/${CDN_PLUGINS_DIR}`;const DEFAULT_CONFIG_BE_URL='https://api.rudderstack.com';\n\nconst DEFAULT_ERROR_REPORTING_PROVIDER='bugsnag';const DEFAULT_STORAGE_ENCRYPTION_VERSION='v3';const DEFAULT_DATA_PLANE_EVENTS_TRANSPORT='xhr';const ConsentManagersToPluginNameMap={oneTrust:'OneTrustConsentManager',ketch:'KetchConsentManager',custom:'CustomConsentManager'};const ErrorReportingProvidersToPluginNameMap={[DEFAULT_ERROR_REPORTING_PROVIDER]:'Bugsnag'};const StorageEncryptionVersionsToPluginNameMap={[DEFAULT_STORAGE_ENCRYPTION_VERSION]:'StorageEncryption',legacy:'StorageEncryptionLegacy'};const DataPlaneEventsTransportToPluginNameMap={[DEFAULT_DATA_PLANE_EVENTS_TRANSPORT]:'XhrQueue',beacon:'BeaconQueue'};const DEFAULT_DATA_SERVICE_ENDPOINT='rsaRequest';\n\nconst defaultLoadOptions={logLevel:'ERROR',configUrl:DEFAULT_CONFIG_BE_URL,loadIntegration:true,sessions:{autoTrack:true,timeout:DEFAULT_SESSION_TIMEOUT_MS},sameSiteCookie:'Lax',polyfillIfRequired:true,integrations:{All:true},useBeacon:false,beaconQueueOptions:{},destinationsQueueOptions:{},queueOptions:{},lockIntegrationsVersion:false,lockPluginsVersion:false,uaChTrackLevel:'none',plugins:[],useGlobalIntegrationsConfigInEvents:false,bufferDataPlaneEventsUntilReady:false,dataPlaneEventsBufferTimeout:DEFAULT_DATA_PLANE_EVENTS_BUFFER_TIMEOUT_MS,storage:{encryption:{version:DEFAULT_STORAGE_ENCRYPTION_VERSION},migrate:true},sendAdblockPageOptions:{},useServerSideCookies:false};const loadOptionsState=d(clone(defaultLoadOptions));\n\nconst DEFAULT_USER_SESSION_VALUES={userId:'',userTraits:{},anonymousId:'',groupId:'',groupTraits:{},initialReferrer:'',initialReferringDomain:'',sessionInfo:{},authToken:null};const SERVER_SIDE_COOKIES_DEBOUNCE_TIME=10;// milliseconds\n\nconst defaultSessionConfiguration={autoTrack:true,timeout:DEFAULT_SESSION_TIMEOUT_MS};const sessionState={userId:d(DEFAULT_USER_SESSION_VALUES.userId),userTraits:d(DEFAULT_USER_SESSION_VALUES.userTraits),anonymousId:d(DEFAULT_USER_SESSION_VALUES.anonymousId),groupId:d(DEFAULT_USER_SESSION_VALUES.groupId),groupTraits:d(DEFAULT_USER_SESSION_VALUES.groupTraits),initialReferrer:d(DEFAULT_USER_SESSION_VALUES.initialReferrer),initialReferringDomain:d(DEFAULT_USER_SESSION_VALUES.initialReferringDomain),sessionInfo:d(DEFAULT_USER_SESSION_VALUES.sessionInfo),authToken:d(DEFAULT_USER_SESSION_VALUES.authToken)};\n\nconst capabilitiesState={isOnline:d(true),storage:{isLocalStorageAvailable:d(false),isCookieStorageAvailable:d(false),isSessionStorageAvailable:d(false)},isBeaconAvailable:d(false),isLegacyDOM:d(false),isUaCHAvailable:d(false),isCryptoAvailable:d(false),isIE11:d(false),isAdBlocked:d(false)};\n\nconst reportingState={isErrorReportingEnabled:d(false),isMetricsReportingEnabled:d(false),errorReportingProviderPluginName:d(undefined),isErrorReportingPluginLoaded:d(false)};\n\nconst sourceConfigState=d(undefined);\n\nconst lifecycleState={activeDataplaneUrl:d(undefined),integrationsCDNPath:d(DEST_SDK_BASE_URL),pluginsCDNPath:d(PLUGINS_BASE_URL),sourceConfigUrl:d(undefined),status:d(undefined),initialized:d(false),logLevel:d('ERROR'),loaded:d(false),readyCallbacks:d([]),writeKey:d(undefined),dataPlaneUrl:d(undefined)};\n\nconst consentsState={enabled:d(false),initialized:d(false),data:d({}),activeConsentManagerPluginName:d(undefined),preConsent:d({enabled:false}),postConsent:d({}),resolutionStrategy:d('and'),provider:d(undefined),metadata:d(undefined)};\n\nconst metricsState={retries:d(0),dropped:d(0),sent:d(0),queued:d(0),triggered:d(0)};\n\nconst contextState={app:d({name:APP_NAME,namespace:APP_NAMESPACE,version:APP_VERSION,installType:MODULE_TYPE}),traits:d(null),library:d({name:APP_NAME,version:APP_VERSION,snippetVersion:globalThis.RudderSnippetVersion}),userAgent:d(''),device:d(null),network:d(null),os:d({name:'',version:''}),locale:d(null),screen:d({density:0,width:0,height:0,innerWidth:0,innerHeight:0}),'ua-ch':d(undefined),timezone:d(undefined)};\n\nconst nativeDestinationsState={configuredDestinations:d([]),activeDestinations:d([]),loadOnlyIntegrations:d({}),failedDestinations:d([]),loadIntegration:d(true),initializedDestinations:d([]),clientDestinationsReady:d(false),integrationsConfig:d({})};\n\nconst eventBufferState={toBeProcessedArray:d([]),readyCallbacksArray:d([])};\n\nconst pluginsState={ready:d(false),loadedPlugins:d([]),failedPlugins:d([]),pluginsToLoadFromConfig:d([]),activePlugins:d([]),totalPluginsToLoad:d(0)};\n\nconst storageState={encryptionPluginName:d(undefined),migrate:d(false),type:d(undefined),cookie:d(undefined),entries:d({}),trulyAnonymousTracking:d(false)};\n\nconst serverSideCookiesState={isEnabledServerSideCookies:d(false),dataServiceUrl:d(undefined)};\n\nconst dataPlaneEventsState={eventsQueuePluginName:d(undefined),deliveryEnabled:d(true)// Delivery should always happen\n};\n\nconst defaultStateValues={capabilities:capabilitiesState,consents:consentsState,context:contextState,eventBuffer:eventBufferState,lifecycle:lifecycleState,loadOptions:loadOptionsState,metrics:metricsState,nativeDestinations:nativeDestinationsState,plugins:pluginsState,reporting:reportingState,session:sessionState,source:sourceConfigState,storage:storageState,serverCookies:serverSideCookiesState,dataPlaneEvents:dataPlaneEventsState};const state={...clone(defaultStateValues)};\n\n//  to next or return the value if it is the last one instead of an array per\n//  plugin that is the normal invoke\n// TODO: add invoke method for extension point that we know only one plugin can be used. add invokeMultiple and invokeSingle methods\nclass PluginEngine{plugins=[];byName={};cache={};config={throws:true};constructor(options={},logger){this.config={throws:true,...options};this.logger=logger;}register(plugin,state){if(!plugin.name){const errorMessage=PLUGIN_NAME_MISSING_ERROR(PLUGIN_ENGINE);if(this.config.throws){throw new Error(errorMessage);}else {this.logger?.error(errorMessage,plugin);}}if(this.byName[plugin.name]){const errorMessage=PLUGIN_ALREADY_EXISTS_ERROR(PLUGIN_ENGINE,plugin.name);if(this.config.throws){throw new Error(errorMessage);}else {this.logger?.error(errorMessage);}}this.cache={};this.plugins=this.plugins.slice();let pos=this.plugins.length;this.plugins.forEach((pluginItem,index)=>{if(pluginItem.deps?.includes(plugin.name)){pos=Math.min(pos,index);}});this.plugins.splice(pos,0,plugin);this.byName[plugin.name]=plugin;if(isFunction(plugin.initialize)){plugin.initialize(state);}}unregister(name){const plugin=this.byName[name];if(!plugin){const errorMessage=PLUGIN_NOT_FOUND_ERROR(PLUGIN_ENGINE,name);if(this.config.throws){throw new Error(errorMessage);}else {this.logger?.error(errorMessage);}}const index=this.plugins.indexOf(plugin);if(index===-1){const errorMessage=PLUGIN_ENGINE_BUG_ERROR(PLUGIN_ENGINE,name);if(this.config.throws){throw new Error(errorMessage);}else {this.logger?.error(errorMessage);}}this.cache={};delete this.byName[name];this.plugins=this.plugins.slice();this.plugins.splice(index,1);}getPlugin(name){return this.byName[name];}getPlugins(extPoint){const lifeCycleName=extPoint??'.';if(!this.cache[lifeCycleName]){this.cache[lifeCycleName]=this.plugins.filter(plugin=>{if(plugin.deps?.some(dependency=>!this.byName[dependency])){// If deps not exist, then not load it.\nconst notExistDeps=plugin.deps.filter(dependency=>!this.byName[dependency]);this.logger?.error(PLUGIN_DEPS_ERROR(PLUGIN_ENGINE,plugin.name,notExistDeps));return false;}return lifeCycleName==='.'?true:hasValueByPath(plugin,lifeCycleName);});}return this.cache[lifeCycleName];}// This method allows to process this.plugins so that it could\n// do some unified pre-process before application starts.\nprocessRawPlugins(callback){callback(this.plugins);this.cache={};}invoke(extPoint,allowMultiple=true,...args){let extensionPointName=extPoint;if(!extensionPointName){throw new Error(PLUGIN_EXT_POINT_MISSING_ERROR);}const noCall=extensionPointName.startsWith('!');const throws=this.config.throws??extensionPointName.endsWith('!');// eslint-disable-next-line unicorn/better-regex\nextensionPointName=extensionPointName.replace(/(^!|!$)/g,'');if(!extensionPointName){throw new Error(PLUGIN_EXT_POINT_INVALID_ERROR);}const extensionPointNameParts=extensionPointName.split('.');extensionPointNameParts.pop();const pluginMethodPath=extensionPointNameParts.join('.');const pluginsToInvoke=allowMultiple?this.getPlugins(extensionPointName):[this.getPlugins(extensionPointName)[0]];return pluginsToInvoke.map(plugin=>{const method=getValueByPath(plugin,extensionPointName);if(!isFunction(method)||noCall){return method;}try{return method.apply(getValueByPath(plugin,pluginMethodPath),args);}catch(err){// When a plugin failed, doesn't break the app\nif(throws){throw err;}else {this.logger?.error(PLUGIN_INVOCATION_ERROR(PLUGIN_ENGINE,extensionPointName,plugin.name),err);}}return null;});}invokeSingle(extPoint,...args){return this.invoke(extPoint,false,...args)[0];}invokeMultiple(extPoint,...args){return this.invoke(extPoint,true,...args);}}const defaultPluginEngine=new PluginEngine({throws:true},defaultLogger);\n\nconst FAILED_REQUEST_ERR_MSG_PREFIX='The request failed';const ERROR_MESSAGES_TO_BE_FILTERED=[FAILED_REQUEST_ERR_MSG_PREFIX];\n\nconst LOAD_ORIGIN='RS_JS_SDK';\n\n/**\n * Utility method to normalise errors\n */const processError=error=>{let errorMessage;try{if(isString(error)){errorMessage=error;}else if(error instanceof Error){errorMessage=error.message;}else if(error instanceof ErrorEvent){errorMessage=error.message;}// TODO: remove this block once all device mode integrations start using the v3 script loader module (TS)\nelse if(error instanceof Event){const eventTarget=error.target;// Discard all the non-script loading errors\nif(eventTarget&&eventTarget.localName!=='script'){return '';}// Discard script errors that are not originated at SDK or from native SDKs\nif(eventTarget?.dataset&&(eventTarget.dataset.loader!==LOAD_ORIGIN||eventTarget.dataset.isnonnativesdk!=='true')){return '';}errorMessage=`Error in loading a third-party script from URL ${eventTarget?.src} with ID ${eventTarget?.id}.`;}else {errorMessage=error.message?error.message:stringifyWithoutCircular(error);}}catch(e){errorMessage=`Unknown error: ${e.message}`;}return errorMessage;};/**\n * A function to determine whether the error should be promoted to notify or not\n * @param {Error} error\n * @returns\n */const isAllowedToBeNotified=error=>{if(error.message){return !ERROR_MESSAGES_TO_BE_FILTERED.some(e=>error.message.includes(e));}return true;};\n\n/**\n * A service to handle errors\n */class ErrorHandler{// If no logger is passed errors will be thrown as unhandled error\nconstructor(logger,pluginEngine){this.logger=logger;this.pluginEngine=pluginEngine;this.errorBuffer=new BufferQueue();this.attachEffect();}attachEffect(){if(state.reporting.isErrorReportingPluginLoaded.value===true){while(this.errorBuffer.size()>0){this.errorBuffer.dequeue();}}}attachErrorListeners(){if('addEventListener'in globalThis){globalThis.addEventListener('error',event=>{this.onError(event,undefined,undefined,undefined,'unhandledException');});globalThis.addEventListener('unhandledrejection',event=>{this.onError(event,undefined,undefined,undefined,'unhandledPromiseRejection');});}else {this.logger?.debug(`Failed to attach global error listeners.`);}}init(externalSrcLoader){if(!this.pluginEngine){return;}try{const extPoint='errorReporting.init';const errReportingInitVal=this.pluginEngine.invokeSingle(extPoint,state,this.pluginEngine,externalSrcLoader,this.logger);if(errReportingInitVal instanceof Promise){errReportingInitVal.then(client=>{this.errReportingClient=client;}).catch(err=>{this.logger?.error(REPORTING_PLUGIN_INIT_FAILURE_ERROR(ERROR_HANDLER),err);});}}catch(err){this.onError(err,ERROR_HANDLER);}}onError(error,context='',customMessage='',shouldAlwaysThrow=false,errorType='handled'){// Error handling is already implemented in processError method\nlet errorMessage=processError(error);// If no error message after we normalize, then we swallow/ignore the errors\nif(!errorMessage){return;}// eslint-disable-next-line @typescript-eslint/no-unused-vars\nerrorMessage=removeDoubleSpaces(`${context}${LOG_CONTEXT_SEPARATOR}${customMessage} ${errorMessage}`);let normalizedError=new Error(errorMessage);if(isTypeOfError(error)){normalizedError=Object.create(error,{message:{value:errorMessage}});}if(errorType==='handled'){// TODO: Remove the below line once the new Reporting plugin is ready\nthis.notifyError(normalizedError);if(this.logger){this.logger.error(errorMessage);if(shouldAlwaysThrow){throw normalizedError;}}else {throw normalizedError;}}// eslint-disable-next-line sonarjs/no-all-duplicated-branches\nif(state.reporting.isErrorReportingEnabled.value&&!state.reporting.isErrorReportingPluginLoaded.value);}/**\n   * Add breadcrumbs to add insight of a user's journey before an error\n   * occurred and send to external error monitoring service via a plugin\n   *\n   * @param {string} breadcrumb breadcrumbs message\n   */leaveBreadcrumb(breadcrumb){if(this.pluginEngine){try{this.pluginEngine.invokeSingle('errorReporting.breadcrumb',this.pluginEngine,this.errReportingClient,breadcrumb,this.logger);}catch(err){this.onError(err,ERROR_HANDLER,'errorReporting.breadcrumb');}}}/**\n   * Send handled errors to external error monitoring service via a plugin\n   *\n   * @param {Error} error Error instance from handled error\n   */notifyError(error){if(this.errReportingClient&&isAllowedToBeNotified(error)){try{this.pluginEngine?.invokeSingle('errorReporting.notify',this.pluginEngine,this.errReportingClient,error,state,this.logger);}catch(err){// Not calling onError here as we don't want to go into infinite loop\nthis.logger?.error(NOTIFY_FAILURE_ERROR(ERROR_HANDLER),err);}}}}const defaultErrorHandler=new ErrorHandler(defaultLogger,defaultPluginEngine);\n\n/**\n * A function to filter and return non cloud mode destinations\n * @param destination\n *\n * @returns boolean\n */const isNonCloudDestination=destination=>Boolean(destination.config.connectionMode!=='cloud'||destination.config.useNativeSDKToSend===true||// this is the older flag for hybrid mode destinations\ndestination.config.useNativeSDK===true);const isHybridModeDestination=destination=>Boolean(destination.config.connectionMode==='hybrid'||destination.config.useNativeSDKToSend===true);/**\n * A function to filter and return non cloud mode destinations\n * @param destinations\n *\n * @returns destinations\n */const getNonCloudDestinations=destinations=>destinations.filter(isNonCloudDestination);\n\n/**\n * List of plugin names that are loaded as dynamic imports in modern builds\n */const pluginNamesList=['BeaconQueue','Bugsnag','CustomConsentManager','DeviceModeDestinations','DeviceModeTransformation','ErrorReporting','ExternalAnonymousId','GoogleLinker','KetchConsentManager','NativeDestinationQueue','OneTrustConsentManager','StorageEncryption','StorageEncryptionLegacy','StorageMigrator','XhrQueue'];\n\nconst remotesMap = {\n'rudderAnalyticsRemotePlugins':{url:()=>Promise.resolve(window.RudderStackGlobals && window.RudderStackGlobals.app && window.RudderStackGlobals.app.pluginsCDNPath ? \"\" + window.RudderStackGlobals.app.pluginsCDNPath + \"/rsa-plugins.js\" : \"https://cdn.rudderlabs.com/v3/modern/plugins/rsa-plugins.js\"),format:'esm',from:'vite'}\n};\n                const loadJS = async (url, fn) => {\n                    const resolvedUrl = typeof url === 'function' ? await url() : url;\n                    const script = document.createElement('script');\n                    script.type = 'text/javascript';\n                    script.onload = fn;\n                    script.src = resolvedUrl;\n                    document.getElementsByTagName('head')[0].appendChild(script);\n                };\n                \n                function merge(obj1, obj2) {\n                  const mergedObj = Object.assign(obj1, obj2);\n                  for (const key of Object.keys(mergedObj)) {\n                    if (typeof mergedObj[key] === 'object' && typeof obj2[key] === 'object') {\n                      mergedObj[key] = merge(mergedObj[key], obj2[key]);\n                    }\n                  }\n                  return mergedObj;\n                }\n\n                const wrapShareModule = remoteFrom => {\n                  return merge({\n                    \n                  }, (globalThis.__federation_shared__ || {})['default'] || {});\n                };\n\n                async function __federation_method_ensure(remoteId) {\n                    const remote = remotesMap[remoteId];\n                    if (!remote.inited) {\n                        if ('var' === remote.format) {\n                            // loading js with script tag\n                            return new Promise(resolve => {\n                                const callback = () => {\n                                    if (!remote.inited) {\n                                        remote.lib = window[remoteId];\n                                        remote.lib.init(wrapShareModule(remote.from));\n                                        remote.inited = true;\n                                    }\n                                    resolve(remote.lib);\n                                };\n                                return loadJS(remote.url, callback);\n                            });\n                        } else if (['esm', 'systemjs'].includes(remote.format)) {\n                            // loading js with import(...)\n                            return new Promise((resolve, reject) => {\n                                const getUrl = typeof remote.url === 'function' ? remote.url : () => Promise.resolve(remote.url);\n                                getUrl().then(url => {\n                                    import(/* webpackIgnore: true */ /* @vite-ignore */ url).then(lib => {\n                                        if (!remote.inited) {\n                                            const shareScope = wrapShareModule(remote.from);\n                                            lib.init(shareScope);\n                                            remote.lib = lib;\n                                            remote.lib.init(shareScope);\n                                            remote.inited = true;\n                                        }\n                                        resolve(remote.lib);\n                                    }).catch(reject);\n                                });\n                            })\n                        }\n                    } else {\n                        return remote.lib;\n                    }\n                }\n\n                function __federation_method_wrapDefault(module, need) {\n                    if (!module?.default && need) {\n                        let obj = Object.create(null);\n                        obj.default = module;\n                        obj.__esModule = true;\n                        return obj;\n                    }\n                    return module;\n                }\n\n                function __federation_method_getRemote(remoteName, componentName) {\n                    return __federation_method_ensure(remoteName).then((remote) => remote.get(componentName).then(factory => factory()));\n                }\n\n/**\n * Get the lazy loaded dynamic import for a plugin name\n */const getFederatedModuleImport=pluginName=>{switch(pluginName){case'BeaconQueue':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./BeaconQueue\").then(module=>__federation_method_wrapDefault(module, true));case'Bugsnag':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./Bugsnag\").then(module=>__federation_method_wrapDefault(module, true));case'CustomConsentManager':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./CustomConsentManager\").then(module=>__federation_method_wrapDefault(module, true));case'DeviceModeDestinations':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./DeviceModeDestinations\").then(module=>__federation_method_wrapDefault(module, true));case'DeviceModeTransformation':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./DeviceModeTransformation\").then(module=>__federation_method_wrapDefault(module, true));case'ErrorReporting':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./ErrorReporting\").then(module=>__federation_method_wrapDefault(module, true));case'ExternalAnonymousId':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./ExternalAnonymousId\").then(module=>__federation_method_wrapDefault(module, true));case'GoogleLinker':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./GoogleLinker\").then(module=>__federation_method_wrapDefault(module, true));case'KetchConsentManager':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./KetchConsentManager\").then(module=>__federation_method_wrapDefault(module, true));case'NativeDestinationQueue':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./NativeDestinationQueue\").then(module=>__federation_method_wrapDefault(module, true));case'OneTrustConsentManager':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./OneTrustConsentManager\").then(module=>__federation_method_wrapDefault(module, true));case'StorageEncryption':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./StorageEncryption\").then(module=>__federation_method_wrapDefault(module, true));case'StorageEncryptionLegacy':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./StorageEncryptionLegacy\").then(module=>__federation_method_wrapDefault(module, true));case'StorageMigrator':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./StorageMigrator\").then(module=>__federation_method_wrapDefault(module, true));case'XhrQueue':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./XhrQueue\").then(module=>__federation_method_wrapDefault(module, true));default:return undefined;}};/**\n * Map of active plugin names to their dynamic import\n */const federatedModulesBuildPluginImports=activePluginNames=>{const remotePlugins={};activePluginNames.forEach(pluginName=>{if(pluginNamesList.includes(pluginName)){const lazyLoadImport=getFederatedModuleImport(pluginName);if(lazyLoadImport){remotePlugins[pluginName]=lazyLoadImport;}}});return remotePlugins;};\n\n/**\n * Map of mandatory plugin names and direct imports\n */const getMandatoryPluginsMap=()=>({});/**\n * Map of optional plugin names and direct imports for legacy builds\n */const getOptionalPluginsMap=()=>{{return {};}};/**\n * Map of optional plugin names and dynamic imports for modern builds\n */const getRemotePluginsMap=activePluginNames=>{return federatedModulesBuildPluginImports?.(activePluginNames)||{};};const pluginsInventory={...getMandatoryPluginsMap(),...getOptionalPluginsMap()};const remotePluginsInventory=activePluginNames=>({...getRemotePluginsMap(activePluginNames)});\n\n// TODO: add retry mechanism for getting remote plugins\n// TODO: add timeout error mechanism for marking remote plugins that failed to load as failed in state\nclass PluginsManager{constructor(engine,errorHandler,logger){this.engine=engine;this.errorHandler=errorHandler;this.logger=logger;this.onError=this.onError.bind(this);}/**\n   * Orchestrate the plugin loading and registering\n   */init(){state.lifecycle.status.value='pluginsLoading';// Expose pluginsCDNPath to global object, so it can be used in the promise that determines\n// remote plugin cdn path to support proxied plugin remotes\n{setExposedGlobal('pluginsCDNPath',state.lifecycle.pluginsCDNPath.value);}this.setActivePlugins();this.registerLocalPlugins();this.registerRemotePlugins();this.attachEffects();}/**\n   * Update state based on plugin loaded status\n   */ // eslint-disable-next-line class-methods-use-this\nattachEffects(){E(()=>{const isAllPluginsReady=state.plugins.activePlugins.value.length===0||state.plugins.loadedPlugins.value.length+state.plugins.failedPlugins.value.length===state.plugins.totalPluginsToLoad.value;if(isAllPluginsReady){r(()=>{state.plugins.ready.value=true;// TODO: decide what to do if a plugin fails to load for any reason.\n//  Should we stop here or should we progress?\nstate.lifecycle.status.value='pluginsReady';});}});}/**\n   * Determine the list of plugins that should be loaded based on sourceConfig & load options\n   */ // eslint-disable-next-line class-methods-use-this\ngetPluginsToLoadBasedOnConfig(){// This contains the default plugins if load option has been omitted by user\nlet pluginsToLoadFromConfig=state.plugins.pluginsToLoadFromConfig.value;if(!pluginsToLoadFromConfig){return [];}const pluginGroupsToProcess=[{configurationStatus:()=>isDefined(state.dataPlaneEvents.eventsQueuePluginName.value),configurationStatusStr:'Data plane events delivery is enabled',activePluginName:state.dataPlaneEvents.eventsQueuePluginName.value,supportedPlugins:Object.values(DataPlaneEventsTransportToPluginNameMap),shouldAddMissingPlugins:true},{configurationStatus:()=>isDefined(state.reporting.errorReportingProviderPluginName.value),configurationStatusStr:'Error reporting is enabled',activePluginName:state.reporting.errorReportingProviderPluginName.value,basePlugins:['ErrorReporting'],supportedPlugins:Object.values(ErrorReportingProvidersToPluginNameMap)},{configurationStatus:()=>getNonCloudDestinations(state.nativeDestinations.configuredDestinations.value).length>0,configurationStatusStr:'Device mode destinations are connected to the source',supportedPlugins:['DeviceModeDestinations','NativeDestinationQueue']},{configurationStatus:()=>getNonCloudDestinations(state.nativeDestinations.configuredDestinations.value).some(destination=>destination.shouldApplyDeviceModeTransformation),configurationStatusStr:'Device mode transformations are enabled for at least one destination',supportedPlugins:['DeviceModeTransformation']},{configurationStatus:()=>isDefined(state.consents.activeConsentManagerPluginName.value),configurationStatusStr:'Consent management is enabled',activePluginName:state.consents.activeConsentManagerPluginName.value,supportedPlugins:Object.values(ConsentManagersToPluginNameMap)},{configurationStatus:()=>isDefined(state.storage.encryptionPluginName.value),configurationStatusStr:'Storage encryption is enabled',activePluginName:state.storage.encryptionPluginName.value,supportedPlugins:Object.values(StorageEncryptionVersionsToPluginNameMap)},{configurationStatus:()=>state.storage.migrate.value,configurationStatusStr:'Storage migration is enabled',supportedPlugins:['StorageMigrator']}];const addMissingPlugins=false;pluginGroupsToProcess.forEach(group=>{if(group.configurationStatus()){pluginsToLoadFromConfig=pluginsToLoadFromConfig.filter(group.activePluginName?pluginName=>!(pluginName!==group.activePluginName&&group.supportedPlugins.includes(pluginName)):pluginName=>isDefined(pluginName)// pass through\n);this.addMissingPlugins(group,addMissingPlugins,pluginsToLoadFromConfig);}else {pluginsToLoadFromConfig=pluginsToLoadFromConfig.filter(group.basePlugins!==undefined?pluginName=>!(group.basePlugins.includes(pluginName)||group.supportedPlugins.includes(pluginName)):pluginName=>!group.supportedPlugins.includes(pluginName));}});return [...Object.keys(getMandatoryPluginsMap()),...pluginsToLoadFromConfig];}addMissingPlugins(group,addMissingPlugins,pluginsToLoadFromConfig){const shouldAddMissingPlugins=group.shouldAddMissingPlugins||addMissingPlugins;let pluginsToConfigure;if(group.activePluginName){pluginsToConfigure=[...(group.basePlugins||[]),group.activePluginName];}else {pluginsToConfigure=[...group.supportedPlugins];}const missingPlugins=pluginsToConfigure.filter(pluginName=>!pluginsToLoadFromConfig.includes(pluginName));if(missingPlugins.length>0){if(shouldAddMissingPlugins){pluginsToLoadFromConfig.push(...missingPlugins);}this.logger?.warn(generateMisconfiguredPluginsWarning(PLUGINS_MANAGER,group.configurationStatusStr,missingPlugins,shouldAddMissingPlugins));}}/**\n   * Determine the list of plugins that should be activated\n   */setActivePlugins(){const pluginsToLoad=this.getPluginsToLoadBasedOnConfig();// Merging available mandatory and optional plugin name list\nconst availablePlugins=[...Object.keys(pluginsInventory),...pluginNamesList];const activePlugins=[];const failedPlugins=[];pluginsToLoad.forEach(pluginName=>{if(availablePlugins.includes(pluginName)){activePlugins.push(pluginName);}else {failedPlugins.push(pluginName);}});if(failedPlugins.length>0){this.onError(new Error(`Ignoring loading of unknown plugins: ${failedPlugins.join(',')}. Mandatory plugins: ${Object.keys(getMandatoryPluginsMap()).join(',')}. Load option plugins: ${state.plugins.pluginsToLoadFromConfig.value.join(',')}`));}r(()=>{state.plugins.totalPluginsToLoad.value=pluginsToLoad.length;state.plugins.activePlugins.value=activePlugins;state.plugins.failedPlugins.value=failedPlugins;});}/**\n   * Register plugins that are direct imports to PluginEngine\n   */registerLocalPlugins(){Object.values(pluginsInventory).forEach(localPlugin=>{if(isFunction(localPlugin)&&state.plugins.activePlugins.value.includes(localPlugin().name)){this.register([localPlugin()]);}});}/**\n   * Register plugins that are dynamic imports to PluginEngine\n   */registerRemotePlugins(){const remotePluginsList=remotePluginsInventory(state.plugins.activePlugins.value);Promise.all(Object.keys(remotePluginsList).map(async remotePluginKey=>{await remotePluginsList[remotePluginKey]().then(remotePluginModule=>this.register([remotePluginModule.default()])).catch(err=>{// TODO: add retry here if dynamic import fails\nstate.plugins.failedPlugins.value=[...state.plugins.failedPlugins.value,remotePluginKey];this.onError(err,remotePluginKey);});})).catch(err=>{this.onError(err);});}/**\n   * Extension point invoke that allows multiple plugins to be registered to it with error handling\n   */invokeMultiple(extPoint,...args){try{return this.engine.invokeMultiple(extPoint,...args);}catch(e){this.onError(e,extPoint);return [];}}/**\n   * Extension point invoke that allows a single plugin to be registered to it with error handling\n   */invokeSingle(extPoint,...args){try{return this.engine.invokeSingle(extPoint,...args);}catch(e){this.onError(e,extPoint);return null;}}/**\n   * Plugin engine register with error handling\n   */register(plugins){plugins.forEach(plugin=>{try{this.engine.register(plugin,state);}catch(e){state.plugins.failedPlugins.value=[...state.plugins.failedPlugins.value,plugin.name];this.onError(e);}});}// TODO: Implement reset API instead\nunregisterLocalPlugins(){Object.values(pluginsInventory).forEach(localPlugin=>{try{this.engine.unregister(localPlugin().name);}catch(e){this.onError(e);}});}/**\n   * Handle errors\n   */onError(error,customMessage){if(this.errorHandler){this.errorHandler.onError(error,PLUGINS_MANAGER,customMessage);}else {throw error;}}}\n\n/**\n * Utility to parse XHR JSON response\n */const responseTextToJson=(responseText,onError)=>{try{return JSON.parse(responseText||'');}catch(err){const error=getMutatedError(err,'Failed to parse response data');if(isFunction(onError)){onError(error);}else {throw error;}}return undefined;};\n\nconst DEFAULT_XHR_REQUEST_OPTIONS={headers:{Accept:'application/json','Content-Type':'application/json;charset=UTF-8'},method:'GET'};/**\n * Utility to create request configuration based on default options\n */const createXhrRequestOptions=(url,options,basicAuthHeader)=>{const requestOptions=mergeDeepRight(DEFAULT_XHR_REQUEST_OPTIONS,options||{});if(basicAuthHeader){requestOptions.headers=mergeDeepRight(requestOptions.headers,{Authorization:basicAuthHeader});}requestOptions.url=url;return requestOptions;};/**\n * Utility implementation of XHR, fetch cannot be used as it requires explicit\n * origin allowed values and not wildcard for CORS requests with credentials and\n * this is not supported by our sourceConfig API\n */const xhrRequest=(options,timeout=DEFAULT_XHR_TIMEOUT_MS,logger)=>new Promise((resolve,reject)=>{let payload;if(options.sendRawData===true){payload=options.data;}else {payload=stringifyWithoutCircular(options.data,false,[],logger);if(isNull(payload)){reject({error:new Error(XHR_PAYLOAD_PREP_ERROR),undefined,options});// return and don't process further if the payload could not be stringified\nreturn;}}const xhr=new XMLHttpRequest();// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst xhrReject=e=>{reject({error:new Error(XHR_DELIVERY_ERROR(FAILED_REQUEST_ERR_MSG_PREFIX,xhr.status,xhr.statusText,options.url)),xhr,options});};const xhrError=e=>{reject({error:new Error(XHR_REQUEST_ERROR(FAILED_REQUEST_ERR_MSG_PREFIX,e,options.url)),xhr,options});};xhr.ontimeout=xhrError;xhr.onerror=xhrError;xhr.onload=()=>{if(xhr.status>=200&&xhr.status<400){resolve({response:xhr.responseText,xhr,options});}else {xhrReject();}};xhr.open(options.method,options.url);if(options.withCredentials===true){xhr.withCredentials=true;}// The timeout property may be set only in the time interval between a call to the open method\n// and the first call to the send method in legacy browsers\nxhr.timeout=timeout;Object.keys(options.headers).forEach(headerName=>{if(options.headers[headerName]){xhr.setRequestHeader(headerName,options.headers[headerName]);}});try{xhr.send(payload);}catch(err){reject({error:getMutatedError(err,XHR_SEND_ERROR(FAILED_REQUEST_ERR_MSG_PREFIX,options.url)),xhr,options});}});\n\n/**\n * Service to handle data communication with APIs\n */class HttpClient{hasErrorHandler=false;constructor(errorHandler,logger){this.errorHandler=errorHandler;this.logger=logger;this.hasErrorHandler=Boolean(this.errorHandler);this.onError=this.onError.bind(this);}/**\n   * Implement requests in a blocking way\n   */async getData(config){const{url,options,timeout,isRawResponse}=config;try{const data=await xhrRequest(createXhrRequestOptions(url,options,this.basicAuthHeader),timeout,this.logger);return {data:isRawResponse?data.response:responseTextToJson(data.response,this.onError),details:data};}catch(reason){this.onError(reason.error??reason);return {data:undefined,details:reason};}}/**\n   * Implement requests in a non-blocking way\n   */getAsyncData(config){const{callback,url,options,timeout,isRawResponse}=config;const isFireAndForget=!isFunction(callback);xhrRequest(createXhrRequestOptions(url,options,this.basicAuthHeader),timeout,this.logger).then(data=>{if(!isFireAndForget){callback(isRawResponse?data.response:responseTextToJson(data.response,this.onError),data);}}).catch(data=>{this.onError(data.error??data);if(!isFireAndForget){callback(undefined,data);}});}/**\n   * Handle errors\n   */onError(error){if(this.hasErrorHandler){this.errorHandler?.onError(error,HTTP_CLIENT);}else {throw error;}}/**\n   * Set basic authentication header (eg writekey)\n   */setAuthHeader(value,noBtoa=false){const authVal=noBtoa?value:toBase64(`${value}:`);this.basicAuthHeader=`Basic ${authVal}`;}/**\n   * Clear basic authentication header\n   */resetAuthHeader(){this.basicAuthHeader=undefined;}}const defaultHttpClient=new HttpClient(defaultErrorHandler,defaultLogger);\n\nconst COOKIE_STORAGE='cookieStorage';const LOCAL_STORAGE='localStorage';const SESSION_STORAGE='sessionStorage';const MEMORY_STORAGE='memoryStorage';const NO_STORAGE='none';\n\nconst userIdKey='rl_user_id';const userTraitsKey='rl_trait';const anonymousUserIdKey='rl_anonymous_id';const groupIdKey='rl_group_id';const groupTraitsKey='rl_group_trait';const pageInitialReferrerKey='rl_page_init_referrer';const pageInitialReferringDomainKey='rl_page_init_referring_domain';const sessionInfoKey='rl_session';const authTokenKey='rl_auth_token';const COOKIE_KEYS={userId:userIdKey,userTraits:userTraitsKey,anonymousId:anonymousUserIdKey,groupId:groupIdKey,groupTraits:groupTraitsKey,initialReferrer:pageInitialReferrerKey,initialReferringDomain:pageInitialReferringDomainKey,sessionInfo:sessionInfoKey,authToken:authTokenKey};\n\nconst STORAGE_TEST_COOKIE='test_rudder_cookie';const STORAGE_TEST_LOCAL_STORAGE='test_rudder_ls';const STORAGE_TEST_SESSION_STORAGE='test_rudder_ss';const STORAGE_TEST_TOP_LEVEL_DOMAIN='__tld__';const CLIENT_DATA_STORE_COOKIE='clientDataInCookie';const CLIENT_DATA_STORE_LS='clientDataInLocalStorage';const CLIENT_DATA_STORE_MEMORY='clientDataInMemory';const CLIENT_DATA_STORE_SESSION='clientDataInSessionStorage';const USER_SESSION_KEYS=['userId','userTraits','anonymousId','groupId','groupTraits','initialReferrer','initialReferringDomain','sessionInfo','authToken'];\n\nconst storageClientDataStoreNameMap={[COOKIE_STORAGE]:CLIENT_DATA_STORE_COOKIE,[LOCAL_STORAGE]:CLIENT_DATA_STORE_LS,[MEMORY_STORAGE]:CLIENT_DATA_STORE_MEMORY,[SESSION_STORAGE]:CLIENT_DATA_STORE_SESSION};\n\nconst COOKIE_DATA_ENCODING_ERROR=`Failed to encode the cookie data.`;\n\n/**\n * Encode.\n */const encode=(value,logger)=>{try{return encodeURIComponent(value);}catch(err){logger?.error(COOKIE_DATA_ENCODING_ERROR,err);return undefined;}};/**\n * Decode\n */const decode=value=>{try{return decodeURIComponent(value);}catch(err){// Do nothing as non-RS SDK cookies may not be URI encoded\nreturn undefined;}};/**\n * Parse cookie `str`\n */const parse=str=>{const obj={};const pairs=str.split(/\\s*;\\s*/);let pair;if(!pairs[0]){return obj;}// TODO: Decode only the cookies that are needed by the SDK\npairs.forEach(pairItem=>{pair=pairItem.split('=');const keyName=pair[0]?decode(pair[0]):undefined;if(keyName){obj[keyName]=pair[1]?decode(pair[1]):undefined;}});return obj;};/**\n * Set cookie `name` to `value`\n */const set=(name,value,optionsConfig,logger)=>{const options={...(optionsConfig||{})};let cookieString=`${encode(name,logger)}=${encode(value,logger)}`;if(isNull(value)){options.maxage=-1;}if(options.maxage){options.expires=new Date(+new Date()+options.maxage);}if(options.path){cookieString+=`; path=${options.path}`;}if(options.domain){cookieString+=`; domain=${options.domain}`;}if(options.expires){cookieString+=`; expires=${options.expires.toUTCString()}`;}if(options.samesite){cookieString+=`; samesite=${options.samesite}`;}if(options.secure){cookieString+=`; secure`;}globalThis.document.cookie=cookieString;};/**\n * Return all cookies\n */const all=()=>{const cookieStringValue=globalThis.document.cookie;return parse(cookieStringValue);};/**\n * Get cookie `name`\n */const get=name=>all()[name];/**\n * Set or get cookie `name` with `value` and `options` object\n */ // eslint-disable-next-line func-names\nconst cookie=function(name,value,options,logger){switch(arguments.length){case 4:case 3:case 2:return set(name,value,options,logger);case 1:if(name){return get(name);}return all();default:return all();}};\n\nconst detectAdBlockers=(errorHandler,logger)=>{// Apparently, '?view=ad' is a query param that is blocked by majority of adblockers\n// Use source config URL here as it is very unlikely to be blocked by adblockers\n// Only the extra query param should make it vulnerable to adblockers\n// This will work even if the users proxies it.\n// The edge case where this doesn't work is when HEAD method is not allowed by the server (user's)\nconst baseUrl=new URL(state.lifecycle.sourceConfigUrl.value);const url=`${baseUrl.origin}${baseUrl.pathname}?view=ad`;const httpClient=new HttpClient(errorHandler,logger);httpClient.setAuthHeader(state.lifecycle.writeKey.value);httpClient.getAsyncData({url,options:{// We actually don't need the response from the request, so we are using HEAD\nmethod:'HEAD',headers:{'Content-Type':undefined}},isRawResponse:true,callback:(result,details)=>{// not ad blocked if the request is successful or it is not internally redirected on the client side\n// Often adblockers instead of blocking the request, they redirect it to an internal URL\nstate.capabilities.isAdBlocked.value=details?.error!==undefined||details?.xhr?.responseURL!==url;}});};\n\nconst hasCrypto$1=()=>!isNullOrUndefined(globalThis.crypto)&&isFunction(globalThis.crypto.getRandomValues);// eslint-disable-next-line compat/compat -- We are checking for the existence of navigator.userAgentData\nconst hasUAClientHints=()=>!isNullOrUndefined(globalThis.navigator.userAgentData);const hasBeacon=()=>!isNullOrUndefined(globalThis.navigator.sendBeacon)&&isFunction(globalThis.navigator.sendBeacon);const isIE11=()=>Boolean(globalThis.navigator.userAgent.match(/Trident.*rv:11\\./));\n\nconst getUserAgentClientHint=(callback,level='none')=>{if(level==='none'){callback(undefined);}if(level==='default'){callback(navigator.userAgentData);}if(level==='full'){navigator.userAgentData?.getHighEntropyValues(['architecture','bitness','brands','mobile','model','platform','platformVersion','uaFullVersion','fullVersionList','wow64']).then(ua=>{callback(ua);}).catch(()=>{callback();});}};\n\nconst isDatasetAvailable=()=>{const testElement=globalThis.document.createElement('div');testElement.setAttribute('data-a-b','c');return testElement.dataset?testElement.dataset.aB==='c':false;};const legacyJSEngineRequiredPolyfills={// Ideally, we should separate the checks for URL and URLSearchParams but\n// the polyfill service serves them under the same feature name, \"URL\".\nURL:()=>!isFunction(globalThis.URL)||!isFunction(globalThis.URLSearchParams),Promise:()=>!isFunction(globalThis.Promise),'Number.isNaN':()=>!isFunction(globalThis.Number.isNaN),'Number.isInteger':()=>!isFunction(globalThis.Number.isInteger),'Array.from':()=>!isFunction(globalThis.Array.from),'Array.prototype.find':()=>!isFunction(globalThis.Array.prototype.find),'Array.prototype.includes':()=>!isFunction(globalThis.Array.prototype.includes),'String.prototype.endsWith':()=>!isFunction(globalThis.String.prototype.endsWith),'String.prototype.startsWith':()=>!isFunction(globalThis.String.prototype.startsWith),'String.prototype.includes':()=>!isFunction(globalThis.String.prototype.includes),'String.prototype.replaceAll':()=>!isFunction(globalThis.String.prototype.replaceAll),'String.fromCodePoint':()=>!isFunction(globalThis.String.fromCodePoint),'Object.entries':()=>!isFunction(globalThis.Object.entries),'Object.values':()=>!isFunction(globalThis.Object.values),'Object.assign':()=>!isFunction(globalThis.Object.assign),'Object.fromEntries':()=>!isFunction(globalThis.Object.fromEntries),'Element.prototype.dataset':()=>!isDatasetAvailable(),// Ideally, we should separate the checks for TextEncoder and TextDecoder but\n// the polyfill service serves them under the same feature name, \"TextEncoder\".\nTextEncoder:()=>!isFunction(globalThis.TextEncoder)||!isFunction(globalThis.TextDecoder),requestAnimationFrame:()=>!isFunction(globalThis.requestAnimationFrame)||!isFunction(globalThis.cancelAnimationFrame),CustomEvent:()=>!isFunction(globalThis.CustomEvent),'navigator.sendBeacon':()=>!isFunction(globalThis.navigator.sendBeacon),// Note, the polyfill service serves both ArrayBuffer and Uint8Array under the same feature name, \"ArrayBuffer\".\nArrayBuffer:()=>!isFunction(globalThis.Uint8Array),Set:()=>!isFunction(globalThis.Set),atob:()=>!isFunction(globalThis.atob)};const isLegacyJSEngine=()=>{const requiredCapabilitiesList=Object.keys(legacyJSEngineRequiredPolyfills);let needsPolyfill=false;/* eslint-disable-next-line unicorn/no-for-loop */for(let i=0;i<requiredCapabilitiesList.length;i++){const isCapabilityMissing=legacyJSEngineRequiredPolyfills[requiredCapabilitiesList[i]];if(isFunction(isCapabilityMissing)&&isCapabilityMissing()){needsPolyfill=true;break;}}return needsPolyfill;};\n\nconst getScreenDetails=()=>{let screenDetails={density:0,width:0,height:0,innerWidth:0,innerHeight:0};screenDetails={width:globalThis.screen.width,height:globalThis.screen.height,density:globalThis.devicePixelRatio,innerWidth:globalThis.innerWidth,innerHeight:globalThis.innerHeight};return screenDetails;};\n\nconst isStorageQuotaExceeded=e=>{const matchingNames=['QuotaExceededError','NS_ERROR_DOM_QUOTA_REACHED'];// [everything except Firefox, Firefox]\nconst matchingCodes=[22,1014];// [everything except Firefox, Firefox]\nconst isQuotaExceededError=matchingNames.includes(e.name)||matchingCodes.includes(e.code);return e instanceof DOMException&&isQuotaExceededError;};// TODO: also check for SecurityErrors\n//  https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage#exceptions\nconst isStorageAvailable=(type=LOCAL_STORAGE,storageInstance,logger)=>{let storage;let testData;try{switch(type){case MEMORY_STORAGE:return true;case COOKIE_STORAGE:storage=storageInstance;testData=STORAGE_TEST_COOKIE;break;case LOCAL_STORAGE:storage=storageInstance??globalThis.localStorage;testData=STORAGE_TEST_LOCAL_STORAGE;// was STORAGE_TEST_LOCAL_STORAGE in ours and generateUUID() in segment retry one\nbreak;case SESSION_STORAGE:storage=storageInstance??globalThis.sessionStorage;testData=STORAGE_TEST_SESSION_STORAGE;break;default:return false;}if(!storage){return false;}storage.setItem(testData,'true');if(storage.getItem(testData)){storage.removeItem(testData);return true;}return false;}catch(err){const msgPrefix=STORAGE_UNAVAILABILITY_ERROR_PREFIX(CAPABILITIES_MANAGER,type);let reason='unavailable';if(isStorageQuotaExceeded(err)){reason='full';}logger?.warn(`${msgPrefix}${reason}.`,err);return false;}};\n\nconst legacyGetHostname=href=>{const l=document.createElement('a');l.href=href;return l.hostname;};/**\n * Levels returns all levels of the given url\n *\n * The method returns an empty array when the hostname is an ip.\n */const levelsFunc=url=>{// This is called before the polyfills load thus new URL cannot be used\nconst host=typeof globalThis.URL!=='function'?legacyGetHostname(url):new URL(url).hostname;const parts=host?.split('.')??[];const last=parts[parts.length-1];const levels=[];// Ip address.\nif(parts.length===4&&last&&last===parseInt(last,10).toString()){return levels;}// Localhost.\nif(parts.length<=1){// Fix to support localhost\nif(parts[0]&&parts[0].indexOf('localhost')!==-1){return ['localhost'];}return levels;}// Create levels.\nfor(let i=parts.length-2;i>=0;i-=1){levels.push(parts.slice(i).join('.'));}return levels;};/**\n * Get the top domain.\n *\n * The function constructs the levels of domain and attempts to set a global\n * cookie on each one when it succeeds it returns the top level domain.\n *\n * The method returns an empty string when the hostname is an ip.\n */const domain=url=>{const levels=levelsFunc(url);// Lookup the real top level one.\n// eslint-disable-next-line unicorn/no-for-loop\nfor(let i=0;i<levels.length;i+=1){const domain=levels[i];const cname=STORAGE_TEST_TOP_LEVEL_DOMAIN;const opts={domain:`${domain.indexOf('localhost')!==-1?'':'.'}${domain}`};// Set cookie on domain\ncookie(cname,1,opts);// If successful\nif(cookie(cname)){// Remove cookie from domain\ncookie(cname,null,opts);return domain;}}return '';};\n\nconst getDefaultCookieOptions=()=>{const topDomain=`.${domain(globalThis.location.href)}`;return {maxage:DEFAULT_COOKIE_MAX_AGE_MS,path:'/',domain:!topDomain||topDomain==='.'?undefined:topDomain,samesite:'Lax',enabled:true};};const getDefaultLocalStorageOptions=()=>({enabled:true});const getDefaultSessionStorageOptions=()=>({enabled:true});const getDefaultInMemoryStorageOptions=()=>({enabled:true});\n\n/**\n * A storage utility to persist values in cookies via Storage interface\n */class CookieStorage{static globalSingleton=null;isSupportAvailable=true;isEnabled=true;length=0;constructor(options={},logger){if(CookieStorage.globalSingleton){// eslint-disable-next-line no-constructor-return\nreturn CookieStorage.globalSingleton;}this.options=getDefaultCookieOptions();this.logger=logger;this.configure(options);CookieStorage.globalSingleton=this;}configure(options){this.options=mergeDeepRight(this.options??{},options);if(options.sameDomainCookiesOnly){delete this.options.domain;}this.isSupportAvailable=isStorageAvailable(COOKIE_STORAGE,this,this.logger);this.isEnabled=Boolean(this.options.enabled&&this.isSupportAvailable);return this.options;}setItem(key,value){cookie(key,value,this.options,this.logger);this.length=Object.keys(cookie()).length;return true;}// eslint-disable-next-line class-methods-use-this\ngetItem(key){const value=cookie(key);return isUndefined(value)?null:value;}removeItem(key){const result=this.setItem(key,null);this.length=Object.keys(cookie()).length;return result;}// eslint-disable-next-line class-methods-use-this\nclear(){// Not implemented\n// getting a list of all cookie storage keys and remove all values\n// sounds risky to do as it will take on all top domain cookies\n// better to explicitly clear specific ones if needed\n}key(index){const curKeys=this.keys();return curKeys[index]??null;}// eslint-disable-next-line class-methods-use-this\nkeys(){return Object.keys(cookie());}}\n\n/**\n * A storage utility to retain values in memory via Storage interface\n */class InMemoryStorage{isEnabled=true;length=0;data={};constructor(options,logger){this.options=getDefaultInMemoryStorageOptions();this.logger=logger;this.configure(options??{});}configure(options){this.options=mergeDeepRight(this.options,options);this.isEnabled=Boolean(this.options.enabled);return this.options;}setItem(key,value){this.data[key]=value;this.length=Object.keys(this.data).length;return value;}getItem(key){if(key in this.data){return this.data[key];}return null;}removeItem(key){if(key in this.data){delete this.data[key];}this.length=Object.keys(this.data).length;return null;}clear(){this.data={};this.length=0;}key(index){const curKeys=this.keys();return curKeys[index]??null;}keys(){return Object.keys(this.data);}}const defaultInMemoryStorage=new InMemoryStorage({},defaultLogger);\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction getDefaultExportFromCjs (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nvar store$1 = {exports: {}};\n\n(function(module,exports){(function(global,factory){module.exports=factory();})(commonjsGlobal,function(){function isJSON(obj){obj=JSON.stringify(obj);if(!/^\\{[\\s\\S]*\\}$/.test(obj)){return false;}return true;}function stringify(val){return val===undefined||typeof val===\"function\"?val+'':JSON.stringify(val);}function deserialize(value){if(typeof value!=='string'){return undefined;}try{return JSON.parse(value);}catch(e){return value;}}function isFunction(value){return {}.toString.call(value)===\"[object Function]\";}function isArray(value){return Object.prototype.toString.call(value)===\"[object Array]\";}// https://github.com/jaywcjlove/store.js/pull/8\n// Error: QuotaExceededError\nfunction dealIncognito(storage){var _KEY='_Is_Incognit',_VALUE='yes';try{// NOTE: set default storage when not passed in\nif(!storage){storage=window.localStorage;}storage.setItem(_KEY,_VALUE);storage.removeItem(_KEY);}catch(e){var inMemoryStorage={};inMemoryStorage._data={};inMemoryStorage.setItem=function(id,val){return inMemoryStorage._data[id]=String(val);};inMemoryStorage.getItem=function(id){return inMemoryStorage._data.hasOwnProperty(id)?inMemoryStorage._data[id]:undefined;};inMemoryStorage.removeItem=function(id){return delete inMemoryStorage._data[id];};inMemoryStorage.clear=function(){return inMemoryStorage._data={};};storage=inMemoryStorage;}finally{if(storage.getItem(_KEY)===_VALUE)storage.removeItem(_KEY);}return storage;}// deal QuotaExceededError if user use incognito mode in browser\nvar storage=dealIncognito();function Store(){if(!(this instanceof Store)){return new Store();}}Store.prototype={set:function set(key,val){if(key&&!isJSON(key)){storage.setItem(key,stringify(val));}else if(isJSON(key)){for(var a in key)this.set(a,key[a]);}return this;},get:function get(key){// Return all entries if no key\nif(key===undefined){var ret={};this.forEach(function(key,val){return ret[key]=val;});return ret;}if(key.charAt(0)==='?'){return this.has(key.substr(1));}var args=arguments;if(args.length>1){var dt={};for(var i=0,len=args.length;i<len;i++){var value=deserialize(storage.getItem(args[i]));if(this.has(args[i])){dt[args[i]]=value;}}return dt;}return deserialize(storage.getItem(key));},clear:function clear(){storage.clear();return this;},remove:function remove(key){var val=this.get(key);storage.removeItem(key);return val;},has:function has(key){return {}.hasOwnProperty.call(this.get(),key);},keys:function keys(){var d=[];this.forEach(function(k){d.push(k);});return d;},forEach:function forEach(callback){for(var i=0,len=storage.length;i<len;i++){var key=storage.key(i);callback(key,this.get(key));}return this;},search:function search(str){var arr=this.keys(),dt={};for(var i=0,len=arr.length;i<len;i++){if(arr[i].indexOf(str)>-1)dt[arr[i]]=this.get(arr[i]);}return dt;},len:function len(){return storage.length;}};var _Store=null;function store(key,data){var argm=arguments;var dt=null;if(!_Store)_Store=Store();if(argm.length===0)return _Store.get();if(argm.length===1){if(typeof key===\"string\")return _Store.get(key);if(isJSON(key))return _Store.set(key);}if(argm.length===2&&typeof key===\"string\"){if(!data)return _Store.remove(key);if(data&&typeof data===\"string\")return _Store.set(key,data);if(data&&isFunction(data)){dt=null;dt=data(key,_Store.get(key));store.set(key,dt);}}if(argm.length===2&&isArray(key)&&isFunction(data)){for(var i=0,len=key.length;i<len;i++){dt=data(key[i],_Store.get(key[i]));store.set(key[i],dt);}}return store;}for(var a in Store.prototype)store[a]=Store.prototype[a];return store;});})(store$1);var storeExports=store$1.exports;const store = /*@__PURE__*/getDefaultExportFromCjs(storeExports);\n\n//  check if the get, set overloads and search methods are used at all\n//  if we do, ensure we provide types to support overloads as per storejs docs\n//  https://www.npmjs.com/package/storejs\n/**\n * A storage utility to persist values in localstorage via Storage interface\n */class LocalStorage{isSupportAvailable=true;isEnabled=true;length=0;constructor(options={},logger){this.options=getDefaultLocalStorageOptions();this.logger=logger;this.configure(options);}configure(options){this.options=mergeDeepRight(this.options,options);this.isSupportAvailable=isStorageAvailable(LOCAL_STORAGE,this,this.logger);this.isEnabled=Boolean(this.options.enabled&&this.isSupportAvailable);return this.options;}setItem(key,value){store.set(key,value);this.length=store.len();}// eslint-disable-next-line class-methods-use-this\ngetItem(key){const value=store.get(key);return isUndefined(value)?null:value;}removeItem(key){store.remove(key);this.length=store.len();}clear(){store.clear();this.length=0;}key(index){const curKeys=this.keys();return curKeys[index]??null;}// eslint-disable-next-line class-methods-use-this\nkeys(){return store.keys();}}const defaultLocalStorage=new LocalStorage({},defaultLogger);\n\n/**\n * A storage utility to persist values in SessionStorage via Storage interface\n */class SessionStorage{isSupportAvailable=true;isEnabled=true;length=0;store=globalThis.sessionStorage;constructor(options={},logger){this.options=getDefaultSessionStorageOptions();this.logger=logger;this.configure(options);}configure(options){this.options=mergeDeepRight(this.options,options);this.isSupportAvailable=isStorageAvailable(SESSION_STORAGE,this,this.logger);this.isEnabled=Boolean(this.options.enabled&&this.isSupportAvailable);return this.options;}setItem(key,value){this.store.setItem(key,value);this.length=this.store.length;}getItem(key){const value=this.store.getItem(key);return isUndefined(value)?null:value;}removeItem(key){this.store.removeItem(key);this.length=this.store.length;}clear(){this.store.clear();this.length=0;}key(index){return this.store.key(index);}keys(){const keys=[];for(let i=0;i<this.store.length;i+=1){const key=this.store.key(i);if(key!==null){keys.push(key);}}return keys;}}const defaultSessionStorage=new SessionStorage({},defaultLogger);\n\n/**\n * A utility to retrieve the storage singleton instance by type\n */const getStorageEngine=type=>{switch(type){case LOCAL_STORAGE:return defaultLocalStorage;case SESSION_STORAGE:return defaultSessionStorage;case MEMORY_STORAGE:return defaultInMemoryStorage;case COOKIE_STORAGE:return new CookieStorage({},defaultLogger);default:return defaultInMemoryStorage;}};/**\n * Configure cookie storage singleton\n */const configureCookieStorageEngine=options=>{const cookieStorageOptions=new CookieStorage({},defaultLogger).configure(options);state.storage.cookie.value={maxage:cookieStorageOptions.maxage,path:cookieStorageOptions.path,domain:cookieStorageOptions.domain,samesite:cookieStorageOptions.samesite,expires:cookieStorageOptions.expires,secure:cookieStorageOptions.secure};};/**\n * Configure local storage singleton\n */const configureLocalStorageEngine=options=>{defaultLocalStorage.configure(options);};/**\n * Configure in memory storage singleton\n */const configureInMemoryStorageEngine=options=>{defaultInMemoryStorage.configure(options);};/**\n * Configure session storage singleton\n */const configureSessionStorageEngine=options=>{defaultSessionStorage.configure(options);};/**\n * Configure all storage singleton instances\n */const configureStorageEngines=(cookieStorageOptions={},localStorageOptions={},inMemoryStorageOptions={},sessionStorageOptions={})=>{configureCookieStorageEngine(cookieStorageOptions);configureLocalStorageEngine(localStorageOptions);configureInMemoryStorageEngine(inMemoryStorageOptions);configureSessionStorageEngine(sessionStorageOptions);};\n\n/**\n * Store Implementation with dedicated storage\n */class Store{hasErrorHandler=false;constructor(config,engine,pluginsManager){this.id=config.id;this.name=config.name;this.isEncrypted=config.isEncrypted??false;this.validKeys=config.validKeys??{};this.engine=engine??getStorageEngine(LOCAL_STORAGE);this.noKeyValidation=Object.keys(this.validKeys).length===0;this.noCompoundKey=config.noCompoundKey;this.originalEngine=this.engine;this.errorHandler=config.errorHandler??defaultErrorHandler;this.hasErrorHandler=Boolean(this.errorHandler);this.logger=config.logger??defaultLogger;this.pluginsManager=pluginsManager;}/**\n   * Ensure the key is valid and with correct format\n   */createValidKey(key){const{name,id,validKeys,noKeyValidation,noCompoundKey}=this;if(noKeyValidation){return noCompoundKey?key:[name,id,key].join('.');}// validate and return undefined if invalid key\nlet compoundKey;Object.values(validKeys).forEach(validKeyName=>{if(validKeyName===key){compoundKey=noCompoundKey?key:[name,id,key].join('.');}});return compoundKey;}/**\n   * Switch to inMemoryEngine, bringing any existing data with.\n   */swapQueueStoreToInMemoryEngine(){const{name,id,validKeys,noCompoundKey}=this;const inMemoryStorage=getStorageEngine(MEMORY_STORAGE);// grab existing data, but only for this page's queue instance, not all\n// better to keep other queues in localstorage to be flushed later\n// than to pull them into memory and remove them from durable storage\nObject.keys(validKeys).forEach(key=>{const value=this.get(validKeys[key]);const validKey=noCompoundKey?key:[name,id,key].join('.');inMemoryStorage.setItem(validKey,value);// TODO: are we sure we want to drop clientData\n//  if cookies are not available and localstorage is full?\nthis.remove(key);});this.engine=inMemoryStorage;}/**\n   * Set value by key.\n   */set(key,value){const validKey=this.createValidKey(key);if(!validKey){return;}try{// storejs that is used in localstorage engine already stringifies json\nthis.engine.setItem(validKey,this.encrypt(stringifyWithoutCircular(value,false,[],this.logger)));}catch(err){if(isStorageQuotaExceeded(err)){this.logger?.warn(STORAGE_QUOTA_EXCEEDED_WARNING(`Store ${this.id}`));// switch to inMemory engine\nthis.swapQueueStoreToInMemoryEngine();// and save it there\nthis.set(key,value);}else {this.onError(getMutatedError(err,STORE_DATA_SAVE_ERROR(key)));}}}/**\n   * Get by Key.\n   */get(key){const validKey=this.createValidKey(key);try{if(!validKey){return null;}const str=this.decrypt(this.engine.getItem(validKey));if(isNullOrUndefined(str)){return null;}// storejs that is used in localstorage engine already deserializes json strings but swallows errors\nreturn JSON.parse(str);}catch(err){this.onError(new Error(`${STORE_DATA_FETCH_ERROR(key)}: ${err.message}`));return null;}}/**\n   * Remove by Key.\n   */remove(key){const validKey=this.createValidKey(key);if(validKey){this.engine.removeItem(validKey);}}/**\n   * Get original engine\n   */getOriginalEngine(){return this.originalEngine;}/**\n   * Decrypt values\n   */decrypt(value){if(isNullOrUndefined(value)){return null;}return this.crypto(value,'decrypt');}/**\n   * Encrypt value\n   */encrypt(value){return this.crypto(value,'encrypt');}/**\n   * Extension point to use with encryption plugins\n   */crypto(value,mode){const noEncryption=!this.isEncrypted||!value||typeof value!=='string'||trim(value)==='';if(noEncryption){return value;}const extensionPointName=`storage.${mode}`;const formattedValue=this.pluginsManager?this.pluginsManager.invokeSingle(extensionPointName,value):value;return typeof formattedValue==='undefined'?value:formattedValue??'';}/**\n   * Handle errors\n   */onError(error){if(this.hasErrorHandler){this.errorHandler?.onError(error,`Store ${this.id}`);}else {throw error;}}}\n\nconst getStorageTypeFromPreConsentIfApplicable=(state,sessionKey)=>{let overriddenStorageType;if(state.consents.preConsent.value.enabled){switch(state.consents.preConsent.value.storage?.strategy){case'none':overriddenStorageType=NO_STORAGE;break;case'session':if(sessionKey!=='sessionInfo'){overriddenStorageType=NO_STORAGE;}break;case'anonymousId':if(sessionKey!=='anonymousId'){overriddenStorageType=NO_STORAGE;}break;}}return overriddenStorageType;};\n\n/**\n * A service to manage stores & available storage client configurations\n */class StoreManager{stores={};isInitialized=false;hasErrorHandler=false;constructor(pluginsManager,errorHandler,logger){this.errorHandler=errorHandler;this.logger=logger;this.hasErrorHandler=Boolean(this.errorHandler);this.pluginsManager=pluginsManager;this.onError=this.onError.bind(this);}/**\n   * Configure available storage client instances\n   */init(){if(this.isInitialized){return;}const loadOptions=state.loadOptions.value;const config={cookieStorageOptions:{samesite:loadOptions.sameSiteCookie,secure:loadOptions.secureCookie,domain:loadOptions.setCookieDomain,sameDomainCookiesOnly:loadOptions.sameDomainCookiesOnly,enabled:true},localStorageOptions:{enabled:true},inMemoryStorageOptions:{enabled:true},sessionStorageOptions:{enabled:true}};configureStorageEngines(removeUndefinedValues(mergeDeepRight(config.cookieStorageOptions??{},state.storage.cookie?.value??{})),removeUndefinedValues(config.localStorageOptions),removeUndefinedValues(config.inMemoryStorageOptions),removeUndefinedValues(config.sessionStorageOptions));this.initClientDataStores();this.isInitialized=true;}/**\n   * Create store to persist data used by the SDK like session, used details etc\n   */initClientDataStores(){this.initializeStorageState();// TODO: fill in extra config values and bring them in from StoreManagerOptions if needed\n// TODO: should we pass the keys for all in order to validate or leave free as v1.1?\n// Initializing all the enabled store because previous user data might be in different storage\n// that needs auto migration\nconst storageTypes=[MEMORY_STORAGE,LOCAL_STORAGE,COOKIE_STORAGE,SESSION_STORAGE];storageTypes.forEach(storageType=>{if(getStorageEngine(storageType)?.isEnabled){this.setStore({id:storageClientDataStoreNameMap[storageType],name:storageClientDataStoreNameMap[storageType],isEncrypted:true,noCompoundKey:true,type:storageType});}});}initializeStorageState(){let globalStorageType=state.storage.type.value;let entriesOptions=state.loadOptions.value.storage?.entries;// Use the storage options from post consent if anything is defined\nconst postConsentStorageOpts=state.consents.postConsent.value.storage;if(isDefined(postConsentStorageOpts?.type)||isDefined(postConsentStorageOpts?.entries)){globalStorageType=postConsentStorageOpts?.type;entriesOptions=postConsentStorageOpts?.entries;}let trulyAnonymousTracking=true;let storageEntries={};USER_SESSION_KEYS.forEach(sessionKey=>{const key=sessionKey;const storageKey=sessionKey;const configuredStorageType=entriesOptions?.[key]?.type;const preConsentStorageType=getStorageTypeFromPreConsentIfApplicable(state,sessionKey);// Storage type precedence order: pre-consent strategy > entry type > global type > default\nconst storageType=preConsentStorageType??configuredStorageType??globalStorageType??DEFAULT_STORAGE_TYPE;const finalStorageType=this.getResolvedStorageTypeForEntry(storageType,sessionKey);if(finalStorageType!==NO_STORAGE){trulyAnonymousTracking=false;}storageEntries={...storageEntries,[sessionKey]:{type:finalStorageType,key:COOKIE_KEYS[storageKey]}};});r(()=>{state.storage.type.value=globalStorageType;state.storage.entries.value=storageEntries;state.storage.trulyAnonymousTracking.value=trulyAnonymousTracking;});}getResolvedStorageTypeForEntry(storageType,sessionKey){let finalStorageType=storageType;switch(storageType){case LOCAL_STORAGE:if(!getStorageEngine(LOCAL_STORAGE)?.isEnabled){finalStorageType=MEMORY_STORAGE;}break;case SESSION_STORAGE:if(!getStorageEngine(SESSION_STORAGE)?.isEnabled){finalStorageType=MEMORY_STORAGE;}break;case MEMORY_STORAGE:case NO_STORAGE:break;case COOKIE_STORAGE:default:// First try setting the storage to cookie else to local storage\nif(getStorageEngine(COOKIE_STORAGE)?.isEnabled){finalStorageType=COOKIE_STORAGE;}else if(getStorageEngine(LOCAL_STORAGE)?.isEnabled){finalStorageType=LOCAL_STORAGE;}else if(getStorageEngine(SESSION_STORAGE)?.isEnabled){finalStorageType=SESSION_STORAGE;}else {finalStorageType=MEMORY_STORAGE;}break;}if(finalStorageType!==storageType){this.logger?.warn(STORAGE_UNAVAILABLE_WARNING(STORE_MANAGER,sessionKey,storageType,finalStorageType));}return finalStorageType;}/**\n   * Create a new store\n   */setStore(storeConfig){const storageEngine=getStorageEngine(storeConfig.type);this.stores[storeConfig.id]=new Store(storeConfig,storageEngine,this.pluginsManager);return this.stores[storeConfig.id];}/**\n   * Retrieve a store\n   */getStore(id){return this.stores[id];}/**\n   * Handle errors\n   */onError(error){if(this.hasErrorHandler){this.errorHandler?.onError(error,STORE_MANAGER);}else {throw error;}}}\n\nconst removeDuplicateSlashes=str=>str.replace(/\\/{2,}/g,'/');/**\n * Checks if provided url is valid or not\n * @param url\n * @returns true if `url` is valid and false otherwise\n */const isValidURL=url=>{if(!isString(url)){return false;}try{// If URL is supported by the browser, we can use it to validate the URL\n// Otherwise, we can at least check if the URL matches the pattern\nif(isFunction(globalThis.URL)){// eslint-disable-next-line no-new\nnew URL(url);}return URL_PATTERN.test(url);}catch(e){return false;}};\n\nconst validateWriteKey=writeKey=>{if(!isString(writeKey)||writeKey.trim().length===0){throw new Error(WRITE_KEY_VALIDATION_ERROR(writeKey));}};const validateDataPlaneUrl=dataPlaneUrl=>{if(!isValidURL(dataPlaneUrl)){throw new Error(DATA_PLANE_URL_VALIDATION_ERROR(dataPlaneUrl));}};const validateLoadArgs=(writeKey,dataPlaneUrl)=>{validateWriteKey(writeKey);validateDataPlaneUrl(dataPlaneUrl);};const isValidSourceConfig=res=>isObjectLiteralAndNotNull(res)&&isObjectLiteralAndNotNull(res.source)&&!isNullOrUndefined(res.source.id)&&isObjectLiteralAndNotNull(res.source.config)&&Array.isArray(res.source.destinations);const isValidStorageType=storageType=>typeof storageType==='string'&&SUPPORTED_STORAGE_TYPES.includes(storageType);const getTopDomainUrl=url=>{// Create a URL object\nconst urlObj=new URL(url);// Extract the host and protocol\nconst{host,protocol}=urlObj;// Split the host into parts\nconst parts=host.split('.');let topDomain;// Handle different cases, especially for co.uk or similar TLDs\nif(parts.length>2){// Join the last two parts for the top-level domain\ntopDomain=`${parts[parts.length-2]}.${parts[parts.length-1]}`;}else {// If only two parts or less, return as it is\ntopDomain=host;}return `${protocol}//${topDomain}`;};const getDataServiceUrl=endpoint=>{const url=getTopDomainUrl(window.location.href);const formattedEndpoint=endpoint.startsWith('/')?endpoint.substring(1):endpoint;return `${url}/${formattedEndpoint}`;};\n\n/**\n * A function to filter enabled destinations and map to required properties only\n * @param destinations\n *\n * @returns Destination[]\n */const filterEnabledDestination=destinations=>{const nativeDestinations=[];destinations.forEach(destination=>{if(destination.enabled&&!destination.deleted){nativeDestinations.push({id:destination.id,displayName:destination.destinationDefinition.displayName,config:destination.config,shouldApplyDeviceModeTransformation:destination.shouldApplyDeviceModeTransformation||false,propagateEventsUntransformedOnError:destination.propagateEventsUntransformedOnError||false,userFriendlyId:`${destination.destinationDefinition.displayName.replaceAll(' ','-')}___${destination.id}`});}});return nativeDestinations;};\n\n/**\n * Removes trailing slash from url\n * @param url\n * @returns url\n */const removeTrailingSlashes=url=>url?.endsWith('/')?removeTrailingSlashes(url.substring(0,url.length-1)):url;const getDomain=url=>{try{const urlObj=new URL(url);return urlObj.host;}catch(error){return null;}};/**\n * Get the referring domain from the referrer URL\n * @param referrer Page referrer\n * @returns Page referring domain\n */const getReferringDomain=referrer=>getDomain(referrer)??'';/**\n * Extracts UTM parameters from the URL\n * @param url Page URL\n * @returns UTM parameters\n */const extractUTMParameters=url=>{const result={};try{const urlObj=new URL(url);const UTM_PREFIX='utm_';urlObj.searchParams.forEach((value,sParam)=>{if(sParam.startsWith(UTM_PREFIX)){let utmParam=sParam.substring(UTM_PREFIX.length);// Not sure why we're doing this\nif(utmParam==='campaign'){utmParam='name';}result[utmParam]=value;}});}catch(error){// Do nothing\n}return result;};/**\n * To get the URL until the hash\n * @param url The input URL\n * @returns URL until the hash\n */const getUrlWithoutHash=url=>{let urlWithoutHash=url;try{const urlObj=new URL(url);urlWithoutHash=urlObj.origin+urlObj.pathname+urlObj.search;}catch(error){// Do nothing\n}return urlWithoutHash;};\n\n/**\n * Determines if the SDK is running inside a chrome extension\n * @returns boolean\n */const isSDKRunningInChromeExtension=()=>!!(window.chrome&&window.chrome.runtime&&window.chrome.runtime.id);\n\nconst DEFAULT_PRE_CONSENT_STORAGE_STRATEGY='none';const DEFAULT_PRE_CONSENT_EVENTS_DELIVERY_TYPE='immediate';\n\nconst isErrorReportingEnabled=sourceConfig=>sourceConfig?.statsCollection?.errors?.enabled===true;const getErrorReportingProviderNameFromConfig=sourceConfig=>sourceConfig?.statsCollection?.errors?.provider;const isMetricsReportingEnabled=sourceConfig=>sourceConfig?.statsCollection?.metrics?.enabled===true;\n\nconst DEFAULT_INTEGRATIONS_CONFIG={All:true};\n\n/**\n * Validates and normalizes the consent options provided by the user\n * @param options Consent options provided by the user\n * @returns Validated and normalized consent options\n */const getValidPostConsentOptions=options=>{const validOptions={sendPageEvent:false,trackConsent:false,discardPreConsentEvents:false};if(isObjectLiteralAndNotNull(options)){const clonedOptions=clone(options);validOptions.storage=clonedOptions.storage;if(isDefined(clonedOptions.integrations)){validOptions.integrations=isObjectLiteralAndNotNull(clonedOptions.integrations)?clonedOptions.integrations:DEFAULT_INTEGRATIONS_CONFIG;}validOptions.discardPreConsentEvents=clonedOptions.discardPreConsentEvents===true;validOptions.sendPageEvent=clonedOptions.sendPageEvent===true;validOptions.trackConsent=clonedOptions.trackConsent===true;if(isNonEmptyObject(clonedOptions.consentManagement)){// Override enabled value with the current state value\nvalidOptions.consentManagement=mergeDeepRight(clonedOptions.consentManagement,{enabled:state.consents.enabled.value});}}return validOptions;};/**\n * Validates if the input is a valid consents data\n * @param value Input consents data\n * @returns true if the input is a valid consents data else false\n */const isValidConsentsData=value=>isNonEmptyObject(value)||Array.isArray(value);/**\n * Retrieves the corresponding provider and plugin name of the selected consent manager from the supported consent managers\n * @param consentManagementOpts consent management options\n * @param logger logger instance\n * @returns Corresponding provider and plugin name of the selected consent manager from the supported consent managers\n */const getConsentManagerInfo=(consentManagementOpts,logger)=>{let{provider}=consentManagementOpts;const consentManagerPluginName=provider?ConsentManagersToPluginNameMap[provider]:undefined;if(provider&&!consentManagerPluginName){logger?.error(UNSUPPORTED_CONSENT_MANAGER_ERROR(CONFIG_MANAGER,provider,ConsentManagersToPluginNameMap));// Reset the provider value\nprovider=undefined;}return {provider,consentManagerPluginName};};/**\n * Validates and converts the consent management options into a normalized format\n * @param consentManagementOpts Consent management options provided by the user\n * @param logger logger instance\n * @returns An object containing the consent manager plugin name, initialized, enabled and consents data\n */const getConsentManagementData=(consentManagementOpts,logger)=>{let consentManagerPluginName;let allowedConsentIds=[];let deniedConsentIds=[];let initialized=false;let provider;let enabled=consentManagementOpts?.enabled===true;if(isNonEmptyObject(consentManagementOpts)&&enabled){// Get the corresponding plugin name of the selected consent manager from the supported consent managers\n({provider,consentManagerPluginName}=getConsentManagerInfo(consentManagementOpts,logger));if(isValidConsentsData(consentManagementOpts.allowedConsentIds)){allowedConsentIds=consentManagementOpts.allowedConsentIds;initialized=true;}if(isValidConsentsData(consentManagementOpts.deniedConsentIds)){deniedConsentIds=consentManagementOpts.deniedConsentIds;initialized=true;}}const consentsData={allowedConsentIds,deniedConsentIds};// Enable consent management only if consent manager is supported\nenabled=enabled&&Boolean(consentManagerPluginName);return {provider,consentManagerPluginName,initialized,enabled,consentsData};};\n\n/**\n * Determines the SDK URL\n * @returns sdkURL\n */const getSDKUrl=()=>{const scripts=document.getElementsByTagName('script');const sdkFileNameRegex=/(?:^|\\/)rsa(\\.min)?\\.js$/;// eslint-disable-next-line no-restricted-syntax\nfor(const script of scripts){const src=script.getAttribute('src');if(src&&sdkFileNameRegex.test(src)){return src;}}return undefined;};/**\n * Updates the reporting state variables from the source config data\n * @param res Source config\n * @param logger Logger instance\n */const updateReportingState=(res,logger)=>{state.reporting.isErrorReportingEnabled.value=isErrorReportingEnabled(res.source.config)&&!isSDKRunningInChromeExtension();state.reporting.isMetricsReportingEnabled.value=isMetricsReportingEnabled(res.source.config);if(state.reporting.isErrorReportingEnabled.value){const errReportingProvider=getErrorReportingProviderNameFromConfig(res.source.config);// Get the corresponding plugin name of the selected error reporting provider from the supported error reporting providers\nconst errReportingProviderPlugin=errReportingProvider?ErrorReportingProvidersToPluginNameMap[errReportingProvider]:undefined;if(!isUndefined(errReportingProvider)&&!errReportingProviderPlugin){// set the default error reporting provider\nlogger?.warn(UNSUPPORTED_ERROR_REPORTING_PROVIDER_WARNING(CONFIG_MANAGER,errReportingProvider,ErrorReportingProvidersToPluginNameMap,DEFAULT_ERROR_REPORTING_PROVIDER));}state.reporting.errorReportingProviderPluginName.value=errReportingProviderPlugin??ErrorReportingProvidersToPluginNameMap[DEFAULT_ERROR_REPORTING_PROVIDER];}};const updateStorageStateFromLoadOptions=logger=>{const{useServerSideCookies,dataServiceEndpoint,storage:storageOptsFromLoad}=state.loadOptions.value;let storageType=storageOptsFromLoad?.type;if(isDefined(storageType)&&!isValidStorageType(storageType)){logger?.warn(STORAGE_TYPE_VALIDATION_WARNING(CONFIG_MANAGER,storageType,DEFAULT_STORAGE_TYPE));storageType=DEFAULT_STORAGE_TYPE;}let storageEncryptionVersion=storageOptsFromLoad?.encryption?.version;const encryptionPluginName=storageEncryptionVersion&&StorageEncryptionVersionsToPluginNameMap[storageEncryptionVersion];if(!isUndefined(storageEncryptionVersion)&&isUndefined(encryptionPluginName)){// set the default encryption plugin\nlogger?.warn(UNSUPPORTED_STORAGE_ENCRYPTION_VERSION_WARNING(CONFIG_MANAGER,storageEncryptionVersion,StorageEncryptionVersionsToPluginNameMap,DEFAULT_STORAGE_ENCRYPTION_VERSION));storageEncryptionVersion=DEFAULT_STORAGE_ENCRYPTION_VERSION;}else if(isUndefined(storageEncryptionVersion)){storageEncryptionVersion=DEFAULT_STORAGE_ENCRYPTION_VERSION;}// Allow migration only if the configured encryption version is the default encryption version\nconst configuredMigrationValue=storageOptsFromLoad?.migrate;const finalMigrationVal=configuredMigrationValue&&storageEncryptionVersion===DEFAULT_STORAGE_ENCRYPTION_VERSION;if(configuredMigrationValue===true&&finalMigrationVal!==configuredMigrationValue){logger?.warn(STORAGE_DATA_MIGRATION_OVERRIDE_WARNING(CONFIG_MANAGER,storageEncryptionVersion,DEFAULT_STORAGE_ENCRYPTION_VERSION));}r(()=>{state.storage.type.value=storageType;let cookieOptions=storageOptsFromLoad?.cookie??{};if(useServerSideCookies){state.serverCookies.isEnabledServerSideCookies.value=useServerSideCookies;const dataServiceUrl=getDataServiceUrl(dataServiceEndpoint??DEFAULT_DATA_SERVICE_ENDPOINT);if(isValidURL(dataServiceUrl)){state.serverCookies.dataServiceUrl.value=removeTrailingSlashes(dataServiceUrl);const curHost=getDomain(window.location.href);const dataServiceHost=getDomain(dataServiceUrl);// If the current host is different from the data service host, then it is a cross-site request\n// For server-side cookies to work, we need to set the SameSite=None and Secure attributes\nif(curHost!==dataServiceHost){cookieOptions={...cookieOptions,samesite:'None',secure:true};}}else {state.serverCookies.isEnabledServerSideCookies.value=false;}}state.storage.cookie.value=cookieOptions;state.storage.encryptionPluginName.value=StorageEncryptionVersionsToPluginNameMap[storageEncryptionVersion];state.storage.migrate.value=finalMigrationVal;});};const updateConsentsStateFromLoadOptions=logger=>{const{provider,consentManagerPluginName,initialized,enabled,consentsData}=getConsentManagementData(state.loadOptions.value.consentManagement,logger);// Pre-consent\nconst preConsentOpts=state.loadOptions.value.preConsent;let storageStrategy=preConsentOpts?.storage?.strategy??DEFAULT_PRE_CONSENT_STORAGE_STRATEGY;const StorageStrategies=['none','session','anonymousId'];if(isDefined(storageStrategy)&&!StorageStrategies.includes(storageStrategy)){storageStrategy=DEFAULT_PRE_CONSENT_STORAGE_STRATEGY;logger?.warn(UNSUPPORTED_PRE_CONSENT_STORAGE_STRATEGY(CONFIG_MANAGER,preConsentOpts?.storage?.strategy,DEFAULT_PRE_CONSENT_STORAGE_STRATEGY));}let eventsDeliveryType=preConsentOpts?.events?.delivery??DEFAULT_PRE_CONSENT_EVENTS_DELIVERY_TYPE;const deliveryTypes=['immediate','buffer'];if(isDefined(eventsDeliveryType)&&!deliveryTypes.includes(eventsDeliveryType)){eventsDeliveryType=DEFAULT_PRE_CONSENT_EVENTS_DELIVERY_TYPE;logger?.warn(UNSUPPORTED_PRE_CONSENT_EVENTS_DELIVERY_TYPE(CONFIG_MANAGER,preConsentOpts?.events?.delivery,DEFAULT_PRE_CONSENT_EVENTS_DELIVERY_TYPE));}r(()=>{state.consents.activeConsentManagerPluginName.value=consentManagerPluginName;state.consents.initialized.value=initialized;state.consents.enabled.value=enabled;state.consents.data.value=consentsData;state.consents.provider.value=provider;state.consents.preConsent.value={// Only enable pre-consent if it is explicitly enabled and\n// if it is not already initialized and\n// if consent management is enabled\nenabled:state.loadOptions.value.preConsent?.enabled===true&&initialized===false&&enabled===true,storage:{strategy:storageStrategy},events:{delivery:eventsDeliveryType}};});};/**\n * Determines the consent management state variables from the source config data\n * @param resp Source config response\n * @param logger Logger instance\n */const updateConsentsState=resp=>{let resolutionStrategy=state.consents.resolutionStrategy.value;let cmpMetadata;if(isObjectLiteralAndNotNull(resp.consentManagementMetadata)){if(state.consents.provider.value){resolutionStrategy=resp.consentManagementMetadata.providers.find(p=>p.provider===state.consents.provider.value)?.resolutionStrategy??state.consents.resolutionStrategy.value;}cmpMetadata=resp.consentManagementMetadata;}// If the provider is custom, then the resolution strategy is not applicable\nif(state.consents.provider.value==='custom'){resolutionStrategy=undefined;}r(()=>{state.consents.metadata.value=clone(cmpMetadata);state.consents.resolutionStrategy.value=resolutionStrategy;});};const updateDataPlaneEventsStateFromLoadOptions=logger=>{if(state.dataPlaneEvents.deliveryEnabled.value){const defaultEventsQueuePluginName='XhrQueue';let eventsQueuePluginName=defaultEventsQueuePluginName;if(state.loadOptions.value.useBeacon){if(state.capabilities.isBeaconAvailable.value){eventsQueuePluginName='BeaconQueue';}else {eventsQueuePluginName=defaultEventsQueuePluginName;logger?.warn(UNSUPPORTED_BEACON_API_WARNING(CONFIG_MANAGER));}}r(()=>{state.dataPlaneEvents.eventsQueuePluginName.value=eventsQueuePluginName;});}};const getSourceConfigURL=(configUrl,writeKey,lockIntegrationsVersion,lockPluginsVersion,logger)=>{const defSearchParams=new URLSearchParams({p:MODULE_TYPE,v:APP_VERSION,build:BUILD_TYPE,writeKey,lockIntegrationsVersion:lockIntegrationsVersion.toString(),lockPluginsVersion:lockPluginsVersion.toString()});let origin=DEFAULT_CONFIG_BE_URL;let searchParams=defSearchParams;let pathname='/sourceConfig/';let hash='';if(isValidURL(configUrl)){const configUrlInstance=new URL(configUrl);if(!removeTrailingSlashes(configUrlInstance.pathname).endsWith('/sourceConfig')){configUrlInstance.pathname=`${removeTrailingSlashes(configUrlInstance.pathname)}/sourceConfig/`;}configUrlInstance.pathname=removeDuplicateSlashes(configUrlInstance.pathname);defSearchParams.forEach((value,key)=>{if(configUrlInstance.searchParams.get(key)===null){configUrlInstance.searchParams.set(key,value);}});origin=configUrlInstance.origin;pathname=configUrlInstance.pathname;searchParams=configUrlInstance.searchParams;hash=configUrlInstance.hash;}else {logger?.warn(INVALID_CONFIG_URL_WARNING(CONFIG_MANAGER,configUrl));}return `${origin}${pathname}?${searchParams}${hash}`;};\n\nconst getSDKComponentBaseURL=(componentType,pathSuffix,baseURL,currentVersion,lockVersion,customURL)=>{let sdkComponentURL='';if(customURL){if(!isValidURL(customURL)){throw new Error(COMPONENT_BASE_URL_ERROR(componentType));}return removeTrailingSlashes(customURL);}const sdkURL=getSDKUrl();sdkComponentURL=sdkURL?sdkURL.split('/').slice(0,-1).concat(pathSuffix).join('/'):baseURL;if(lockVersion){sdkComponentURL=sdkComponentURL.replace(`/${CDN_ARCH_VERSION_DIR}/${BUILD_TYPE}/${pathSuffix}`,`/${currentVersion}/${BUILD_TYPE}/${pathSuffix}`);}return sdkComponentURL;};/**\n * A function that determines integration SDK loading path\n * @param currentVersion\n * @param lockIntegrationsVersion\n * @param customIntegrationsCDNPath\n * @returns\n */const getIntegrationsCDNPath=(currentVersion,lockIntegrationsVersion,customIntegrationsCDNPath)=>getSDKComponentBaseURL('integrations',CDN_INT_DIR,DEST_SDK_BASE_URL,currentVersion,lockIntegrationsVersion,customIntegrationsCDNPath);/**\n * A function that determines plugins SDK loading path\n * @param currentVersion Current SDK version\n * @param lockPluginsVersion Flag to lock the plugins version\n * @param customPluginsCDNPath URL to load the plugins from\n * @returns Final plugins CDN path\n */const getPluginsCDNPath=(currentVersion,lockPluginsVersion,customPluginsCDNPath)=>getSDKComponentBaseURL('plugins',CDN_PLUGINS_DIR,PLUGINS_BASE_URL,currentVersion,lockPluginsVersion,customPluginsCDNPath);\n\nclass ConfigManager{hasErrorHandler=false;constructor(httpClient,errorHandler,logger){this.errorHandler=errorHandler;this.logger=logger;this.httpClient=httpClient;this.hasErrorHandler=Boolean(this.errorHandler);this.onError=this.onError.bind(this);this.processConfig=this.processConfig.bind(this);}attachEffects(){E(()=>{this.logger?.setMinLogLevel(state.lifecycle.logLevel.value);});}/**\n   * A function to validate, construct and store loadOption, lifecycle, source and destination\n   * config related information in global state\n   */init(){this.attachEffects();validateLoadArgs(state.lifecycle.writeKey.value,state.lifecycle.dataPlaneUrl.value);const{logLevel,configUrl,lockIntegrationsVersion,lockPluginsVersion,destSDKBaseURL,pluginsSDKBaseURL}=state.loadOptions.value;state.lifecycle.activeDataplaneUrl.value=removeTrailingSlashes(state.lifecycle.dataPlaneUrl.value);// determine the path to fetch integration SDK from\nconst intgCdnUrl=getIntegrationsCDNPath(APP_VERSION,lockIntegrationsVersion,destSDKBaseURL);// determine the path to fetch remote plugins from\nconst pluginsCDNPath=getPluginsCDNPath(APP_VERSION,lockPluginsVersion,pluginsSDKBaseURL);updateStorageStateFromLoadOptions(this.logger);updateConsentsStateFromLoadOptions(this.logger);updateDataPlaneEventsStateFromLoadOptions(this.logger);// set application lifecycle state in global state\nr(()=>{state.lifecycle.integrationsCDNPath.value=intgCdnUrl;state.lifecycle.pluginsCDNPath.value=pluginsCDNPath;if(logLevel){state.lifecycle.logLevel.value=logLevel;}state.lifecycle.sourceConfigUrl.value=getSourceConfigURL(configUrl,state.lifecycle.writeKey.value,lockIntegrationsVersion,lockPluginsVersion,this.logger);});this.getConfig();}/**\n   * Handle errors\n   */onError(error,customMessage,shouldAlwaysThrow){if(this.hasErrorHandler){this.errorHandler?.onError(error,CONFIG_MANAGER,customMessage,shouldAlwaysThrow);}else {throw error;}}/**\n   * A callback function that is executed once we fetch the source config response.\n   * Use to construct and store information that are dependent on the sourceConfig.\n   */processConfig(response,details){// TODO: add retry logic with backoff based on rejectionDetails.xhr.status\n// We can use isErrRetryable utility method\nif(!response){this.onError(SOURCE_CONFIG_FETCH_ERROR(details?.error));return;}let res;try{if(isString(response)){res=JSON.parse(response);}else {res=response;}}catch(err){this.onError(err,SOURCE_CONFIG_RESOLUTION_ERROR,true);return;}if(!isValidSourceConfig(res)){this.onError(new Error(SOURCE_CONFIG_RESOLUTION_ERROR),undefined,true);return;}// Log error and abort if source is disabled\nif(res.source.enabled===false){this.logger?.error(SOURCE_DISABLED_ERROR);return;}// set the values in state for reporting slice\nupdateReportingState(res,this.logger);const nativeDestinations=res.source.destinations.length>0?filterEnabledDestination(res.source.destinations):[];// set in the state --> source, destination, lifecycle, reporting\nr(()=>{// set source related information in state\nstate.source.value={config:res.source.config,id:res.source.id,workspaceId:res.source.workspaceId};// set device mode destination related information in state\nstate.nativeDestinations.configuredDestinations.value=nativeDestinations;// set the desired optional plugins\nstate.plugins.pluginsToLoadFromConfig.value=state.loadOptions.value.plugins??[];updateConsentsState(res);// set application lifecycle state\nstate.lifecycle.status.value='configured';});}/**\n   * A function to fetch source config either from /sourceConfig endpoint\n   * or from getSourceConfig load option\n   * @returns\n   */getConfig(){const sourceConfigFunc=state.loadOptions.value.getSourceConfig;if(sourceConfigFunc){if(!isFunction(sourceConfigFunc)){throw new Error(SOURCE_CONFIG_OPTION_ERROR);}// Fetch source config from the function\nconst res=sourceConfigFunc();if(res instanceof Promise){res.then(pRes=>this.processConfig(pRes)).catch(err=>{this.onError(err,'SourceConfig');});}else {this.processConfig(res);}}else {// Fetch source configuration from the configured URL\nthis.httpClient.getAsyncData({url:state.lifecycle.sourceConfigUrl.value,options:{headers:{'Content-Type':undefined}},callback:this.processConfig});}}}\n\n/**\n * To get the timezone of the user\n *\n * @returns string\n */const getTimezone=()=>{const timezone=new Date().toString().match(/([A-Z]+[+-]\\d+)/);return timezone&&timezone[1]?timezone[1]:'NA';};\n\n/**\n * Get the referrer URL\n * @returns The referrer URL\n */const getReferrer=()=>document?.referrer||'$direct';/**\n * To get the canonical URL of the page\n * @returns canonical URL\n */const getCanonicalUrl=()=>{const tags=document.getElementsByTagName('link');let canonicalUrl='';for(let i=0;tags[i];i+=1){const tag=tags[i];if(tag.getAttribute('rel')==='canonical'&&!canonicalUrl){canonicalUrl=tag.getAttribute('href')??'';break;}}return canonicalUrl;};const getUserAgent=()=>{if(isUndefined(globalThis.navigator)){return null;}let{userAgent}=globalThis.navigator;const{brave}=globalThis.navigator;// For supporting Brave browser detection,\n// add \"Brave/<version>\" to the user agent with the version value from the Chrome component\nif(brave&&Object.getPrototypeOf(brave).isBrave){// Example:\n// Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.5060.114 Safari/537.36\nconst matchedArr=userAgent.match(/(chrome)\\/([\\w.]+)/i);if(matchedArr){userAgent=`${userAgent} Brave/${matchedArr[2]}`;}}return userAgent;};const getLanguage=()=>{if(isUndefined(globalThis.navigator)){return null;}return globalThis.navigator.language??globalThis.navigator.browserLanguage;};/**\n * Default page properties\n * @returns Default page properties\n */const getDefaultPageProperties=()=>{const canonicalUrl=getCanonicalUrl();let path=globalThis.location.pathname;const{href:tabUrl}=globalThis.location;let pageUrl=tabUrl;const{search}=globalThis.location;// If valid canonical URL is provided use this as page URL.\nif(canonicalUrl){try{const urlObj=new URL(canonicalUrl);// If existing, query params of canonical URL will be used instead of the location.search ones\nif(urlObj.search===''){pageUrl=canonicalUrl+search;}else {pageUrl=canonicalUrl;}path=urlObj.pathname;}catch(err){// Do nothing\n}}const url=getUrlWithoutHash(pageUrl);const{title}=document;const referrer=getReferrer();return {path,referrer,referring_domain:getReferringDomain(referrer),search,title,url,tab_url:tabUrl};};\n\nconst POLYFILL_URL=`https://polyfill-fastly.io/v3/polyfill.min.js?version=3.111.0&features=${Object.keys(legacyJSEngineRequiredPolyfills).join('%2C')}`;const POLYFILL_LOAD_TIMEOUT=10*1000;// 10 seconds\nconst POLYFILL_SCRIPT_ID='rudderstackPolyfill';\n\nclass CapabilitiesManager{constructor(errorHandler,logger){this.logger=logger;this.errorHandler=errorHandler;this.externalSrcLoader=new ExternalSrcLoader(this.errorHandler,this.logger);this.onError=this.onError.bind(this);this.onReady=this.onReady.bind(this);}init(){try{this.prepareBrowserCapabilities();this.attachWindowListeners();}catch(err){this.onError(err);}}/**\n   * Detect supported capabilities and set values in state\n   */ // eslint-disable-next-line class-methods-use-this\ndetectBrowserCapabilities(){r(()=>{// Storage related details\nstate.capabilities.storage.isCookieStorageAvailable.value=isStorageAvailable(COOKIE_STORAGE,getStorageEngine(COOKIE_STORAGE),this.logger);state.capabilities.storage.isLocalStorageAvailable.value=isStorageAvailable(LOCAL_STORAGE,undefined,this.logger);state.capabilities.storage.isSessionStorageAvailable.value=isStorageAvailable(SESSION_STORAGE,undefined,this.logger);// Browser feature detection details\nstate.capabilities.isBeaconAvailable.value=hasBeacon();state.capabilities.isUaCHAvailable.value=hasUAClientHints();state.capabilities.isCryptoAvailable.value=hasCrypto$1();state.capabilities.isIE11.value=isIE11();state.capabilities.isOnline.value=globalThis.navigator.onLine;// Get page context details\nstate.context.userAgent.value=getUserAgent();state.context.locale.value=getLanguage();state.context.screen.value=getScreenDetails();state.context.timezone.value=getTimezone();if(hasUAClientHints()){getUserAgentClientHint(uach=>{state.context['ua-ch'].value=uach;},state.loadOptions.value.uaChTrackLevel);}});// Ad blocker detection\nE(()=>{if(state.loadOptions.value.sendAdblockPage===true&&state.lifecycle.sourceConfigUrl.value!==undefined){detectAdBlockers(this.errorHandler,this.logger);}});}/**\n   * Detect if polyfills are required and then load script from polyfill URL\n   */prepareBrowserCapabilities(){state.capabilities.isLegacyDOM.value=isLegacyJSEngine();const customPolyfillUrl=state.loadOptions.value.polyfillURL;let polyfillUrl=POLYFILL_URL;if(isDefinedAndNotNull(customPolyfillUrl)){if(isValidURL(customPolyfillUrl)){polyfillUrl=customPolyfillUrl;}else {this.logger?.warn(INVALID_POLYFILL_URL_WARNING(CAPABILITIES_MANAGER,customPolyfillUrl));}}const shouldLoadPolyfill=state.loadOptions.value.polyfillIfRequired&&state.capabilities.isLegacyDOM.value&&isValidURL(polyfillUrl);if(shouldLoadPolyfill){const isDefaultPolyfillService=polyfillUrl!==state.loadOptions.value.polyfillURL;if(isDefaultPolyfillService){// write key specific callback\n// NOTE: we're not putting this into RudderStackGlobals as providing the property path to the callback function in the polyfill URL is not possible\nconst polyfillCallbackName=`RS_polyfillCallback_${state.lifecycle.writeKey.value}`;const polyfillCallback=()=>{this.onReady();// Remove the entry from window so we don't leave room for calling it again\ndelete globalThis[polyfillCallbackName];};globalThis[polyfillCallbackName]=polyfillCallback;polyfillUrl=`${polyfillUrl}&callback=${polyfillCallbackName}`;}this.externalSrcLoader.loadJSFile({url:polyfillUrl,id:POLYFILL_SCRIPT_ID,async:true,timeout:POLYFILL_LOAD_TIMEOUT,callback:scriptId=>{if(!scriptId){this.onError(new Error(POLYFILL_SCRIPT_LOAD_ERROR(POLYFILL_SCRIPT_ID,polyfillUrl)));}else if(!isDefaultPolyfillService){this.onReady();}}});}else {this.onReady();}}/**\n   * Attach listeners to window to observe event that update capabilities state values\n   */attachWindowListeners(){globalThis.addEventListener('offline',()=>{state.capabilities.isOnline.value=false;});globalThis.addEventListener('online',()=>{state.capabilities.isOnline.value=true;});globalThis.addEventListener('resize',debounce(()=>{state.context.screen.value=getScreenDetails();},this));}/**\n   * Set the lifecycle status to next phase\n   */ // eslint-disable-next-line class-methods-use-this\nonReady(){this.detectBrowserCapabilities();state.lifecycle.status.value='browserCapabilitiesReady';}/**\n   * Handles error\n   * @param error The error object\n   */onError(error){if(this.errorHandler){this.errorHandler.onError(error,CAPABILITIES_MANAGER);}else {throw error;}}}\n\nfunction random(len){return crypto.getRandomValues(new Uint8Array(len));}\n\nvar SIZE=4096,HEX$1=[],IDX$1=0,BUFFER$1;for(;IDX$1<256;IDX$1++){HEX$1[IDX$1]=(IDX$1+256).toString(16).substring(1);}function v4$1(){if(!BUFFER$1||IDX$1+16>SIZE){BUFFER$1=random(SIZE);IDX$1=0;}var i=0,tmp,out='';for(;i<16;i++){tmp=BUFFER$1[IDX$1+i];if(i==6)out+=HEX$1[tmp&15|64];else if(i==8)out+=HEX$1[tmp&63|128];else out+=HEX$1[tmp];if(i&1&&i>1&&i<11)out+='-';}IDX$1+=16;return out;}\n\nvar IDX=256,HEX=[],BUFFER;while(IDX--)HEX[IDX]=(IDX+256).toString(16).substring(1);function v4(){var i=0,num,out='';if(!BUFFER||IDX+16>256){BUFFER=Array(i=256);while(i--)BUFFER[i]=256*Math.random()|0;i=IDX=0;}for(;i<16;i++){num=BUFFER[IDX+i];if(i==6)out+=HEX[num&15|64];else if(i==8)out+=HEX[num&63|128];else out+=HEX[num];if(i&1&&i>1&&i<11)out+='-';}IDX++;return out;}\n\nconst hasCrypto=()=>!isNullOrUndefined(globalThis.crypto)&&isFunction(globalThis.crypto.getRandomValues);\n\nconst generateUUID=()=>{if(hasCrypto()){return v4$1();}return v4();};\n\n/**\n * To get the current timestamp in ISO string format\n * @returns ISO formatted timestamp string\n */const getCurrentTimeFormatted=()=>{const curDateTime=new Date().toISOString();return curDateTime;};\n\nconst CHANNEL='web';// These are the top-level elements in the standard RudderStack event spec\nconst TOP_LEVEL_ELEMENTS=['integrations','anonymousId','originalTimestamp'];// Reserved elements in the context of standard RudderStack event spec\n// Typically, these elements are not allowed to be overridden by the user\nconst CONTEXT_RESERVED_ELEMENTS=['library','consentManagement','userAgent','ua-ch','screen'];// Reserved elements in the standard RudderStack event spec\nconst RESERVED_ELEMENTS=['id','anonymous_id','user_id','sent_at','timestamp','received_at','original_timestamp','event','event_text','channel','context_ip','context_request_ip','context_passed_ip','group_id','previous_id'];\n\n/**\n * A function to check given value is a number or not\n * @param num input value\n * @returns boolean\n */const isNumber=num=>typeof num==='number'&&!Number.isNaN(num);/**\n * A function to check given number has minimum length or not\n * @param minimumLength     minimum length\n * @param num               input number\n * @returns boolean\n */const hasMinLength=(minimumLength,num)=>num.toString().length>=minimumLength;/**\n * A function to check given value is a positive integer or not\n * @param num input value\n * @returns boolean\n */const isPositiveInteger=num=>isNumber(num)&&num>=0&&Number.isInteger(num);\n\nconst MIN_SESSION_ID_LENGTH=10;/**\n * A function to validate current session and return true/false depending on that\n * @returns boolean\n */const hasSessionExpired=expiresAt=>{const timestamp=Date.now();return Boolean(!expiresAt||timestamp>expiresAt);};/**\n * A function to generate session id\n * @returns number\n */const generateSessionId=()=>Date.now();/**\n * Function to validate user provided sessionId\n * @param {number} sessionId\n * @param logger logger\n * @returns\n */const isManualSessionIdValid=(sessionId,logger)=>{if(!sessionId||!isPositiveInteger(sessionId)||!hasMinLength(MIN_SESSION_ID_LENGTH,sessionId)){logger?.warn(INVALID_SESSION_ID_WARNING(USER_SESSION_MANAGER,sessionId,MIN_SESSION_ID_LENGTH));return false;}return true;};/**\n * A function to generate new auto tracking session\n * @param sessionTimeout current timestamp\n * @returns SessionInfo\n */const generateAutoTrackingSession=sessionTimeout=>{const timestamp=Date.now();const timeout=sessionTimeout||DEFAULT_SESSION_TIMEOUT_MS;return {id:timestamp,// set the current timestamp\nexpiresAt:timestamp+timeout,// set the expiry time of the session\ntimeout,sessionStart:undefined,autoTrack:true};};/**\n * A function to generate new manual tracking session\n * @param id Provided sessionId\n * @param logger Logger module\n * @returns SessionInfo\n */const generateManualTrackingSession=(id,logger)=>{const sessionId=isManualSessionIdValid(id,logger)?id:generateSessionId();return {id:sessionId,sessionStart:undefined,manualTrack:true};};const isStorageTypeValidForStoringData=storageType=>Boolean(storageType===COOKIE_STORAGE||storageType===LOCAL_STORAGE||storageType===SESSION_STORAGE||storageType===MEMORY_STORAGE);/**\n * Generate a new anonymousId\n * @returns string anonymousID\n */const generateAnonymousId=()=>generateUUID();\n\n/**\n * To get the page properties for context object\n * @param pageProps Page properties\n * @returns page properties object for context\n */const getContextPageProperties=pageProps=>{// Need to get updated page details on each event as an event to notify on SPA URL changes does not seem to exist\nconst curPageProps=getDefaultPageProperties();const ctxPageProps={};Object.keys(curPageProps).forEach(key=>{ctxPageProps[key]=pageProps?.[key]||curPageProps[key];});ctxPageProps.initial_referrer=pageProps?.initial_referrer||state.session.initialReferrer.value;ctxPageProps.initial_referring_domain=pageProps?.initial_referring_domain||state.session.initialReferringDomain.value;return ctxPageProps;};/**\n * Add any missing default page properties using values from options and defaults\n * @param properties Input page properties\n * @param options API options\n */const getUpdatedPageProperties=(properties,options)=>{const optionsPageProps=options?.page||{};const pageProps=properties;// Need to get updated page details on each event as an event to notify on SPA URL changes does not seem to exist\nconst curPageProps=getDefaultPageProperties();Object.keys(curPageProps).forEach(key=>{if(isUndefined(pageProps[key])){pageProps[key]=optionsPageProps[key]||curPageProps[key];}});if(isUndefined(pageProps.initial_referrer)){pageProps.initial_referrer=optionsPageProps.initial_referrer||state.session.initialReferrer.value;}if(isUndefined(pageProps.initial_referring_domain)){pageProps.initial_referring_domain=optionsPageProps.initial_referring_domain||state.session.initialReferringDomain.value;}return pageProps;};/**\n * Utility to check for reserved keys in the input object\n * @param obj Generic object\n * @param parentKeyPath Object's parent key path\n * @param logger Logger instance\n */const checkForReservedElementsInObject=(obj,parentKeyPath,logger)=>{if(isObjectLiteralAndNotNull(obj)){Object.keys(obj).forEach(property=>{if(RESERVED_ELEMENTS.includes(property)||RESERVED_ELEMENTS.includes(property.toLowerCase())){logger?.warn(RESERVED_KEYWORD_WARNING(EVENT_MANAGER,property,parentKeyPath,RESERVED_ELEMENTS));}});}};/**\n * Checks for reserved keys in traits, properties, and contextual traits\n * @param rudderEvent Generated rudder event\n * @param logger Logger instance\n */const checkForReservedElements=(rudderEvent,logger)=>{//  properties, traits, contextualTraits are either undefined or object\nconst{properties,traits,context}=rudderEvent;const{traits:contextualTraits}=context;checkForReservedElementsInObject(properties,'properties',logger);checkForReservedElementsInObject(traits,'traits',logger);checkForReservedElementsInObject(contextualTraits,'context.traits',logger);};/**\n * Overrides the top-level event properties with data from API options\n * @param rudderEvent Generated rudder event\n * @param options API options\n */const updateTopLevelEventElements=(rudderEvent,options)=>{if(options.anonymousId&&isString(options.anonymousId)){// eslint-disable-next-line no-param-reassign\nrudderEvent.anonymousId=options.anonymousId;}if(isObjectLiteralAndNotNull(options.integrations)){// eslint-disable-next-line no-param-reassign\nrudderEvent.integrations=options.integrations;}if(options.originalTimestamp&&isString(options.originalTimestamp)){// eslint-disable-next-line no-param-reassign\nrudderEvent.originalTimestamp=options.originalTimestamp;}};/**\n * To merge the contextual information in API options with existing data\n * @param rudderContext Generated rudder event\n * @param options API options\n * @param logger Logger instance\n */const getMergedContext=(rudderContext,options,logger)=>{let context=rudderContext;Object.keys(options).forEach(key=>{if(!TOP_LEVEL_ELEMENTS.includes(key)&&!CONTEXT_RESERVED_ELEMENTS.includes(key)){if(key!=='context'){context=mergeDeepRight(context,{[key]:options[key]});}else if(!isUndefined(options[key])&&isObjectLiteralAndNotNull(options[key])){const tempContext={};Object.keys(options[key]).forEach(e=>{if(!CONTEXT_RESERVED_ELEMENTS.includes(e)){tempContext[e]=options[key][e];}});context=mergeDeepRight(context,{...tempContext});}else;}});return context;};/**\n * A function to determine whether SDK should use the integration option provided in load call\n * @returns boolean\n */const shouldUseGlobalIntegrationsConfigInEvents=()=>state.loadOptions.value.useGlobalIntegrationsConfigInEvents&&(isObjectLiteralAndNotNull(state.consents.postConsent.value?.integrations)||isObjectLiteralAndNotNull(state.nativeDestinations.loadOnlyIntegrations.value));/**\n * Updates rudder event object with data from the API options\n * @param rudderEvent Generated rudder event\n * @param options API options\n */const processOptions=(rudderEvent,options)=>{// Only allow object type for options\nif(isObjectLiteralAndNotNull(options)){updateTopLevelEventElements(rudderEvent,options);// eslint-disable-next-line no-param-reassign\nrudderEvent.context=getMergedContext(rudderEvent.context,options);}};/**\n * Returns the final integrations config for the event based on the global config and event's config\n * @param integrationsConfig Event's integrations config\n * @returns Final integrations config\n */const getEventIntegrationsConfig=integrationsConfig=>{let finalIntgConfig;if(shouldUseGlobalIntegrationsConfigInEvents()){finalIntgConfig=clone(state.consents.postConsent.value?.integrations??state.nativeDestinations.loadOnlyIntegrations.value);}else if(isObjectLiteralAndNotNull(integrationsConfig)){finalIntgConfig=integrationsConfig;}else {finalIntgConfig=DEFAULT_INTEGRATIONS_CONFIG;}return finalIntgConfig;};/**\n * Enrich the base event object with data from state and the API options\n * @param rudderEvent RudderEvent object\n * @param options API options\n * @param pageProps Page properties\n * @param logger logger\n * @returns Enriched RudderEvent object\n */const getEnrichedEvent=(rudderEvent,options,pageProps,logger)=>{const commonEventData={channel:CHANNEL,context:{traits:clone(state.session.userTraits.value),sessionId:state.session.sessionInfo.value.id||undefined,sessionStart:state.session.sessionInfo.value.sessionStart||undefined,// Add 'consentManagement' only if consent management is enabled\n...(state.consents.enabled.value&&{consentManagement:{deniedConsentIds:clone(state.consents.data.value.deniedConsentIds),allowedConsentIds:clone(state.consents.data.value.allowedConsentIds),provider:state.consents.provider.value,resolutionStrategy:state.consents.resolutionStrategy.value}}),'ua-ch':state.context['ua-ch'].value,app:state.context.app.value,library:state.context.library.value,userAgent:state.context.userAgent.value,os:state.context.os.value,locale:state.context.locale.value,screen:state.context.screen.value,campaign:extractUTMParameters(globalThis.location.href),page:getContextPageProperties(pageProps),timezone:state.context.timezone.value},originalTimestamp:getCurrentTimeFormatted(),integrations:DEFAULT_INTEGRATIONS_CONFIG,messageId:generateUUID(),userId:rudderEvent.userId||state.session.userId.value};if(!isStorageTypeValidForStoringData(state.storage.entries.value.anonymousId?.type)){// Generate new anonymous id for each request\ncommonEventData.anonymousId=generateAnonymousId();}else {// Type casting to string as the user session manager will take care of initializing the value\ncommonEventData.anonymousId=state.session.anonymousId.value;}// set truly anonymous tracking flag\nif(state.storage.trulyAnonymousTracking.value){commonEventData.context.trulyAnonymousTracking=true;}if(rudderEvent.type==='identify'){commonEventData.context.traits=state.storage.entries.value.userTraits?.type!==NO_STORAGE?clone(state.session.userTraits.value):rudderEvent.context.traits;}if(rudderEvent.type==='group'){if(rudderEvent.groupId||state.session.groupId.value){commonEventData.groupId=rudderEvent.groupId||state.session.groupId.value;}if(rudderEvent.traits||state.session.groupTraits.value){commonEventData.traits=state.storage.entries.value.groupTraits?.type!==NO_STORAGE?clone(state.session.groupTraits.value):rudderEvent.traits;}}const processedEvent=mergeDeepRight(rudderEvent,commonEventData);// Set the default values for the event properties\n// matching with v1.1 payload\nif(processedEvent.event===undefined){processedEvent.event=null;}if(processedEvent.properties===undefined){processedEvent.properties=null;}processOptions(processedEvent,options);checkForReservedElements(processedEvent,logger);// Update the integrations config for the event\nprocessedEvent.integrations=getEventIntegrationsConfig(processedEvent.integrations);return processedEvent;};\n\nclass RudderEventFactory{constructor(logger){this.logger=logger;}/**\n   * Generate a 'page' event based on the user-input fields\n   * @param category Page's category\n   * @param name Page name\n   * @param properties Page properties\n   * @param options API options\n   */generatePageEvent(category,name,properties,options){let props=properties??{};props.name=name;props.category=category;props=getUpdatedPageProperties(props,options);const pageEvent={properties:props,name,category,type:'page'};return getEnrichedEvent(pageEvent,options,props,this.logger);}/**\n   * Generate a 'track' event based on the user-input fields\n   * @param event The event name\n   * @param properties Event properties\n   * @param options API options\n   */generateTrackEvent(event,properties,options){const trackEvent={properties,event,type:'track'};return getEnrichedEvent(trackEvent,options,undefined,this.logger);}/**\n   * Generate an 'identify' event based on the user-input fields\n   * @param userId New user ID\n   * @param traits new traits\n   * @param options API options\n   */generateIdentifyEvent(userId,traits,options){const identifyEvent={userId,type:'identify',context:{traits}};return getEnrichedEvent(identifyEvent,options,undefined,this.logger);}/**\n   * Generate an 'alias' event based on the user-input fields\n   * @param to New user ID\n   * @param from Old user ID\n   * @param options API options\n   */generateAliasEvent(to,from,options){const aliasEvent={previousId:from,type:'alias'};const enrichedEvent=getEnrichedEvent(aliasEvent,options,undefined,this.logger);// override the User ID from the API inputs\nenrichedEvent.userId=to??enrichedEvent.userId;return enrichedEvent;}/**\n   * Generate a 'group' event based on the user-input fields\n   * @param groupId New group ID\n   * @param traits new group traits\n   * @param options API options\n   */generateGroupEvent(groupId,traits,options){const groupEvent={type:'group'};if(groupId){groupEvent.groupId=groupId;}if(traits){groupEvent.traits=traits;}return getEnrichedEvent(groupEvent,options,undefined,this.logger);}/**\n   * Generates a new RudderEvent object based on the user-input fields\n   * @param event API event parameters object\n   * @returns A RudderEvent object\n   */create(event){let eventObj;switch(event.type){case'page':eventObj=this.generatePageEvent(event.category,event.name,event.properties,event.options);break;case'track':eventObj=this.generateTrackEvent(event.name,event.properties,event.options);break;case'identify':eventObj=this.generateIdentifyEvent(event.userId,event.traits,event.options);break;case'alias':eventObj=this.generateAliasEvent(event.to,event.from,event.options);break;case'group':eventObj=this.generateGroupEvent(event.groupId,event.traits,event.options);break;}return eventObj;}}\n\n/**\n * A service to generate valid event payloads and queue them for processing\n */class EventManager{/**\n   *\n   * @param eventRepository Event repository instance\n   * @param userSessionManager UserSession Manager instance\n   * @param errorHandler Error handler object\n   * @param logger Logger object\n   */constructor(eventRepository,userSessionManager,errorHandler,logger){this.eventRepository=eventRepository;this.userSessionManager=userSessionManager;this.errorHandler=errorHandler;this.logger=logger;this.eventFactory=new RudderEventFactory(this.logger);this.onError=this.onError.bind(this);}/**\n   * Initializes the event manager\n   */init(){this.eventRepository.init();}resume(){this.eventRepository.resume();}/**\n   * Consumes a new incoming event\n   * @param event Incoming event data\n   */addEvent(event){this.userSessionManager.refreshSession();const rudderEvent=this.eventFactory.create(event);if(rudderEvent){this.eventRepository.enqueue(rudderEvent,event.callback);}else {this.onError(new Error(EVENT_OBJECT_GENERATION_ERROR));}}/**\n   * Handles error\n   * @param error The error object\n   */onError(error,customMessage,shouldAlwaysThrow){if(this.errorHandler){this.errorHandler.onError(error,EVENT_MANAGER,customMessage,shouldAlwaysThrow);}else {throw error;}}}\n\nclass UserSessionManager{constructor(errorHandler,logger,pluginsManager,storeManager,httpClient){this.storeManager=storeManager;this.pluginsManager=pluginsManager;this.logger=logger;this.errorHandler=errorHandler;this.httpClient=httpClient;this.onError=this.onError.bind(this);this.serverSideCookieDebounceFuncs={};}/**\n   * Initialize User session with values from storage\n   */init(){this.syncStorageDataToState();// Register the effect to sync with storage\nthis.registerEffects();}syncStorageDataToState(){this.migrateStorageIfNeeded();this.migrateDataFromPreviousStorage();// get the values from storage and set it again\nthis.setUserId(this.getUserId());this.setUserTraits(this.getUserTraits());this.setGroupId(this.getGroupId());this.setGroupTraits(this.getGroupTraits());const{externalAnonymousIdCookieName,anonymousIdOptions}=state.loadOptions.value;let externalAnonymousId;if(isDefinedAndNotNull(externalAnonymousIdCookieName)&&typeof externalAnonymousIdCookieName==='string'){externalAnonymousId=this.getExternalAnonymousIdByCookieName(externalAnonymousIdCookieName);}this.setAnonymousId(externalAnonymousId??this.getAnonymousId(anonymousIdOptions));this.setAuthToken(this.getAuthToken());this.setInitialReferrerInfo();this.configureSessionTracking();}configureSessionTracking(){let sessionInfo=this.getSessionInfo();if(this.isPersistenceEnabledForStorageEntry('sessionInfo')){const configuredSessionTrackingInfo=this.getConfiguredSessionTrackingInfo();const initialSessionInfo=sessionInfo??defaultSessionConfiguration;sessionInfo={...initialSessionInfo,...configuredSessionTrackingInfo,autoTrack:configuredSessionTrackingInfo.autoTrack&&initialSessionInfo.manualTrack!==true};}state.session.sessionInfo.value=this.isPersistenceEnabledForStorageEntry('sessionInfo')?sessionInfo:DEFAULT_USER_SESSION_VALUES.sessionInfo;// If auto session tracking is enabled start the session tracking\nif(state.session.sessionInfo.value.autoTrack){this.startOrRenewAutoTracking(state.session.sessionInfo.value);}}setInitialReferrerInfo(){const persistedInitialReferrer=this.getInitialReferrer();const persistedInitialReferringDomain=this.getInitialReferringDomain();if(persistedInitialReferrer&&persistedInitialReferringDomain){this.setInitialReferrer(persistedInitialReferrer);this.setInitialReferringDomain(persistedInitialReferringDomain);}else {const initialReferrer=persistedInitialReferrer||getReferrer();this.setInitialReferrer(initialReferrer);this.setInitialReferringDomain(getReferringDomain(initialReferrer));}}isPersistenceEnabledForStorageEntry(entryName){return isStorageTypeValidForStoringData(state.storage.entries.value[entryName]?.type);}migrateDataFromPreviousStorage(){const entries=state.storage.entries.value;const storageTypesForMigration=[COOKIE_STORAGE,LOCAL_STORAGE,SESSION_STORAGE];Object.keys(entries).forEach(entry=>{const key=entry;const currentStorage=entries[key]?.type;const curStore=this.storeManager?.getStore(storageClientDataStoreNameMap[currentStorage]);if(curStore){storageTypesForMigration.forEach(storage=>{const store=this.storeManager?.getStore(storageClientDataStoreNameMap[storage]);if(store&&storage!==currentStorage){const value=store.get(COOKIE_KEYS[key]);if(isDefinedNotNullAndNotEmptyString(value)){curStore.set(COOKIE_KEYS[key],value);}store.remove(COOKIE_KEYS[key]);}});}});}migrateStorageIfNeeded(){if(!state.storage.migrate.value){return;}const persistentStoreNames=[CLIENT_DATA_STORE_COOKIE,CLIENT_DATA_STORE_LS,CLIENT_DATA_STORE_SESSION];const stores=[];persistentStoreNames.forEach(storeName=>{const store=this.storeManager?.getStore(storeName);if(store){stores.push(store);}});Object.keys(COOKIE_KEYS).forEach(storageKey=>{const storageEntry=COOKIE_KEYS[storageKey];stores.forEach(store=>{const migratedVal=this.pluginsManager?.invokeSingle('storage.migrate',storageEntry,store.engine,this.errorHandler,this.logger);// Skip setting the value if it is null or undefined\n// as those values indicate there is no need for migration or\n// migration failed\nif(!isNullOrUndefined(migratedVal)){store.set(storageEntry,migratedVal);}});});}getConfiguredSessionTrackingInfo(){let autoTrack=state.loadOptions.value.sessions?.autoTrack!==false;// Do not validate any further if autoTrack is disabled\nif(!autoTrack){return {autoTrack};}let timeout;const configuredSessionTimeout=state.loadOptions.value.sessions?.timeout;if(!isPositiveInteger(configuredSessionTimeout)){this.logger?.warn(TIMEOUT_NOT_NUMBER_WARNING(USER_SESSION_MANAGER,configuredSessionTimeout,DEFAULT_SESSION_TIMEOUT_MS));timeout=DEFAULT_SESSION_TIMEOUT_MS;}else {timeout=configuredSessionTimeout;}if(timeout===0){this.logger?.warn(TIMEOUT_ZERO_WARNING(USER_SESSION_MANAGER));autoTrack=false;}// In case user provides a timeout value greater than 0 but less than 10 seconds SDK will show a warning\n// and will proceed with it\nif(timeout>0&&timeout<MIN_SESSION_TIMEOUT_MS){this.logger?.warn(TIMEOUT_NOT_RECOMMENDED_WARNING(USER_SESSION_MANAGER,timeout,MIN_SESSION_TIMEOUT_MS));}return {timeout,autoTrack};}/**\n   * Handles error\n   * @param error The error object\n   */onError(error,customMessage){if(this.errorHandler){this.errorHandler.onError(error,USER_SESSION_MANAGER,customMessage);}else {throw error;}}/**\n   * A function to encrypt the cookie value and return the encrypted data\n   * @param cookiesData\n   * @param store\n   * @returns\n   */getEncryptedCookieData(cookiesData,store){const encryptedCookieData=[];cookiesData.forEach(cData=>{const encryptedValue=store?.encrypt(stringifyWithoutCircular(cData.value,false,[],this.logger));if(isDefinedAndNotNull(encryptedValue)){encryptedCookieData.push({name:cData.name,value:encryptedValue});}});return encryptedCookieData;}/**\n   * A function that makes request to data service to set the cookie\n   * @param encryptedCookieData\n   * @param callback\n   */makeRequestToSetCookie(encryptedCookieData,callback){this.httpClient?.getAsyncData({url:state.serverCookies.dataServiceUrl.value,options:{method:'POST',data:stringifyWithoutCircular({reqType:'setCookies',workspaceId:state.source.value?.workspaceId,data:{options:{maxAge:state.storage.cookie.value?.maxage,path:state.storage.cookie.value?.path,domain:state.storage.cookie.value?.domain,sameSite:state.storage.cookie.value?.samesite,secure:state.storage.cookie.value?.secure,expires:state.storage.cookie.value?.expires},cookies:encryptedCookieData}}),sendRawData:true,withCredentials:true},isRawResponse:true,callback});}/**\n   * A function to make an external request to set the cookie from server side\n   * @param key       cookie name\n   * @param value     encrypted cookie value\n   */setServerSideCookies(cookiesData,cb,store){try{// encrypt cookies values\nconst encryptedCookieData=this.getEncryptedCookieData(cookiesData,store);if(encryptedCookieData.length>0){// make request to data service to set the cookie from server side\nthis.makeRequestToSetCookie(encryptedCookieData,(res,details)=>{if(details?.xhr?.status===200){cookiesData.forEach(cData=>{const cookieValue=store?.get(cData.name);const before=stringifyWithoutCircular(cData.value,false,[]);const after=stringifyWithoutCircular(cookieValue,false,[]);if(after!==before){this.logger?.error(FAILED_SETTING_COOKIE_FROM_SERVER_ERROR(cData.name));if(cb){cb(cData.name,cData.value);}}});}else {this.logger?.error(DATA_SERVER_REQUEST_FAIL_ERROR(details?.xhr?.status));cookiesData.forEach(each=>{if(cb){cb(each.name,each.value);}});}});}}catch(e){this.onError(e,FAILED_SETTING_COOKIE_FROM_SERVER_GLOBAL_ERROR);cookiesData.forEach(each=>{if(cb){cb(each.name,each.value);}});}}/**\n   * A function to sync values in storage\n   * @param sessionKey\n   * @param value\n   */syncValueToStorage(sessionKey,value){const entries=state.storage.entries.value;const storageType=entries[sessionKey]?.type;if(isStorageTypeValidForStoringData(storageType)){const curStore=this.storeManager?.getStore(storageClientDataStoreNameMap[storageType]);const key=entries[sessionKey]?.key;if(value&&(isString(value)||isNonEmptyObject(value))){// if useServerSideCookies load option is set to true\n// set the cookie from server side\nif(state.serverCookies.isEnabledServerSideCookies.value&&storageType===COOKIE_STORAGE){if(this.serverSideCookieDebounceFuncs[sessionKey]){globalThis.clearTimeout(this.serverSideCookieDebounceFuncs[sessionKey]);}this.serverSideCookieDebounceFuncs[sessionKey]=globalThis.setTimeout(()=>{this.setServerSideCookies([{name:key,value}],(cookieName,cookieValue)=>{curStore?.set(cookieName,cookieValue);},curStore);},SERVER_SIDE_COOKIES_DEBOUNCE_TIME);}else {curStore?.set(key,value);}}else {curStore?.remove(key);}}}/**\n   * Function to update storage whenever state value changes\n   */registerEffects(){// This will work as long as the user session entry key names are same as the state keys\nUSER_SESSION_KEYS.forEach(sessionKey=>{E(()=>{this.syncValueToStorage(sessionKey,state.session[sessionKey].value);});});}/**\n   * Sets anonymous id in the following precedence:\n   *\n   * 1. anonymousId: Id directly provided to the function.\n   * 2. rudderAmpLinkerParam: value generated from linker query parm (rudderstack)\n   *    using parseLinker util.\n   * 3. generateUUID: A new unique id is generated and assigned.\n   */setAnonymousId(anonymousId,rudderAmpLinkerParam){let finalAnonymousId=anonymousId;if(this.isPersistenceEnabledForStorageEntry('anonymousId')){if(!finalAnonymousId&&rudderAmpLinkerParam){const linkerPluginsResult=this.pluginsManager?.invokeSingle('userSession.anonymousIdGoogleLinker',rudderAmpLinkerParam);finalAnonymousId=linkerPluginsResult;}finalAnonymousId=finalAnonymousId||generateAnonymousId();}else {finalAnonymousId=DEFAULT_USER_SESSION_VALUES.anonymousId;}state.session.anonymousId.value=finalAnonymousId;}/**\n   * Fetches anonymousId\n   * @param options option to fetch it from external source\n   * @returns anonymousId\n   */getAnonymousId(options){const storage=state.storage.entries.value.anonymousId?.type;// fetch the anonymousId from storage\nif(isStorageTypeValidForStoringData(storage)){let persistedAnonymousId=this.getEntryValue('anonymousId');if(!persistedAnonymousId&&options){// fetch anonymousId from external source\nconst autoCapturedAnonymousId=this.pluginsManager?.invokeSingle('storage.getAnonymousId',getStorageEngine,options);persistedAnonymousId=autoCapturedAnonymousId;}state.session.anonymousId.value=persistedAnonymousId||generateAnonymousId();}return state.session.anonymousId.value;}getEntryValue(sessionKey){const entries=state.storage.entries.value;const storageType=entries[sessionKey]?.type;if(isStorageTypeValidForStoringData(storageType)){const store=this.storeManager?.getStore(storageClientDataStoreNameMap[storageType]);const storageKey=entries[sessionKey]?.key;return store?.get(storageKey)??null;}return null;}getExternalAnonymousIdByCookieName(key){const storageEngine=getStorageEngine(COOKIE_STORAGE);if(storageEngine?.isEnabled){return storageEngine.getItem(key)??null;}return null;}/**\n   * Fetches User Id\n   * @returns\n   */getUserId(){return this.getEntryValue('userId');}/**\n   * Fetches User Traits\n   * @returns\n   */getUserTraits(){return this.getEntryValue('userTraits');}/**\n   * Fetches Group Id\n   * @returns\n   */getGroupId(){return this.getEntryValue('groupId');}/**\n   * Fetches Group Traits\n   * @returns\n   */getGroupTraits(){return this.getEntryValue('groupTraits');}/**\n   * Fetches Initial Referrer\n   * @returns\n   */getInitialReferrer(){return this.getEntryValue('initialReferrer');}/**\n   * Fetches Initial Referring domain\n   * @returns\n   */getInitialReferringDomain(){return this.getEntryValue('initialReferringDomain');}/**\n   * Fetches session tracking information from storage\n   * @returns\n   */getSessionInfo(){return this.getEntryValue('sessionInfo');}/**\n   * Fetches auth token from storage\n   * @returns\n   */getAuthToken(){return this.getEntryValue('authToken');}/**\n   * If session is active it returns the sessionId\n   * @returns\n   */getSessionId(){const sessionInfo=this.getSessionInfo()??DEFAULT_USER_SESSION_VALUES.sessionInfo;if(sessionInfo.autoTrack&&!hasSessionExpired(sessionInfo.expiresAt)||sessionInfo.manualTrack){return sessionInfo.id??null;}return null;}/**\n   * A function to keep the session information up to date in the state\n   * before using it for building event payloads.\n   */refreshSession(){let sessionInfo=this.getSessionInfo()??DEFAULT_USER_SESSION_VALUES.sessionInfo;if(sessionInfo.autoTrack||sessionInfo.manualTrack){if(sessionInfo.autoTrack){this.startOrRenewAutoTracking(sessionInfo);sessionInfo=state.session.sessionInfo.value;}// Note that if sessionStart is false, then it's an active session.\n// So, we needn't update the session info.\n//\n// For other scenarios,\n// 1. If sessionStart is undefined, then it's a new session.\n//   Mark it as sessionStart.\n// 2. If sessionStart is true, then need to flip it for the future events.\nif(sessionInfo.sessionStart===undefined){sessionInfo={...sessionInfo,sessionStart:true};}else if(sessionInfo.sessionStart){sessionInfo={...sessionInfo,sessionStart:false};}}// Always write to state (in-turn to storage) to keep the session info up to date.\nstate.session.sessionInfo.value=sessionInfo;if(state.lifecycle.status.value!=='readyExecuted'){// Force update the storage as the 'effect' blocks are not getting triggered\n// when processing preload buffered requests\nthis.syncValueToStorage('sessionInfo',sessionInfo);}}/**\n   * Reset state values\n   * @param resetAnonymousId\n   * @param noNewSessionStart\n   * @returns\n   */reset(resetAnonymousId,noNewSessionStart){const{session}=state;const{manualTrack,autoTrack}=session.sessionInfo.value;r(()=>{session.userId.value=DEFAULT_USER_SESSION_VALUES.userId;session.userTraits.value=DEFAULT_USER_SESSION_VALUES.userTraits;session.groupId.value=DEFAULT_USER_SESSION_VALUES.groupId;session.groupTraits.value=DEFAULT_USER_SESSION_VALUES.groupTraits;session.authToken.value=DEFAULT_USER_SESSION_VALUES.authToken;if(resetAnonymousId){// This will generate a new anonymous ID\nthis.setAnonymousId();}if(noNewSessionStart){return;}if(autoTrack){session.sessionInfo.value=DEFAULT_USER_SESSION_VALUES.sessionInfo;this.startOrRenewAutoTracking(session.sessionInfo.value);}else if(manualTrack){this.startManualTrackingInternal();}});}/**\n   * Set user Id\n   * @param userId\n   */setUserId(userId){state.session.userId.value=this.isPersistenceEnabledForStorageEntry('userId')&&userId?userId:DEFAULT_USER_SESSION_VALUES.userId;}/**\n   * Set user traits\n   * @param traits\n   */setUserTraits(traits){state.session.userTraits.value=this.isPersistenceEnabledForStorageEntry('userTraits')&&traits?mergeDeepRight(state.session.userTraits.value??DEFAULT_USER_SESSION_VALUES.userTraits,traits):DEFAULT_USER_SESSION_VALUES.userTraits;}/**\n   * Set group Id\n   * @param groupId\n   */setGroupId(groupId){state.session.groupId.value=this.isPersistenceEnabledForStorageEntry('groupId')&&groupId?groupId:DEFAULT_USER_SESSION_VALUES.groupId;}/**\n   * Set group traits\n   * @param traits\n   */setGroupTraits(traits){state.session.groupTraits.value=this.isPersistenceEnabledForStorageEntry('groupTraits')&&traits?mergeDeepRight(state.session.groupTraits.value??DEFAULT_USER_SESSION_VALUES.groupTraits,traits):DEFAULT_USER_SESSION_VALUES.groupTraits;}/**\n   * Set initial referrer\n   * @param referrer\n   */setInitialReferrer(referrer){state.session.initialReferrer.value=this.isPersistenceEnabledForStorageEntry('initialReferrer')&&referrer?referrer:DEFAULT_USER_SESSION_VALUES.initialReferrer;}/**\n   * Set initial referring domain\n   * @param {String} referringDomain\n   */setInitialReferringDomain(referringDomain){state.session.initialReferringDomain.value=this.isPersistenceEnabledForStorageEntry('initialReferringDomain')&&referringDomain?referringDomain:DEFAULT_USER_SESSION_VALUES.initialReferringDomain;}/**\n   * A function to check for existing session details and depending on that create a new session\n   */startOrRenewAutoTracking(sessionInfo){if(hasSessionExpired(sessionInfo.expiresAt)){state.session.sessionInfo.value=generateAutoTrackingSession(sessionInfo.timeout);}else {const timestamp=Date.now();const timeout=sessionInfo.timeout;state.session.sessionInfo.value=mergeDeepRight(sessionInfo,{expiresAt:timestamp+timeout// set the expiry time of the session\n});}}/**\n   * A function method to start a manual session\n   * @param {number} id     session identifier\n   * @returns\n   */start(id){state.session.sessionInfo.value=generateManualTrackingSession(id,this.logger);}/**\n   * An internal function to start manual session\n   */startManualTrackingInternal(){this.start(Date.now());}/**\n   * A public method to end an ongoing session.\n   */end(){state.session.sessionInfo.value=DEFAULT_USER_SESSION_VALUES.sessionInfo;}/**\n   * Set auth token\n   * @param userId\n   */setAuthToken(token){state.session.authToken.value=this.isPersistenceEnabledForStorageEntry('authToken')&&token?token:DEFAULT_USER_SESSION_VALUES.authToken;}}\n\n/**\n * Plugins to be loaded in the plugins loadOption is not defined\n */const defaultOptionalPluginsList=['BeaconQueue','Bugsnag','CustomConsentManager','DeviceModeDestinations','DeviceModeTransformation','ErrorReporting','ExternalAnonymousId','GoogleLinker','KetchConsentManager','NativeDestinationQueue','OneTrustConsentManager','StorageEncryption','StorageEncryptionLegacy','StorageMigrator','XhrQueue'];\n\nconst normalizeLoadOptions=(loadOptionsFromState,loadOptions)=>{// TODO: Maybe add warnings for invalid values\nconst normalizedLoadOpts=clone(loadOptions);if(!isString(normalizedLoadOpts.setCookieDomain)){delete normalizedLoadOpts.setCookieDomain;}const cookieSameSiteValues=['Strict','Lax','None'];if(!cookieSameSiteValues.includes(normalizedLoadOpts.sameSiteCookie)){delete normalizedLoadOpts.sameSiteCookie;}normalizedLoadOpts.secureCookie=normalizedLoadOpts.secureCookie===true;const uaChTrackLevels=['none','default','full'];if(!uaChTrackLevels.includes(normalizedLoadOpts.uaChTrackLevel)){delete normalizedLoadOpts.uaChTrackLevel;}if(!isObjectLiteralAndNotNull(normalizedLoadOpts.integrations)){delete normalizedLoadOpts.integrations;}normalizedLoadOpts.plugins=normalizedLoadOpts.plugins??defaultOptionalPluginsList;normalizedLoadOpts.useGlobalIntegrationsConfigInEvents=normalizedLoadOpts.useGlobalIntegrationsConfigInEvents===true;normalizedLoadOpts.bufferDataPlaneEventsUntilReady=normalizedLoadOpts.bufferDataPlaneEventsUntilReady===true;normalizedLoadOpts.sendAdblockPage=normalizedLoadOpts.sendAdblockPage===true;normalizedLoadOpts.useServerSideCookies=normalizedLoadOpts.useServerSideCookies===true;if(normalizedLoadOpts.dataServiceEndpoint&&typeof normalizedLoadOpts.dataServiceEndpoint!=='string'){delete normalizedLoadOpts.dataServiceEndpoint;}if(!isObjectLiteralAndNotNull(normalizedLoadOpts.sendAdblockPageOptions)){delete normalizedLoadOpts.sendAdblockPageOptions;}if(!isDefined(normalizedLoadOpts.loadIntegration)){delete normalizedLoadOpts.loadIntegration;}else {normalizedLoadOpts.loadIntegration=normalizedLoadOpts.loadIntegration===true;}if(!isObjectLiteralAndNotNull(normalizedLoadOpts.storage)){delete normalizedLoadOpts.storage;}else {normalizedLoadOpts.storage=removeUndefinedAndNullValues(normalizedLoadOpts.storage);normalizedLoadOpts.storage.migrate=normalizedLoadOpts.storage?.migrate===true;}if(!isObjectLiteralAndNotNull(normalizedLoadOpts.beaconQueueOptions)){delete normalizedLoadOpts.beaconQueueOptions;}else {normalizedLoadOpts.beaconQueueOptions=removeUndefinedAndNullValues(normalizedLoadOpts.beaconQueueOptions);}if(!isObjectLiteralAndNotNull(normalizedLoadOpts.destinationsQueueOptions)){delete normalizedLoadOpts.destinationsQueueOptions;}else {normalizedLoadOpts.destinationsQueueOptions=removeUndefinedAndNullValues(normalizedLoadOpts.destinationsQueueOptions);}if(!isObjectLiteralAndNotNull(normalizedLoadOpts.queueOptions)){delete normalizedLoadOpts.queueOptions;}else {normalizedLoadOpts.queueOptions=removeUndefinedAndNullValues(normalizedLoadOpts.queueOptions);}normalizedLoadOpts.lockIntegrationsVersion=normalizedLoadOpts.lockIntegrationsVersion===true;normalizedLoadOpts.lockPluginsVersion=normalizedLoadOpts.lockPluginsVersion===true;if(!isNumber(normalizedLoadOpts.dataPlaneEventsBufferTimeout)){delete normalizedLoadOpts.dataPlaneEventsBufferTimeout;}if(!isObjectLiteralAndNotNull(normalizedLoadOpts.storage?.cookie)){delete normalizedLoadOpts.storage?.cookie;}else {normalizedLoadOpts.storage.cookie=removeUndefinedAndNullValues(normalizedLoadOpts.storage?.cookie);}if(!isObjectLiteralAndNotNull(normalizedLoadOpts.preConsent)){delete normalizedLoadOpts.preConsent;}else {normalizedLoadOpts.preConsent=removeUndefinedAndNullValues(normalizedLoadOpts.preConsent);}const mergedLoadOptions=mergeDeepRight(loadOptionsFromState,normalizedLoadOpts);return mergedLoadOptions;};\n\nconst DATA_PLANE_QUEUE_EXT_POINT_PREFIX='dataplaneEventsQueue';const DESTINATIONS_QUEUE_EXT_POINT_PREFIX='destinationsEventsQueue';const DMT_EXT_POINT_PREFIX='transformEvent';\n\n/**\n * Filters and returns the user supplied integrations config that should take preference over the destination specific integrations config\n * @param eventIntgConfig User supplied integrations config at event level\n * @param destinationsIntgConfig Cumulative integrations config from all destinations\n * @returns Filtered user supplied integrations config\n */const getOverriddenIntegrationOptions=(eventIntgConfig,destinationsIntgConfig)=>Object.keys(eventIntgConfig).filter(intgName=>eventIntgConfig[intgName]!==true||!destinationsIntgConfig[intgName]).reduce((obj,key)=>{const retVal=clone(obj);retVal[key]=eventIntgConfig[key];return retVal;},{});/**\n * Returns the event object with final integrations config\n * @param event RudderEvent object\n * @param state Application state\n * @returns Mutated event with final integrations config\n */const getFinalEvent=(event,state)=>{const finalEvent=clone(event);// Merge the destination specific integrations config with the event's integrations config\n// In general, the preference is given to the event's integrations config\nconst eventIntgConfig=event.integrations??DEFAULT_INTEGRATIONS_CONFIG;const destinationsIntgConfig=state.nativeDestinations.integrationsConfig.value;const overriddenIntgOpts=getOverriddenIntegrationOptions(eventIntgConfig,destinationsIntgConfig);finalEvent.integrations=mergeDeepRight(destinationsIntgConfig,overriddenIntgOpts);return finalEvent;};const shouldBufferEventsForPreConsent=state=>state.consents.preConsent.value.enabled&&state.consents.preConsent.value.events?.delivery==='buffer'&&(state.consents.preConsent.value.storage?.strategy==='session'||state.consents.preConsent.value.storage?.strategy==='none');\n\n/**\n * Event repository class responsible for queuing events for further processing and delivery\n */class EventRepository{/**\n   *\n   * @param pluginsManager Plugins manager instance\n   * @param storeManager Store Manager instance\n   * @param errorHandler Error handler object\n   * @param logger Logger object\n   */constructor(pluginsManager,storeManager,errorHandler,logger){this.pluginsManager=pluginsManager;this.errorHandler=errorHandler;this.logger=logger;this.httpClient=new HttpClient(errorHandler,logger);this.storeManager=storeManager;this.onError=this.onError.bind(this);}/**\n   * Initializes the event repository\n   */init(){try{this.dataplaneEventsQueue=this.pluginsManager.invokeSingle(`${DATA_PLANE_QUEUE_EXT_POINT_PREFIX}.init`,state,this.httpClient,this.storeManager,this.errorHandler,this.logger);}catch(e){this.onError(e,DATAPLANE_PLUGIN_INITIALIZE_ERROR);}try{this.dmtEventsQueue=this.pluginsManager.invokeSingle(`${DMT_EXT_POINT_PREFIX}.init`,state,this.pluginsManager,this.httpClient,this.storeManager,this.errorHandler,this.logger);}catch(e){this.onError(e,DMT_PLUGIN_INITIALIZE_ERROR);}try{this.destinationsEventsQueue=this.pluginsManager.invokeSingle(`${DESTINATIONS_QUEUE_EXT_POINT_PREFIX}.init`,state,this.pluginsManager,this.storeManager,this.dmtEventsQueue,this.errorHandler,this.logger);}catch(e){this.onError(e,NATIVE_DEST_PLUGIN_INITIALIZE_ERROR);}// Start the queue once the client destinations are ready\nE(()=>{if(state.nativeDestinations.clientDestinationsReady.value===true){this.destinationsEventsQueue?.start();this.dmtEventsQueue?.start();}});const bufferEventsBeforeConsent=shouldBufferEventsForPreConsent(state);// Start the queue processing only when the destinations are ready or hybrid mode destinations exist\n// However, events will be enqueued for now.\n// At the time of processing the events, the integrations config data from destinations\n// is merged into the event object\nlet timeoutId;E(()=>{const shouldBufferDpEvents=state.loadOptions.value.bufferDataPlaneEventsUntilReady===true&&state.nativeDestinations.clientDestinationsReady.value===false;const hybridDestExist=state.nativeDestinations.activeDestinations.value.some(dest=>isHybridModeDestination(dest));if((hybridDestExist===false||shouldBufferDpEvents===false)&&!bufferEventsBeforeConsent&&this.dataplaneEventsQueue?.scheduleTimeoutActive!==true){globalThis.clearTimeout(timeoutId);this.dataplaneEventsQueue?.start();}});// Force start the data plane events queue processing after a timeout\nif(state.loadOptions.value.bufferDataPlaneEventsUntilReady===true){timeoutId=globalThis.setTimeout(()=>{if(this.dataplaneEventsQueue?.scheduleTimeoutActive!==true){this.dataplaneEventsQueue?.start();}},state.loadOptions.value.dataPlaneEventsBufferTimeout);}}resume(){if(this.dataplaneEventsQueue?.scheduleTimeoutActive!==true){if(state.consents.postConsent.value.discardPreConsentEvents){this.dataplaneEventsQueue?.clear();this.destinationsEventsQueue?.clear();}this.dataplaneEventsQueue?.start();}}/**\n   * Enqueues the event for processing\n   * @param event RudderEvent object\n   * @param callback API callback function\n   */enqueue(event,callback){let dpQEvent;try{dpQEvent=getFinalEvent(event,state);this.pluginsManager.invokeSingle(`${DATA_PLANE_QUEUE_EXT_POINT_PREFIX}.enqueue`,state,this.dataplaneEventsQueue,dpQEvent,this.errorHandler,this.logger);}catch(e){this.onError(e,DATAPLANE_PLUGIN_ENQUEUE_ERROR);}try{const dQEvent=clone(event);this.pluginsManager.invokeSingle(`${DESTINATIONS_QUEUE_EXT_POINT_PREFIX}.enqueue`,state,this.destinationsEventsQueue,dQEvent,this.errorHandler,this.logger);}catch(e){this.onError(e,NATIVE_DEST_PLUGIN_ENQUEUE_ERROR);}// Invoke the callback if it exists\ntry{// Using the event sent to the data plane queue here\n// to ensure the mutated (if any) event is sent to the callback\ncallback?.(dpQEvent);}catch(error){this.onError(error,API_CALLBACK_INVOKE_ERROR);}}/**\n   * Handles error\n   * @param error The error object\n   * @param customMessage a message\n   * @param shouldAlwaysThrow if it should throw or use logger\n   */onError(error,customMessage,shouldAlwaysThrow){if(this.errorHandler){this.errorHandler.onError(error,EVENT_REPOSITORY,customMessage,shouldAlwaysThrow);}else {throw error;}}}\n\nconst dispatchSDKEvent=event=>{const customEvent=new CustomEvent(event,{detail:{analyticsInstance:globalThis.rudderanalytics},bubbles:true,cancelable:true,composed:true});globalThis.document.dispatchEvent(customEvent);};\n\n/*\n * Analytics class with lifecycle based on state ad user triggered events\n */class Analytics{/**\n   * Initialize services and components or use default ones if singletons\n   */constructor(){this.preloadBuffer=new BufferQueue();this.initialized=false;this.errorHandler=defaultErrorHandler;this.logger=defaultLogger;this.externalSrcLoader=new ExternalSrcLoader(this.errorHandler,this.logger);this.capabilitiesManager=new CapabilitiesManager(this.errorHandler,this.logger);this.httpClient=defaultHttpClient;}/**\n   * Start application lifecycle if not already started\n   */load(writeKey,dataPlaneUrl,loadOptions={}){if(state.lifecycle.status.value){return;}let clonedDataPlaneUrl=clone(dataPlaneUrl);let clonedLoadOptions=clone(loadOptions);// dataPlaneUrl is not provided\nif(isObjectAndNotNull(dataPlaneUrl)){clonedLoadOptions=dataPlaneUrl;clonedDataPlaneUrl=undefined;}// Set initial state values\nr(()=>{state.lifecycle.writeKey.value=writeKey;state.lifecycle.dataPlaneUrl.value=clonedDataPlaneUrl;state.loadOptions.value=normalizeLoadOptions(state.loadOptions.value,clonedLoadOptions);state.lifecycle.status.value='mounted';});// set log level as early as possible\nif(state.loadOptions.value.logLevel){this.logger?.setMinLogLevel(state.loadOptions.value.logLevel);}// Expose state to global objects\nsetExposedGlobal('state',state,writeKey);// Configure initial config of any services or components here\n// State application lifecycle\nthis.startLifecycle();}// Start lifecycle methods\n/**\n   * Orchestrate the lifecycle of the application phases/status\n   */startLifecycle(){E(()=>{try{switch(state.lifecycle.status.value){case'mounted':this.onMounted();break;case'browserCapabilitiesReady':this.onBrowserCapabilitiesReady();break;case'configured':this.onConfigured();break;case'pluginsLoading':break;case'pluginsReady':this.onPluginsReady();break;case'initialized':this.onInitialized();break;case'loaded':this.onLoaded();break;case'destinationsLoading':break;case'destinationsReady':this.onDestinationsReady();break;case'ready':this.onReady();break;case'readyExecuted':default:break;}}catch(err){const issue='Failed to load the SDK';this.errorHandler.onError(getMutatedError(err,issue),ANALYTICS_CORE);}});}onBrowserCapabilitiesReady(){// initialize the preloaded events enqueuing\nretrievePreloadBufferEvents(this);this.prepareInternalServices();this.loadConfig();}onLoaded(){this.processBufferedEvents();// Short-circuit the life cycle and move to the ready state if pre-consent behavior is enabled\nif(state.consents.preConsent.value.enabled===true){state.lifecycle.status.value='ready';}else {this.loadDestinations();}}/**\n   * Load browser polyfill if required\n   */onMounted(){this.capabilitiesManager.init();}/**\n   * Enqueue in SDK preload buffer events, used from preloadBuffer component\n   */enqueuePreloadBufferEvents(bufferedEvents){if(Array.isArray(bufferedEvents)){bufferedEvents.forEach(bufferedEvent=>this.preloadBuffer.enqueue(clone(bufferedEvent)));}}/**\n   * Process the buffer preloaded events by passing their arguments to the respective facade methods\n   */processDataInPreloadBuffer(){while(this.preloadBuffer.size()>0){const eventToProcess=this.preloadBuffer.dequeue();if(eventToProcess){consumePreloadBufferedEvent([...eventToProcess],this);}}}prepareInternalServices(){this.pluginsManager=new PluginsManager(defaultPluginEngine,this.errorHandler,this.logger);this.storeManager=new StoreManager(this.pluginsManager,this.errorHandler,this.logger);this.configManager=new ConfigManager(this.httpClient,this.errorHandler,this.logger);this.userSessionManager=new UserSessionManager(this.errorHandler,this.logger,this.pluginsManager,this.storeManager,this.httpClient);this.eventRepository=new EventRepository(this.pluginsManager,this.storeManager,this.errorHandler,this.logger);this.eventManager=new EventManager(this.eventRepository,this.userSessionManager,this.errorHandler,this.logger);}/**\n   * Load configuration\n   */loadConfig(){if(state.lifecycle.writeKey.value){this.httpClient.setAuthHeader(state.lifecycle.writeKey.value);}this.configManager?.init();}/**\n   * Initialize the storage and event queue\n   */onPluginsReady(){this.errorHandler.init(this.externalSrcLoader);// Initialize storage\nthis.storeManager?.init();this.userSessionManager?.init();// Initialize the appropriate consent manager plugin\nif(state.consents.enabled.value&&!state.consents.initialized.value){this.pluginsManager?.invokeSingle(`consentManager.init`,state,this.logger);if(state.consents.preConsent.value.enabled===false){this.pluginsManager?.invokeSingle(`consentManager.updateConsentsInfo`,state,this.storeManager,this.logger);}}// Initialize event manager\nthis.eventManager?.init();// Mark the SDK as initialized\nstate.lifecycle.status.value='initialized';}/**\n   * Load plugins\n   */onConfigured(){this.pluginsManager?.init();// TODO: are we going to enable custom plugins to be passed as load options?\n// registerCustomPlugins(state.loadOptions.value.customPlugins);\n}/**\n   * Trigger onLoaded callback if any is provided in config & emit initialised event\n   */onInitialized(){// Process any preloaded events\nthis.processDataInPreloadBuffer();// TODO: we need to avoid passing the window object to the callback function\n// as this will prevent us from supporting multiple SDK instances in the same page\n// Execute onLoaded callback if provided in load options\nif(isFunction(state.loadOptions.value.onLoaded)){state.loadOptions.value.onLoaded(globalThis.rudderanalytics);}// Set lifecycle state\nr(()=>{state.lifecycle.loaded.value=true;state.lifecycle.status.value='loaded';});this.initialized=true;// Emit an event to use as substitute to the onLoaded callback\ndispatchSDKEvent('RSA_Initialised');}/**\n   * Emit ready event\n   */ // eslint-disable-next-line class-methods-use-this\nonReady(){state.lifecycle.status.value='readyExecuted';state.eventBuffer.readyCallbacksArray.value.forEach(callback=>{try{callback();}catch(err){this.errorHandler.onError(err,ANALYTICS_CORE,READY_CALLBACK_INVOKE_ERROR);}});// Emit an event to use as substitute to the ready callback\ndispatchSDKEvent('RSA_Ready');}/**\n   * Consume preloaded events buffer\n   */processBufferedEvents(){// This logic has been intentionally implemented without a simple\n// for-loop as the individual events that are processed may\n// add more events to the buffer (this is needed for the consent API)\nlet bufferedEvents=state.eventBuffer.toBeProcessedArray.value;while(bufferedEvents.length>0){const bufferedEvent=bufferedEvents.shift();state.eventBuffer.toBeProcessedArray.value=bufferedEvents;if(bufferedEvent){const methodName=bufferedEvent[0];if(isFunction(this[methodName])){// Send additional arg 'true' to indicate that this is a buffered invocation\nthis[methodName](...bufferedEvent.slice(1),true);}}bufferedEvents=state.eventBuffer.toBeProcessedArray.value;}}/**\n   * Load device mode destinations\n   */loadDestinations(){if(state.nativeDestinations.clientDestinationsReady.value){return;}// Set in state the desired activeDestinations to inject in DOM\nthis.pluginsManager?.invokeSingle('nativeDestinations.setActiveDestinations',state,this.pluginsManager,this.errorHandler,this.logger);const totalDestinationsToLoad=state.nativeDestinations.activeDestinations.value.length;if(totalDestinationsToLoad===0){state.lifecycle.status.value='destinationsReady';return;}// Start loading native integration scripts and create instances\nstate.lifecycle.status.value='destinationsLoading';this.pluginsManager?.invokeSingle('nativeDestinations.load',state,this.externalSrcLoader,this.errorHandler,this.logger);// Progress to next lifecycle phase if all native destinations are initialized or failed\nE(()=>{const areAllDestinationsReady=totalDestinationsToLoad===0||state.nativeDestinations.initializedDestinations.value.length+state.nativeDestinations.failedDestinations.value.length===totalDestinationsToLoad;if(areAllDestinationsReady){r(()=>{state.lifecycle.status.value='destinationsReady';state.nativeDestinations.clientDestinationsReady.value=true;});}});}/**\n   * Move to the ready state\n   */ // eslint-disable-next-line class-methods-use-this\nonDestinationsReady(){// May be do any destination specific actions here\n// Mark the ready status if not already done\nif(state.lifecycle.status.value!=='ready'){state.lifecycle.status.value='ready';}}// End lifecycle methods\n// Start consumer exposed methods\nready(callback,isBufferedInvocation=false){const type='ready';if(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type,callback]];return;}this.errorHandler.leaveBreadcrumb(`New ${type} invocation`);if(!isFunction(callback)){this.logger.error(READY_API_CALLBACK_ERROR(READY_API));return;}/**\n     * If destinations are loaded or no integration is available for loading\n     * execute the callback immediately else push the callbacks to a queue that\n     * will be executed after loading completes\n     */if(state.lifecycle.status.value==='readyExecuted'){try{callback();}catch(err){this.errorHandler.onError(err,ANALYTICS_CORE,READY_CALLBACK_INVOKE_ERROR);}}else {state.eventBuffer.readyCallbacksArray.value=[...state.eventBuffer.readyCallbacksArray.value,callback];}}page(payload,isBufferedInvocation=false){const type='page';if(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type,payload]];return;}this.errorHandler.leaveBreadcrumb(`New ${type} event`);state.metrics.triggered.value+=1;this.eventManager?.addEvent({type:'page',category:payload.category,name:payload.name,properties:payload.properties,options:payload.options,callback:payload.callback});// TODO: Maybe we should alter the behavior to send the ad-block page event even if the SDK is still loaded. It'll be pushed into the to be processed queue.\n// Send automatic ad blocked page event if ad-blockers are detected on the page\n// Check page category to avoid infinite loop\nif(state.capabilities.isAdBlocked.value===true&&payload.category!==ADBLOCK_PAGE_CATEGORY){this.page(pageArgumentsToCallOptions(ADBLOCK_PAGE_CATEGORY,ADBLOCK_PAGE_NAME,{// 'title' is intentionally omitted as it does not make sense\n// in v3 implementation\npath:ADBLOCK_PAGE_PATH},state.loadOptions.value.sendAdblockPageOptions));}}track(payload,isBufferedInvocation=false){const type='track';if(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type,payload]];return;}this.errorHandler.leaveBreadcrumb(`New ${type} event`);state.metrics.triggered.value+=1;this.eventManager?.addEvent({type,name:payload.name||undefined,properties:payload.properties,options:payload.options,callback:payload.callback});}identify(payload,isBufferedInvocation=false){const type='identify';if(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type,payload]];return;}this.errorHandler.leaveBreadcrumb(`New ${type} event`);state.metrics.triggered.value+=1;const shouldResetSession=Boolean(payload.userId&&state.session.userId.value&&payload.userId!==state.session.userId.value);if(shouldResetSession){this.reset();}// `null` value indicates that previous user ID needs to be retained\nif(!isNull(payload.userId)){this.userSessionManager?.setUserId(payload.userId);}this.userSessionManager?.setUserTraits(payload.traits);this.eventManager?.addEvent({type,userId:payload.userId,traits:payload.traits,options:payload.options,callback:payload.callback});}alias(payload,isBufferedInvocation=false){const type='alias';if(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type,payload]];return;}this.errorHandler.leaveBreadcrumb(`New ${type} event`);state.metrics.triggered.value+=1;const previousId=payload.from??this.userSessionManager?.getUserId()??this.userSessionManager?.getAnonymousId();this.eventManager?.addEvent({type,to:payload.to,from:previousId,options:payload.options,callback:payload.callback});}group(payload,isBufferedInvocation=false){const type='group';if(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type,payload]];return;}this.errorHandler.leaveBreadcrumb(`New ${type} event`);state.metrics.triggered.value+=1;// `null` value indicates that previous group ID needs to be retained\nif(!isNull(payload.groupId)){this.userSessionManager?.setGroupId(payload.groupId);}this.userSessionManager?.setGroupTraits(payload.traits);this.eventManager?.addEvent({type,groupId:payload.groupId,traits:payload.traits,options:payload.options,callback:payload.callback});}reset(resetAnonymousId,isBufferedInvocation=false){const type='reset';if(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type,resetAnonymousId]];return;}this.errorHandler.leaveBreadcrumb(`New ${type} invocation, resetAnonymousId: ${resetAnonymousId}`);this.userSessionManager?.reset(resetAnonymousId);}getAnonymousId(options){return this.userSessionManager?.getAnonymousId(options);}setAnonymousId(anonymousId,rudderAmpLinkerParam,isBufferedInvocation=false){const type='setAnonymousId';// Buffering is needed as setting the anonymous ID may require invoking the GoogleLinker plugin\nif(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type,anonymousId,rudderAmpLinkerParam]];return;}this.errorHandler.leaveBreadcrumb(`New ${type} invocation`);this.userSessionManager?.setAnonymousId(anonymousId,rudderAmpLinkerParam);}// eslint-disable-next-line class-methods-use-this\ngetUserId(){return state.session.userId.value;}// eslint-disable-next-line class-methods-use-this\ngetUserTraits(){return state.session.userTraits.value;}// eslint-disable-next-line class-methods-use-this\ngetGroupId(){return state.session.groupId.value;}// eslint-disable-next-line class-methods-use-this\ngetGroupTraits(){return state.session.groupTraits.value;}startSession(sessionId,isBufferedInvocation=false){const type='startSession';if(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type,sessionId]];return;}this.errorHandler.leaveBreadcrumb(`New ${type} invocation`);this.userSessionManager?.start(sessionId);}endSession(isBufferedInvocation=false){const type='endSession';if(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type]];return;}this.errorHandler.leaveBreadcrumb(`New ${type} invocation`);this.userSessionManager?.end();}// eslint-disable-next-line class-methods-use-this\ngetSessionId(){const sessionId=this.userSessionManager?.getSessionId();return sessionId??null;}consent(options,isBufferedInvocation=false){const type='consent';if(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type,options]];return;}this.errorHandler.leaveBreadcrumb(`New consent invocation`);r(()=>{state.consents.preConsent.value={...state.consents.preConsent.value,enabled:false};state.consents.postConsent.value=getValidPostConsentOptions(options);const{initialized,consentsData}=getConsentManagementData(state.consents.postConsent.value.consentManagement,this.logger);state.consents.initialized.value=initialized||state.consents.initialized.value;state.consents.data.value=consentsData;});// Update consents data in state\nif(state.consents.enabled.value&&!state.consents.initialized.value){this.pluginsManager?.invokeSingle(`consentManager.updateConsentsInfo`,state,this.storeManager,this.logger);}// Re-init store manager\nthis.storeManager?.initializeStorageState();// Re-init user session manager\nthis.userSessionManager?.syncStorageDataToState();// Resume event manager to process the events to destinations\nthis.eventManager?.resume();this.loadDestinations();this.sendTrackingEvents(isBufferedInvocation);}sendTrackingEvents(isBufferedInvocation){// If isBufferedInvocation is true, then the tracking events will be added to the end of the\n// events buffer array so that any other preload events (mainly from query string API) will be processed first.\nif(state.consents.postConsent.value.trackConsent){const trackOptions=trackArgumentsToCallOptions(CONSENT_TRACK_EVENT_NAME);if(isBufferedInvocation){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,['track',trackOptions]];}else {this.track(trackOptions);}}if(state.consents.postConsent.value.sendPageEvent){const pageOptions=pageArgumentsToCallOptions();if(isBufferedInvocation){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,['page',pageOptions]];}else {this.page(pageOptions);}}}setAuthToken(token){this.userSessionManager?.setAuthToken(token);}// End consumer exposed methods\n}\n\n/*\n * RudderAnalytics facade singleton that is exposed as global object and will:\n * expose overloaded methods\n * handle multiple Analytics instances\n * consume SDK preload event buffer\n */class RudderAnalytics{static globalSingleton=null;analyticsInstances={};defaultAnalyticsKey='';logger=defaultLogger;// Singleton with constructor bind methods\nconstructor(){if(RudderAnalytics.globalSingleton){// START-NO-SONAR-SCAN\n// eslint-disable-next-line no-constructor-return\nreturn RudderAnalytics.globalSingleton;// END-NO-SONAR-SCAN\n}defaultErrorHandler.attachErrorListeners();this.setDefaultInstanceKey=this.setDefaultInstanceKey.bind(this);this.getAnalyticsInstance=this.getAnalyticsInstance.bind(this);this.load=this.load.bind(this);this.ready=this.ready.bind(this);this.triggerBufferedLoadEvent=this.triggerBufferedLoadEvent.bind(this);this.page=this.page.bind(this);this.track=this.track.bind(this);this.identify=this.identify.bind(this);this.alias=this.alias.bind(this);this.group=this.group.bind(this);this.reset=this.reset.bind(this);this.getAnonymousId=this.getAnonymousId.bind(this);this.setAnonymousId=this.setAnonymousId.bind(this);this.getUserId=this.getUserId.bind(this);this.getUserTraits=this.getUserTraits.bind(this);this.getGroupId=this.getGroupId.bind(this);this.getGroupTraits=this.getGroupTraits.bind(this);this.startSession=this.startSession.bind(this);this.endSession=this.endSession.bind(this);this.getSessionId=this.getSessionId.bind(this);this.setAuthToken=this.setAuthToken.bind(this);this.consent=this.consent.bind(this);RudderAnalytics.globalSingleton=this;// start loading if a load event was buffered or wait for explicit load call\nthis.triggerBufferedLoadEvent();// Assign to global \"rudderanalytics\" object after processing the preload buffer (if any exists)\n// for CDN bundling IIFE exports covers this but for npm ESM and CJS bundling has to be done explicitly\nglobalThis.rudderanalytics=this;}/**\n   * Set instance to use if no specific writeKey is provided in methods\n   * automatically for the first created instance\n   * TODO: to support multiple analytics instances in the near future\n   */setDefaultInstanceKey(writeKey){if(writeKey){this.defaultAnalyticsKey=writeKey;}}/**\n   * Retrieve an existing analytics instance\n   */getAnalyticsInstance(writeKey){const instanceId=writeKey??this.defaultAnalyticsKey;const analyticsInstanceExists=Boolean(this.analyticsInstances[instanceId]);if(!analyticsInstanceExists){this.analyticsInstances[instanceId]=new Analytics();}return this.analyticsInstances[instanceId];}/**\n   * Create new analytics instance and trigger application lifecycle start\n   */load(writeKey,dataPlaneUrl,loadOptions){if(!isString(writeKey)){this.logger.error(WRITE_KEY_NOT_A_STRING_ERROR(RS_APP,writeKey));return;}if(this.analyticsInstances[writeKey]){return;}this.setDefaultInstanceKey(writeKey);this.analyticsInstances[writeKey]=new Analytics();this.getAnalyticsInstance(writeKey).load(writeKey,dataPlaneUrl,loadOptions);}/**\n   * Trigger load event in buffer queue if exists and stores the\n   * remaining preloaded events array in global object\n   */triggerBufferedLoadEvent(){const preloadedEventsArray=Array.isArray(globalThis.rudderanalytics)?globalThis.rudderanalytics:[];// The array will be mutated in the below method\npromotePreloadedConsentEventsToTop(preloadedEventsArray);// Get any load method call that is buffered if any\n// BTW, load method is also removed from the array\n// So, the Analytics object can directly consume the remaining events\nconst loadEvent=getPreloadedLoadEvent(preloadedEventsArray);// Set the final preloaded events array in global object\nsetExposedGlobal(GLOBAL_PRELOAD_BUFFER,clone(preloadedEventsArray));// Process load method if present in the buffered requests\nif(loadEvent.length>0){// Remove the event name from the Buffered Event array and keep only arguments\nloadEvent.shift();// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nthis.load.apply(null,loadEvent);}}/**\n   * Get ready callback arguments and forward to ready call\n   */ready(callback){this.getAnalyticsInstance().ready(callback);}/**\n   * Process page arguments and forward to page call\n   */page(category,name,properties,options,callback){this.getAnalyticsInstance().page(pageArgumentsToCallOptions(category,name,properties,options,callback));}/**\n   * Process track arguments and forward to page call\n   */track(event,properties,options,callback){this.getAnalyticsInstance().track(trackArgumentsToCallOptions(event,properties,options,callback));}/**\n   * Process identify arguments and forward to page call\n   */identify(userId,traits,options,callback){this.getAnalyticsInstance().identify(identifyArgumentsToCallOptions(userId,traits,options,callback));}/**\n   * Process alias arguments and forward to page call\n   */alias(to,from,options,callback){this.getAnalyticsInstance().alias(aliasArgumentsToCallOptions(to,from,options,callback));}/**\n   * Process group arguments and forward to page call\n   */group(groupId,traits,options,callback){if(arguments.length===0){this.logger.error(EMPTY_GROUP_CALL_ERROR(RS_APP));return;}this.getAnalyticsInstance().group(groupArgumentsToCallOptions(groupId,traits,options,callback));}reset(resetAnonymousId){this.getAnalyticsInstance().reset(resetAnonymousId);}getAnonymousId(options){return this.getAnalyticsInstance().getAnonymousId(options);}setAnonymousId(anonymousId,rudderAmpLinkerParam){this.getAnalyticsInstance().setAnonymousId(anonymousId,rudderAmpLinkerParam);}getUserId(){return this.getAnalyticsInstance().getUserId();}getUserTraits(){return this.getAnalyticsInstance().getUserTraits();}getGroupId(){return this.getAnalyticsInstance().getGroupId();}getGroupTraits(){return this.getAnalyticsInstance().getGroupTraits();}startSession(sessionId){return this.getAnalyticsInstance().startSession(sessionId);}endSession(){return this.getAnalyticsInstance().endSession();}getSessionId(){return this.getAnalyticsInstance().getSessionId();}setAuthToken(token){return this.getAnalyticsInstance().setAuthToken(token);}consent(options){return this.getAnalyticsInstance().consent(options);}}\n\nexport { RudderAnalytics };\n","import { RudderAnalytics } from \"@rudderstack/analytics-js\";\n\nfunction updateAnonymousIdField() {\n  const anonymousIdField = document.querySelector(\"[name=\\\"fields[anonymous_id]\\\"]\");\n  if (anonymousIdField !== null) {\n    anonymousIdField.value = rudderanalytics.getAnonymousId();\n    console.log(\"RudderStack Field Update complete - \", rudderanalytics.getAnonymousId());\n  } else {\n    console.log(\"anonymousIdField is null\");\n  }\n}\n\nfunction registerEvents() {\n  const anchorLinks = document.getElementsByTagName(\"a\");\n\n  // Internal Sites\n  [...anchorLinks].forEach((anchor) => {\n    anchor.addEventListener(\n      \"click\",\n      (event) => {\n        const element = event.currentTarget;\n        const params = {\n          eventElement: \"a\",\n          target: element.href,\n          title: element.innerText,\n          id_html: element.id,\n          className: element.className.split(\" \"),\n          ariaLabel: element.getAttribute(\"aria-label\"),\n        };\n        rudderanalytics.track(\"Clicked A Link\", params);\n      },\n      { once: true }\n    );\n\n    // If anchor doesn't have a href attribute - exit\n    if (!anchor.href || !anchor.hasAttribute(\"href\")) {\n      return false;\n    }\n\n    const currentUrl = new URL(anchor.href);\n    const updateExternalUrl =\n            currentUrl.origin !== location.origin && !currentUrl.searchParams.get(\"anonymous_id\");\n    if (updateExternalUrl) {\n      currentUrl.searchParams.append(\"anonymous_id\", rudderanalytics.getAnonymousId());\n      anchor.href = currentUrl;\n    }\n  });\n\n  const buttonLinks = document.getElementsByTagName(\"button\");\n  [...buttonLinks].forEach((button) => {\n    button.addEventListener(\n      \"click\",\n      (event) => {\n        const element = event.currentTarget;\n        const params = {\n          eventElement: \"button\",\n          title: element.innerText,\n          id_html: element.id,\n          className: element.className.split(\" \"),\n          ariaLabel: element.getAttribute(\"aria-label\"),\n        };\n        rudderanalytics.track(\"Pressed A Button\", params);\n      },\n      { once: true }\n    );\n  });\n}\n\nfunction checkIfHtmxIsLoaded(count = 0) {\n  if (count > 5) {\n    return false;\n  }\n  setTimeout(() => {\n    if (\"htmx\" in window) {\n      registerEvents();\n      window.htmx.on(\"htmx:afterSwap\", () => {\n        registerEvents();\n      });\n    } else {\n      checkIfHtmxIsLoaded(count + 1);\n    }\n  }, 500);\n}\n\nconst rudderanalytics = new RudderAnalytics();\n\nrudderanalytics.load(\"2Fivwkm2WzdbgiuTksdgWz729mz\", \"https://conversionwbv.dataplane.rudderstack.com\");\nrudderanalytics.ready(() => {\n  // Register Custom Events\n  checkIfHtmxIsLoaded();\n  rudderanalytics.getAnonymousId();\n\n  // Decrypting AnnoymousId into form field.\n  window.addEventListener(\"onBeforeFormieSubmit\", () => {\n    updateAnonymousIdField();\n  });\n});\nrudderanalytics.page();\n\nexport default { rudderanalytics };\n"],"file":"js/site.js"}