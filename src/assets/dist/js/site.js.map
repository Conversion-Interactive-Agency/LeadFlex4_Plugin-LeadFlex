{"version":3,"mappings":"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","names":["citySearchValidation","jobSearchForm","cityInput","zipInput","isTooltipDisplayed","hasBeenDismissed","toolTipEl","toolTipDismissBtn","handleInputChange","city","state","stateInput","zip","disableSearchButton","enableSearchButton","toggleTooltip","cityContainer","isMobileModule","isMobile","mobileRE","notMobileRE","tabletRE","opts","ua","result","assign","target","i","key","source","value","init","converter","set","name","defaultAttributes","attributes","stringifiedAttributes","attributeName","get","cookies","found","jar","api","defaultConverter","exitBanner","modalId","modalWindow","mobile","modalHasBeenDismissed","Cookies","initModal","assignEventListeners","checkIfBootstrapIsLoaded","modalExists","setTrackingParams","buildYesBtnLink","referralVal","utmSource","yesBtnUrl","leadAssist","leadAssistBlock","coll","addAccordionEventListener","element","d","s","js","fjs","navigation","mainNav","openCloseMenu","useElement","mobileIcon","_isPlaceholder","a","_curry1","fn","f1","_curry2","f2","_b","_a","b","_curry3","f3","_c","c","_has","prop","type","val","_isObject","x","n","_isString","_nth","offset","idx","list","_cloneRegExp","pattern","_clone","map","_ObjectMap","_isPrimitive","copiedValue","cachedCopy","param","hashedKey","bucket","p","clone","_path","pathAr","obj","_isInteger","l","k","r","mergeDeepWithKey","mergeWithKey","lVal","rVal","lObj","rObj","mergeDeepWith","path","pickBy","test","isFunction","isString","isNull","isUndefined","isDefined","isDefinedAndNotNull","isNullOrUndefined","isDefinedNotNullAndNotEmptyString","isTypeOfError","keyPath","pathParts","hasValueByPath","getValueByPath","isObjectAndNotNull","isObjectLiteralAndNotNull","mergeDeepRightObjectArrays","rightValue","mergedArray","leftValue","index","mergeDeepRight","leftObject","rightObject","isNonEmptyObject","removeUndefinedValues","removeUndefinedAndNullValues","trim","removeDoubleSpaces","removeLeadingPeriod","tryStringify","retVal","bytesToBase64","binString","bytes","toBase64","pageArgumentsToCallOptions","properties","options","callback","payload","category","trackArgumentsToCallOptions","identifyArgumentsToCallOptions","userId","traits","aliasArgumentsToCallOptions","to","from","groupArgumentsToCallOptions","groupId","CAPABILITIES_MANAGER","EVENT_REPOSITORY","RS_APP","APP_NAMESPACE","MODULE_TYPE","ADBLOCK_PAGE_CATEGORY","ADBLOCK_PAGE_NAME","ADBLOCK_PAGE_PATH","GLOBAL_PRELOAD_BUFFER","QUERY_PARAM_PROPERTY_PREFIX","QUERY_PARAM_ANONYMOUS_ID_KEY","QUERY_PARAM_USER_ID_KEY","QUERY_PARAM_TRACK_EVENT_NAME_KEY","DEFAULT_XHR_TIMEOUT_MS","DEFAULT_COOKIE_MAX_AGE_MS","DEFAULT_SESSION_TIMEOUT_MS","MIN_SESSION_TIMEOUT_MS","DEFAULT_DATA_PLANE_EVENTS_BUFFER_TIMEOUT_MS","DEBOUNCED_TIMEOUT_MS","createExposedGlobals","analyticsInstanceId","keyName","getExposedGlobal","debounce","func","timeoutId","args","thisArg","delay","getEventDataFromQueryString","params","dataTypeNamePrefix","data","dataKey","retrieveEventsFromQueryString","argumentsArray","eventArgumentToQueryParamMap","QUERY_PARAM_TRAIT_PREFIX","queryObject","getPreloadedLoadEvent","preloadedEventsArray","loadMethodName","loadEvent","promotePreloadedConsentEventsToTop","consentMethodName","consentEvents","bufferedEvent","nonConsentEvents","retrievePreloadBufferEvents","instance","consumePreloadBufferedEvent","event","analyticsInstance","methodName","callOptions","DEFAULT_EXT_SRC_LOAD_TIMEOUT_MS","LOG_CONTEXT_SEPARATOR","SCRIPT_ALREADY_EXISTS_ERROR","id","SCRIPT_LOAD_ERROR","url","SCRIPT_LOAD_TIMEOUT_ERROR","timeout","CIRCULAR_REFERENCE_WARNING","context","JSON_STRINGIFY_WARNING","JSON_STRINGIFY","logger","ancestors","excludeKeys","excludeNull","getCircularReplacer","err","getMutatedError","issue","finalError","EXTERNAL_SOURCE_LOAD_ORIGIN","createScriptElement","onload","onerror","extraAttributes","scriptElement","async","newScriptElement","headElements","scriptElements","_d","htmlElement","reject","timeoutID","insertScript","ExternalSrcLoader","errorHandler","__publicField","config","jsFileLoader","isFireAndForget","error","EXTERNAL_SRC_LOADER","t","h","f","o","v","e","u","E","y","_","g","item","LOG_LEVEL_MAP","DEFAULT_LOG_LEVEL","LOG_MSG_PREFIX","LOG_MSG_PREFIX_STYLE","LOG_MSG_STYLE","minLogLevel","logProvider","scope","logMethod","scopeVal","msg","originalMsg","styledLogArgs","Logger","SUPPORTED_STORAGE_TYPES","DEFAULT_STORAGE_TYPE","SOURCE_CONFIG_RESOLUTION_ERROR","SOURCE_DISABLED_ERROR","XHR_PAYLOAD_PREP_ERROR","EVENT_OBJECT_GENERATION_ERROR","PLUGIN_EXT_POINT_MISSING_ERROR","PLUGIN_EXT_POINT_INVALID_ERROR","COMPONENT_BASE_URL_ERROR","UNSUPPORTED_CONSENT_MANAGER_ERROR","consentManagersToPluginNameMap","selectedConsentManager","REPORTING_PLUGIN_INIT_FAILURE_ERROR","NOTIFY_FAILURE_ERROR","PLUGIN_NAME_MISSING_ERROR","PLUGIN_ALREADY_EXISTS_ERROR","pluginName","PLUGIN_NOT_FOUND_ERROR","PLUGIN_ENGINE_BUG_ERROR","notExistDeps","PLUGIN_INVOCATION_ERROR","STORAGE_UNAVAILABILITY_ERROR_PREFIX","storageType","SOURCE_CONFIG_FETCH_ERROR","reason","writeKey","DATA_PLANE_URL_VALIDATION_ERROR","dataPlaneUrl","READY_API_CALLBACK_ERROR","XHR_DELIVERY_ERROR","statusText","prefix","XHR_REQUEST_ERROR","XHR_SEND_ERROR","STORE_DATA_SAVE_ERROR","STORE_DATA_FETCH_ERROR","DATA_SERVER_REQUEST_FAIL_ERROR","status","defaultStorageType","UNSUPPORTED_ERROR_REPORTING_PROVIDER_WARNING","errorReportingProvidersToPluginNameMap","defaultProvider","selectedErrorReportingProvider","UNSUPPORTED_STORAGE_ENCRYPTION_VERSION_WARNING","storageEncryptionVersionsToPluginNameMap","defaultVersion","selectedStorageEncryptionVersion","STORAGE_DATA_MIGRATION_OVERRIDE_WARNING","storageEncryptionVersion","SERVER_SIDE_COOKIE_FEATURE_OVERRIDE_WARNING","currentCookieDomain","parentKeyPath","reservedElements","property","UNSUPPORTED_BEACON_API_WARNING","TIMEOUT_NOT_NUMBER_WARNING","defaultValue","TIMEOUT_ZERO_WARNING","TIMEOUT_NOT_RECOMMENDED_WARNING","minTimeout","minSessionIdLength","STORAGE_QUOTA_EXCEEDED_WARNING","STORAGE_UNAVAILABLE_WARNING","selectedStorageType","finalStorageType","WRITE_KEY_NOT_A_STRING_ERROR","EMPTY_GROUP_CALL_ERROR","READY_CALLBACK_INVOKE_ERROR","API_CALLBACK_INVOKE_ERROR","POLYFILL_SCRIPT_LOAD_ERROR","scriptId","UNSUPPORTED_PRE_CONSENT_STORAGE_STRATEGY","selectedStrategy","defaultStrategy","UNSUPPORTED_PRE_CONSENT_EVENTS_DELIVERY_TYPE","defaultDeliveryType","generateMisconfiguredPluginsWarning","missingPlugins","shouldAddMissingPlugins","isSinglePlugin","pluginsString","configurationStatus","baseWarning","INVALID_POLYFILL_URL_WARNING","customPolyfillUrl","CDN_INT_DIR","URL_PATTERN","BUILD_TYPE","SDK_CDN_BASE_URL","DEST_SDK_BASE_URL","CDN_ARCH_VERSION_DIR","PLUGINS_BASE_URL","CDN_PLUGINS_DIR","DEFAULT_CONFIG_BE_URL","DEFAULT_STORAGE_ENCRYPTION_VERSION","DEFAULT_DATA_PLANE_EVENTS_TRANSPORT","ConsentManagersToPluginNameMap","StorageEncryptionVersionsToPluginNameMap","defaultLoadOptions","DEFAULT_USER_SESSION_VALUES","defaultSessionConfiguration","sessionState","capabilitiesState","lifecycleState","consentsState","metricsState","APP_NAME","APP_VERSION","nativeDestinationsState","dataPlaneEventsState","contextState","eventBufferState","loadOptionsState","pluginsState","reportingState","sourceConfigState","storageState","defaultStateValues","PluginEngine","plugin","errorMessage","PLUGIN_ENGINE","pos","pluginItem","extPoint","lifeCycleName","dependency","PLUGIN_DEPS_ERROR","allowMultiple","extensionPointName","noCall","extensionPointNameParts","pluginMethodPath","method","throws","defaultPluginEngine","defaultLogger","FAILED_REQUEST_ERR_MSG_PREFIX","LOAD_ORIGIN","processError","eventTarget","stringifyWithoutCircular","isAllowedToBeNotified","ERROR_MESSAGES_TO_BE_FILTERED","ErrorHandler","errReportingInitVal","ERROR_HANDLER","shouldAlwaysThrow","errorType","customMessage","normalizedError","defaultErrorHandler","isNonCloudDestination","destination","destinations","pluginNamesList","remotesMap","loadJS","resolvedUrl","script","merge","obj1","mergedObj","obj2","remoteFrom","__federation_method_ensure","remoteId","remote","resolve","wrapShareModule","__vitePreload","lib","shareScope","__federation_method_wrapDefault","module","need","__federation_method_getRemote","remoteName","factory","getFederatedModuleImport","federatedModulesBuildPluginImports","activePluginNames","remotePlugins","lazyLoadImport","getMandatoryPluginsMap","getOptionalPluginsMap","getRemotePluginsMap","pluginsInventory","remotePluginsInventory","PluginsManager","engine","pluginsToLoadFromConfig","pluginGroupsToProcess","group","PLUGINS_MANAGER","activePlugins","failedPlugins","pluginsToLoad","availablePlugins","localPlugin","remotePluginsList","remotePluginKey","remotePluginModule","plugins","responseTextToJson","responseText","onError","DEFAULT_XHR_REQUEST_OPTIONS","basicAuthHeader","requestOptions","xhrRequest","xhr","xhrError","xhrReject","headerName","HttpClient","createXhrRequestOptions","isRawResponse","HTTP_CLIENT","authVal","noBtoa","defaultHttpClient","userIdKey","userTraitsKey","anonymousUserIdKey","authTokenKey","groupIdKey","groupTraitsKey","sessionInfoKey","CLIENT_DATA_STORE_COOKIE","storageClientDataStoreNameMap","LOCAL_STORAGE","CLIENT_DATA_STORE_LS","MEMORY_STORAGE","CLIENT_DATA_STORE_MEMORY","SESSION_STORAGE","CLIENT_DATA_STORE_SESSION","COOKIE_DATA_ENCODING_ERROR","decode","parse","str","pairs","pair","pairItem","optionsConfig","cookieString","encode","all","cookieStringValue","cookie","baseUrl","httpClient","details","hasCrypto$1","isIE11","getUserAgentClientHint","level","isDatasetAvailable","testElement","legacyJSEngineRequiredPolyfills","requiredCapabilitiesList","isCapabilityMissing","needsPolyfill","getScreenDetails","screenDetails","matchingNames","isQuotaExceededError","storageInstance","storage","testData","msgPrefix","legacyGetHostname","href","levelsFunc","host","parts","last","levels","domain","STORAGE_TEST_TOP_LEVEL_DOMAIN","cname","getDefaultCookieOptions","topDomain","_CookieStorage","CookieStorage","InMemoryStorage","commonjsGlobal","getDefaultExportFromCjs","exports","global","isJSON","stringify","deserialize","isArray","dealIncognito","_KEY","_VALUE","inMemoryStorage","Store","ret","dt","len","arr","argm","_Store","store","storeExports","store$1","LocalStorage","defaultLocalStorage","SessionStorage","keys","defaultSessionStorage","defaultInMemoryStorage","configureCookieStorageEngine","cookieStorageOptions","configureLocalStorageEngine","localStorageOptions","inMemoryStorageOptions","sessionStorageOptions","configureInMemoryStorageEngine","configureSessionStorageEngine","getStorageEngine","validKeys","noKeyValidation","noCompoundKey","validKeyName","compoundKey","validKey","isStorageQuotaExceeded","mode","getStorageTypeFromPreConsentIfApplicable","sessionKey","overriddenStorageType","pluginsManager","loadOptions","globalStorageType","entriesOptions","postConsentStorageOpts","storageEntries","USER_SESSION_KEYS","storageKey","configuredStorageType","NO_STORAGE","trulyAnonymousTracking","COOKIE_KEYS","COOKIE_STORAGE","_e","STORE_MANAGER","storeConfig","storageEngine","removeDuplicateSlashes","isValidURL","validateWriteKey","WRITE_KEY_VALIDATION_ERROR","validateDataPlaneUrl","isValidSourceConfig","res","getTopDomain","urlObj","protocol","getDataServiceUrl","endpoint","useExactDomain","isWebpageTopLevelDomain","providedDomain","nativeDestinations","removeTrailingSlashes","referrer","extractUTMParameters","UTM_PREFIX","sParam","utmParam","getUrlWithoutHash","urlWithoutHash","isSDKRunningInChromeExtension","DEFAULT_PRE_CONSENT_STORAGE_STRATEGY","DEFAULT_PRE_CONSENT_EVENTS_DELIVERY_TYPE","isErrorReportingEnabled","sourceConfig","isMetricsReportingEnabled","getValidPostConsentOptions","validOptions","clonedOptions","isValidConsentsData","getConsentManagerInfo","consentManagementOpts","consentManagerPluginName","provider","CONFIG_MANAGER","allowedConsentIds","deniedConsentIds","initialized","enabled","consentsData","scripts","sdkFileNameRegex","src","updateReportingState","getErrorReportingProviderNameFromConfig","errReportingProvider","ErrorReportingProvidersToPluginNameMap","errReportingProviderPlugin","DEFAULT_ERROR_REPORTING_PROVIDER","updateStorageStateFromLoadOptions","storageOptsFromLoad","isValidStorageType","encryptionPluginName","configuredMigrationValue","finalMigrationVal","cookieOptions","setCookieDomain","providedCookieDomain","sameDomainCookiesOnly","dataServiceUrl","dataServiceEndpoint","DEFAULT_DATA_SERVICE_ENDPOINT","curHost","getDomain","dataServiceHost","updateConsentsStateFromLoadOptions","preConsentOpts","StorageStrategies","storageStrategy","eventsDeliveryType","deliveryTypes","resp","resolutionStrategy","updateDataPlaneEventsStateFromLoadOptions","getSourceConfigURL","configUrl","lockIntegrationsVersion","lockPluginsVersion","defSearchParams","searchParams","configUrlInstance","origin","pathname","hash","getSDKComponentBaseURL","componentType","pathSuffix","baseURL","currentVersion","lockVersion","customURL","sdkComponentURL","sdkURL","getSDKUrl","getIntegrationsCDNPath","customIntegrationsCDNPath","getPluginsCDNPath","customPluginsCDNPath","ConfigManager","pluginsCDNPath","pluginsSDKBaseURL","logLevel","response","filterEnabledDestination","updateConsentsState","sourceConfigFunc","SOURCE_CONFIG_OPTION_ERROR","getTimezone","timezone","getReferrer","getCanonicalUrl","tags","canonicalUrl","tag","getUserAgent","brave","matchedArr","userAgent","getLanguage","tabUrl","pageUrl","search","POLYFILL_URL","POLYFILL_LOAD_TIMEOUT","POLYFILL_SCRIPT_ID","hasUAClientHints","uach","detectAdBlockers","polyfillUrl","isDefaultPolyfillService","polyfillCallbackName","random","HEX$1","IDX$1","BUFFER$1","v4$1","SIZE","tmp","out","IDX","HEX","BUFFER","v4","num","hasCrypto","getCurrentTimeFormatted","TOP_LEVEL_ELEMENTS","RESERVED_ELEMENTS","hasMinLength","minimumLength","isPositiveInteger","isNumber","hasSessionExpired","expiresAt","timestamp","isManualSessionIdValid","sessionId","MIN_SESSION_ID_LENGTH","USER_SESSION_MANAGER","generateAutoTrackingSession","sessionTimeout","generateSessionId","generateAnonymousId","generateUUID","getContextPageProperties","pageProps","curPageProps","getDefaultPageProperties","ctxPageProps","getUpdatedPageProperties","optionsPageProps","checkForReservedElementsInObject","EVENT_MANAGER","checkForReservedElements","rudderEvent","contextualTraits","updateTopLevelEventElements","rudderContext","tempContext","CONTEXT_RESERVED_ELEMENTS","shouldUseGlobalIntegrationsConfigInEvents","processOptions","getMergedContext","finalIntgConfig","DEFAULT_INTEGRATIONS_CONFIG","getEnrichedEvent","commonEventData","CHANNEL","processedEvent","RudderEventFactory","props","enrichedEvent","groupEvent","eventObj","eventRepository","externalAnonymousId","externalAnonymousIdCookieName","sessionInfo","initialSessionInfo","configuredSessionTrackingInfo","initialReferrer","isStorageTypeValidForStoringData","entries","entry","currentStorage","curStore","storageTypesForMigration","stores","persistentStoreNames","storeName","storageEntry","migratedVal","autoTrack","configuredSessionTimeout","encryptedCookieData","cookiesData","cData","encryptedValue","_h","_f","_g","cookieValue","before","FAILED_SETTING_COOKIE_FROM_SERVER_ERROR","cb","each","FAILED_SETTING_COOKIE_FROM_SERVER_GLOBAL_ERROR","cookieName","SERVER_SIDE_COOKIES_DEBOUNCE_TIME","finalAnonymousId","anonymousId","persistedAnonymousId","resetAnonymousId","noNewSessionStart","manualTrack","session","normalizeLoadOptions","normalizedLoadOpts","defaultOptionalPluginsList","eventIntgConfig","intgName","destinationsIntgConfig","getFinalEvent","finalEvent","shouldBufferEventsForPreConsent","DATAPLANE_PLUGIN_INITIALIZE_ERROR","DMT_PLUGIN_INITIALIZE_ERROR","NATIVE_DEST_PLUGIN_INITIALIZE_ERROR","bufferEventsBeforeConsent","shouldBufferDpEvents","dest","dpQEvent","DATAPLANE_PLUGIN_ENQUEUE_ERROR","dQEvent","NATIVE_DEST_PLUGIN_ENQUEUE_ERROR","dispatchSDKEvent","customEvent","Analytics","clonedDataPlaneUrl","clonedLoadOptions","setExposedGlobal","bufferedEvents","eventToProcess","ANALYTICS_CORE","totalDestinationsToLoad","isBufferedInvocation","previousId","rudderAmpLinkerParam","CONSENT_TRACK_EVENT_NAME","trackOptions","pageOptions","_RudderAnalytics","RudderAnalytics","checkIfHtmxIsLoaded","count","updateAnonymousIdField","anonymousIdField","rudderanalytics","socialShareForm","roleOption","setCookie","oneYearFromNow","form","currentURLNoParams","shareURL","inputs","input","messageElement","tracking","TRACKING_ELEMENTS","handleEvent","node","GOOGLE_EVENT","pushGoogleEvent","pushFacebookEvent","EVENT_LISTENER_TYPE","virtualRecruiter","registerEventListeners","virtualRecruiterField","updateRedirectParam","checked","verifiedInput","view","modal","dataType","types","checkAll","accepted","consentListeners","consent"],"sources":["../../site/js/citySearchValidation.js","../../../../node_modules/is-mobile/index.js","../../../../node_modules/js-cookie/dist/js.cookie.mjs","../../site/js/exitBanner.js","../../site/js/leadAssist.js","../../site/js/navigation.js","../../../../node_modules/@rudderstack/analytics-js/dist/npm/modern/esm/index.mjs","../../site/js/helpers/htmx.js","../../site/js/rudderStack.js","../../site/js/socialShareForm.js","../../site/js/tracking.js","../../site/js/virtualRecruiter.js","../../site/js/consentBanner.js"],"sourcesContent":["function citySearchValidation() {\n  const jobSearchForm = document.querySelector(\"#jobSearch\");\n  if (!jobSearchForm) {return;}\n\n  const cityContainer = jobSearchForm.querySelector(\".city-container\");\n  const cityInput = jobSearchForm.querySelector(\"#city\");\n  const stateInput = jobSearchForm.querySelector(\"#state\");\n  const zipInput = jobSearchForm.querySelector(\"#zip\");\n  const jobSearchBtn = jobSearchForm.querySelector(\".jobs-search-btn\");\n\n  let isTooltipDisplayed = false;\n  let hasBeenDismissed = false;\n\n  // Create the tooltip element\n  const toolTipEl = document.createElement(\"div\");\n  toolTipEl.classList.add(\"tool-tip\");\n  toolTipEl.textContent = \"When searching a job by location, please enter a state or a valid zip code\";\n\n  // Create the dismiss button\n  const toolTipDismissBtn = document.createElement(\"button\");\n  toolTipDismissBtn.textContent = \"\\u2715\";\n  toolTipDismissBtn.setAttribute(\"type\", \"button\");\n  toolTipEl.appendChild(toolTipDismissBtn);\n\n  function handleInputChange() {\n    const city = cityInput.value;\n    const state = stateInput.value;\n    const zip = zipInput.value;\n\n    // Check if the city is entered and if state and zip were left blank\n    if (city && !state && !zip) {\n      disableSearchButton();\n    } else {\n      enableSearchButton();\n    }\n  }\n\n  function disableSearchButton() {\n    // Add the disabled attribute to the job search button\n    jobSearchBtn.setAttribute(\"disabled\", \"\");\n\n    if (!isTooltipDisplayed && !hasBeenDismissed) {\n      toggleTooltip();\n    }\n  }\n\n  function enableSearchButton() {\n    // Remove the disabled attribute from the job search button\n    jobSearchBtn.removeAttribute(\"disabled\");\n\n    if (isTooltipDisplayed) {\n      toggleTooltip();\n    }\n  }\n\n  function toggleTooltip() {\n    isTooltipDisplayed = !isTooltipDisplayed;\n\n    if (isTooltipDisplayed) {\n      cityContainer.appendChild(toolTipEl);\n    } else {\n      cityContainer.removeChild(toolTipEl);\n    }\n  }\n\n  stateInput.addEventListener(\"input\", handleInputChange);\n  zipInput.addEventListener(\"input\", handleInputChange);\n  cityInput.addEventListener(\"input\", handleInputChange);\n  toolTipDismissBtn.addEventListener(\"click\", () => {\n    toggleTooltip();\n    hasBeenDismissed = true;\n  });\n}\n\nexport default citySearchValidation();\n","'use strict'\n\nmodule.exports = isMobile\nmodule.exports.isMobile = isMobile\nmodule.exports.default = isMobile\n\nconst mobileRE = /(android|bb\\d+|meego).+mobile|armv7l|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i\nconst notMobileRE = /CrOS/\n\nconst tabletRE = /android|ipad|playbook|silk/i\n\nfunction isMobile (opts) {\n  if (!opts) opts = {}\n  let ua = opts.ua\n  if (!ua && typeof navigator !== 'undefined') ua = navigator.userAgent\n  if (ua && ua.headers && typeof ua.headers['user-agent'] === 'string') {\n    ua = ua.headers['user-agent']\n  }\n  if (typeof ua !== 'string') return false\n\n  let result =\n    (mobileRE.test(ua) && !notMobileRE.test(ua)) ||\n    (!!opts.tablet && tabletRE.test(ua))\n\n  if (\n    !result &&\n    opts.tablet &&\n    opts.featureDetect &&\n    navigator &&\n    navigator.maxTouchPoints > 1 &&\n    ua.indexOf('Macintosh') !== -1 &&\n    ua.indexOf('Safari') !== -1\n  ) {\n    result = true\n  }\n\n  return result\n}\n","/*! js-cookie v3.0.5 | MIT */\n/* eslint-disable no-var */\nfunction assign (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n    for (var key in source) {\n      target[key] = source[key];\n    }\n  }\n  return target\n}\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\nvar defaultConverter = {\n  read: function (value) {\n    if (value[0] === '\"') {\n      value = value.slice(1, -1);\n    }\n    return value.replace(/(%[\\dA-F]{2})+/gi, decodeURIComponent)\n  },\n  write: function (value) {\n    return encodeURIComponent(value).replace(\n      /%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,\n      decodeURIComponent\n    )\n  }\n};\n/* eslint-enable no-var */\n\n/* eslint-disable no-var */\n\nfunction init (converter, defaultAttributes) {\n  function set (name, value, attributes) {\n    if (typeof document === 'undefined') {\n      return\n    }\n\n    attributes = assign({}, defaultAttributes, attributes);\n\n    if (typeof attributes.expires === 'number') {\n      attributes.expires = new Date(Date.now() + attributes.expires * 864e5);\n    }\n    if (attributes.expires) {\n      attributes.expires = attributes.expires.toUTCString();\n    }\n\n    name = encodeURIComponent(name)\n      .replace(/%(2[346B]|5E|60|7C)/g, decodeURIComponent)\n      .replace(/[()]/g, escape);\n\n    var stringifiedAttributes = '';\n    for (var attributeName in attributes) {\n      if (!attributes[attributeName]) {\n        continue\n      }\n\n      stringifiedAttributes += '; ' + attributeName;\n\n      if (attributes[attributeName] === true) {\n        continue\n      }\n\n      // Considers RFC 6265 section 5.2:\n      // ...\n      // 3.  If the remaining unparsed-attributes contains a %x3B (\";\")\n      //     character:\n      // Consume the characters of the unparsed-attributes up to,\n      // not including, the first %x3B (\";\") character.\n      // ...\n      stringifiedAttributes += '=' + attributes[attributeName].split(';')[0];\n    }\n\n    return (document.cookie =\n      name + '=' + converter.write(value, name) + stringifiedAttributes)\n  }\n\n  function get (name) {\n    if (typeof document === 'undefined' || (arguments.length && !name)) {\n      return\n    }\n\n    // To prevent the for loop in the first place assign an empty array\n    // in case there are no cookies at all.\n    var cookies = document.cookie ? document.cookie.split('; ') : [];\n    var jar = {};\n    for (var i = 0; i < cookies.length; i++) {\n      var parts = cookies[i].split('=');\n      var value = parts.slice(1).join('=');\n\n      try {\n        var found = decodeURIComponent(parts[0]);\n        jar[found] = converter.read(value, found);\n\n        if (name === found) {\n          break\n        }\n      } catch (e) {}\n    }\n\n    return name ? jar[name] : jar\n  }\n\n  return Object.create(\n    {\n      set,\n      get,\n      remove: function (name, attributes) {\n        set(\n          name,\n          '',\n          assign({}, attributes, {\n            expires: -1\n          })\n        );\n      },\n      withAttributes: function (attributes) {\n        return init(this.converter, assign({}, this.attributes, attributes))\n      },\n      withConverter: function (converter) {\n        return init(assign({}, this.converter, converter), this.attributes)\n      }\n    },\n    {\n      attributes: { value: Object.freeze(defaultAttributes) },\n      converter: { value: Object.freeze(converter) }\n    }\n  )\n}\n\nvar api = init(defaultConverter, { path: '/' });\n/* eslint-enable no-var */\n\nexport { api as default };\n","import mobile from \"is-mobile\";\nimport Cookies from \"js-cookie\";\n\nfunction exitBanner() {\n  const modalId = \"exitModal\";\n  const modalWindow = document.querySelector(`#${modalId}`);\n  const modalExists = !!modalWindow;\n  const isMobile = mobile();\n  const modalHasBeenDismissed = !!Cookies.get(`modal.${modalId}`);\n\n  function initModal() {\n    // eslint-disable-next-line no-undef\n    const modal = new bootstrap.Modal(`#${modalId}`);\n    modal.show();\n    // Set cookie - don't show again for 1 day\n    Cookies.set(`modal.${modalId}`, \"1\", { expires: 1 });\n  }\n\n  function assignEventListeners() {\n    if (isMobile) {\n      setTimeout(initModal, 6000);\n    } else {\n      document.addEventListener(\"mouseleave\", initModal, { once: true });\n    }\n  }\n\n  function init() {\n    assignEventListeners();\n    setTrackingParams();\n  }\n\n  function checkIfBootstrapIsLoaded(i = 0) {\n    setTimeout(() => {\n      if (typeof window.bootstrap !== \"undefined\") {\n        init();\n      } else if (i < 10) {\n        checkIfBootstrapIsLoaded(i + 1);\n      }\n    }, 500);\n  }\n\n  if (modalExists && !modalHasBeenDismissed) {\n    checkIfBootstrapIsLoaded();\n  }\n\n  function setTrackingParams() {\n    const referrer = modalWindow.dataset.referrer;\n    const subst = \"_eb\";\n    const result = referrer + subst;\n\n    buildYesBtnLink(result);\n  }\n\n  function buildYesBtnLink(referralVal) {\n    const utmSource = modalWindow.dataset.utmSource;\n    const yesBtnUrl = new URL(\"#quickApp\", location);\n    yesBtnUrl.searchParams.set(\"utm_source\", utmSource);\n    yesBtnUrl.searchParams.set(\"utm_campaign\", referralVal);\n    yesBtnUrl.searchParams.set(\"utm_medium\", \"eb\");\n    yesBtnUrl.searchParams.set(\"r\", referralVal);\n\n    document.getElementById(\"exitbannerLink\").href = yesBtnUrl.href;\n  }\n}\n\nexport default exitBanner();\n","function leadAssist() {\n  const leadAssistBlock = document.querySelector(\"[data-component=\\\"lead-assist\\\"]\");\n  if (!leadAssistBlock) {return;}\n\n  const coll = leadAssistBlock.getElementsByClassName(\"collapsible\");\n  for (let i = 0; i < coll.length; i++) {\n    coll[i].addEventListener(\"click\", function() {\n      addAccordionEventListener(this);\n    });\n  }\n\n  function addAccordionEventListener(element) {\n    element.classList.toggle(\"active\");\n    const content = element.nextElementSibling;\n    if (content) {\n      content.classList.toggle(\"block\");\n    }\n  }\n\n  (function(d, s, id) {\n    let js;\n    const fjs = d.getElementsByTagName(s)[0];\n    if (d.getElementById(id)) {return;}\n    js = d.createElement(s);\n    js.id = id;\n    js.src = \"https://connect.facebook.net/en_US/sdk/xfbml.customerchat.js\";\n    fjs.parentNode.insertBefore(js, fjs);\n  }(document, \"script\", \"facebook-jssdk\"));\n\n  function openForm() {\n    document.getElementById(\"myForm\").style.display = \"block\";\n  }\n\n  function closeForm() {\n    document.getElementById(\"myForm\").style.display = \"none\";\n  }\n}\n\nexport default leadAssist();\n","function navigation() {\n  const mainNav = document.getElementById(\"nav\");\n  const mobileIcon = document.getElementById(\"mobile-icon\");\n  const useElement = document.querySelector(\"#mobile-icon > svg > use\");\n\n  function openCloseMenu() {\n    mainNav.classList.toggle(\"block\");\n    mainNav.classList.toggle(\"active\");\n    useElement.setAttribute(\"xlink:href\", \"#close\");\n    mobileIcon.title = \"Close Menu\";\n\n    // Check if the main nav is clicked closed\n    if (!mainNav.classList.contains(\"block\") && !mainNav.classList.contains(\"active\")) {\n      useElement.setAttribute(\"xlink:href\", \"#solid-bars\");\n      mobileIcon.title = \"Open Menu\";\n    }\n  }\n\n  mobileIcon?.addEventListener(\"click\", openCloseMenu);\n}\n\nexport default navigation();\n","function _isPlaceholder(a){return a!=null&&typeof a==='object'&&a['@@functional/placeholder']===true;}\n\n/**\n * Optimized internal one-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */function _curry1(fn){return function f1(a){if(arguments.length===0||_isPlaceholder(a)){return f1;}else {return fn.apply(this,arguments);}};}\n\n/**\n * Optimized internal two-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */function _curry2(fn){return function f2(a,b){switch(arguments.length){case 0:return f2;case 1:return _isPlaceholder(a)?f2:_curry1(function(_b){return fn(a,_b);});default:return _isPlaceholder(a)&&_isPlaceholder(b)?f2:_isPlaceholder(a)?_curry1(function(_a){return fn(_a,b);}):_isPlaceholder(b)?_curry1(function(_b){return fn(a,_b);}):fn(a,b);}};}\n\n/**\n * Optimized internal three-arity curry function.\n *\n * @private\n * @category Function\n * @param {Function} fn The function to curry.\n * @return {Function} The curried function.\n */function _curry3(fn){return function f3(a,b,c){switch(arguments.length){case 0:return f3;case 1:return _isPlaceholder(a)?f3:_curry2(function(_b,_c){return fn(a,_b,_c);});case 2:return _isPlaceholder(a)&&_isPlaceholder(b)?f3:_isPlaceholder(a)?_curry2(function(_a,_c){return fn(_a,b,_c);}):_isPlaceholder(b)?_curry2(function(_b,_c){return fn(a,_b,_c);}):_curry1(function(_c){return fn(a,b,_c);});default:return _isPlaceholder(a)&&_isPlaceholder(b)&&_isPlaceholder(c)?f3:_isPlaceholder(a)&&_isPlaceholder(b)?_curry2(function(_a,_b){return fn(_a,_b,c);}):_isPlaceholder(a)&&_isPlaceholder(c)?_curry2(function(_a,_c){return fn(_a,b,_c);}):_isPlaceholder(b)&&_isPlaceholder(c)?_curry2(function(_b,_c){return fn(a,_b,_c);}):_isPlaceholder(a)?_curry1(function(_a){return fn(_a,b,c);}):_isPlaceholder(b)?_curry1(function(_b){return fn(a,_b,c);}):_isPlaceholder(c)?_curry1(function(_c){return fn(a,b,_c);}):fn(a,b,c);}};}\n\nfunction _has(prop,obj){return Object.prototype.hasOwnProperty.call(obj,prop);}\n\n/**\n * Gives a single-word string description of the (native) type of a value,\n * returning such answers as 'Object', 'Number', 'Array', or 'Null'. Does not\n * attempt to distinguish user Object types any further, reporting them all as\n * 'Object'.\n *\n * @func\n * @memberOf R\n * @since v0.8.0\n * @category Type\n * @sig * -> String\n * @param {*} val The value to test\n * @return {String}\n * @example\n *\n *      R.type({}); //=> \"Object\"\n *      R.type(1); //=> \"Number\"\n *      R.type(false); //=> \"Boolean\"\n *      R.type('s'); //=> \"String\"\n *      R.type(null); //=> \"Null\"\n *      R.type([]); //=> \"Array\"\n *      R.type(/[A-z]/); //=> \"RegExp\"\n *      R.type(() => {}); //=> \"Function\"\n *      R.type(async () => {}); //=> \"AsyncFunction\"\n *      R.type(undefined); //=> \"Undefined\"\n *      R.type(BigInt(123)); //=> \"BigInt\"\n */var type=/*#__PURE__*/_curry1(function type(val){return val===null?'Null':val===undefined?'Undefined':Object.prototype.toString.call(val).slice(8,-1);});\n\nfunction _isObject(x){return Object.prototype.toString.call(x)==='[object Object]';}\n\n/**\n * Determine if the passed argument is an integer.\n *\n * @private\n * @param {*} n\n * @category Type\n * @return {Boolean}\n */const _isInteger = Number.isInteger||function _isInteger(n){return n<<0===n;};\n\nfunction _isString(x){return Object.prototype.toString.call(x)==='[object String]';}\n\nfunction _nth(offset,list){var idx=offset<0?list.length+offset:offset;return _isString(list)?list.charAt(idx):list[idx];}\n\nfunction _cloneRegExp(pattern){return new RegExp(pattern.source,pattern.flags?pattern.flags:(pattern.global?'g':'')+(pattern.ignoreCase?'i':'')+(pattern.multiline?'m':'')+(pattern.sticky?'y':'')+(pattern.unicode?'u':'')+(pattern.dotAll?'s':''));}\n\n/**\n * Copies an object.\n *\n * @private\n * @param {*} value The value to be copied\n * @param {Boolean} deep Whether or not to perform deep cloning.\n * @return {*} The copied value.\n */function _clone(value,deep,map){map||(map=new _ObjectMap());// this avoids the slower switch with a quick if decision removing some milliseconds in each run.\nif(_isPrimitive(value)){return value;}var copy=function copy(copiedValue){// Check for circular and same references on the object graph and return its corresponding clone.\nvar cachedCopy=map.get(value);if(cachedCopy){return cachedCopy;}map.set(value,copiedValue);for(var key in value){if(Object.prototype.hasOwnProperty.call(value,key)){copiedValue[key]=_clone(value[key],true,map);}}return copiedValue;};switch(type(value)){case'Object':return copy(Object.create(Object.getPrototypeOf(value)));case'Array':return copy(Array(value.length));case'Date':return new Date(value.valueOf());case'RegExp':return _cloneRegExp(value);case'Int8Array':case'Uint8Array':case'Uint8ClampedArray':case'Int16Array':case'Uint16Array':case'Int32Array':case'Uint32Array':case'Float32Array':case'Float64Array':case'BigInt64Array':case'BigUint64Array':return value.slice();default:return value;}}function _isPrimitive(param){var type=typeof param;return param==null||type!='object'&&type!='function';}var _ObjectMap=/*#__PURE__*/function(){function _ObjectMap(){this.map={};this.length=0;}_ObjectMap.prototype.set=function(key,value){var hashedKey=this.hash(key);var bucket=this.map[hashedKey];if(!bucket){this.map[hashedKey]=bucket=[];}bucket.push([key,value]);this.length+=1;};_ObjectMap.prototype.hash=function(key){var hashedKey=[];for(var value in key){hashedKey.push(Object.prototype.toString.call(key[value]));}return hashedKey.join();};_ObjectMap.prototype.get=function(key){/**\n     * depending on the number of objects to be cloned is faster to just iterate over the items in the map just because the hash function is so costly,\n     * on my tests this number is 180, anything above that using the hash function is faster.\n     */if(this.length<=180){for(var p in this.map){var bucket=this.map[p];for(var i=0;i<bucket.length;i+=1){var element=bucket[i];if(element[0]===key){return element[1];}}}return;}var hashedKey=this.hash(key);var bucket=this.map[hashedKey];if(!bucket){return;}for(var i=0;i<bucket.length;i+=1){var element=bucket[i];if(element[0]===key){return element[1];}}};return _ObjectMap;}();\n\n/**\n * Creates a deep copy of the source that can be used in place of the source\n * object without retaining any references to it.\n * The source object may contain (nested) `Array`s and `Object`s,\n * `Number`s, `String`s, `Boolean`s and `Date`s.\n * `Function`s are assigned by reference rather than copied.\n *\n * Dispatches to a `clone` method if present.\n *\n * Note that if the source object has multiple nodes that share a reference,\n * the returned object will have the same structure, but the references will\n * be pointed to the location within the cloned value.\n *\n * @func\n * @memberOf R\n * @since v0.1.0\n * @category Object\n * @sig {*} -> {*}\n * @param {*} value The object or array to clone\n * @return {*} A deeply cloned copy of `val`\n * @example\n *\n *      const objects = [{}, {}, {}];\n *      const objectsClone = R.clone(objects);\n *      objects === objectsClone; //=> false\n *      objects[0] === objectsClone[0]; //=> false\n */var clone=/*#__PURE__*/_curry1(function clone(value){return value!=null&&typeof value.clone==='function'?value.clone():_clone(value);});\n\nfunction _path(pathAr,obj){var val=obj;for(var i=0;i<pathAr.length;i+=1){if(val==null){return undefined;}var p=pathAr[i];if(_isInteger(p)){val=_nth(p,val);}else {val=val[p];}}return val;}\n\n/**\n * Creates a new object with the own properties of the two provided objects. If\n * a key exists in both objects, the provided function is applied to the key\n * and the values associated with the key in each object, with the result being\n * used as the value associated with the key in the returned object.\n *\n * @func\n * @memberOf R\n * @since v0.19.0\n * @category Object\n * @sig ((String, a, a) -> a) -> {a} -> {a} -> {a}\n * @param {Function} fn\n * @param {Object} l\n * @param {Object} r\n * @return {Object}\n * @see R.mergeDeepWithKey, R.merge, R.mergeWith\n * @example\n *\n *      let concatValues = (k, l, r) => k == 'values' ? R.concat(l, r) : r\n *      R.mergeWithKey(concatValues,\n *                     { a: true, thing: 'foo', values: [10, 20] },\n *                     { b: true, thing: 'bar', values: [15, 35] });\n *      //=> { a: true, b: true, thing: 'bar', values: [10, 20, 15, 35] }\n * @symb R.mergeWithKey(f, { x: 1, y: 2 }, { y: 5, z: 3 }) = { x: 1, y: f('y', 2, 5), z: 3 }\n */var mergeWithKey=/*#__PURE__*/_curry3(function mergeWithKey(fn,l,r){var result={};var k;l=l||{};r=r||{};for(k in l){if(_has(k,l)){result[k]=_has(k,r)?fn(k,l[k],r[k]):l[k];}}for(k in r){if(_has(k,r)&&!_has(k,result)){result[k]=r[k];}}return result;});\n\n/**\n * Creates a new object with the own properties of the two provided objects.\n * If a key exists in both objects:\n * - and both associated values are also objects then the values will be\n *   recursively merged.\n * - otherwise the provided function is applied to the key and associated values\n *   using the resulting value as the new value associated with the key.\n * If a key only exists in one object, the value will be associated with the key\n * of the resulting object.\n *\n * @func\n * @memberOf R\n * @since v0.24.0\n * @category Object\n * @sig ((String, a, a) -> a) -> {a} -> {a} -> {a}\n * @param {Function} fn\n * @param {Object} lObj\n * @param {Object} rObj\n * @return {Object}\n * @see R.mergeWithKey, R.mergeDeepWith\n * @example\n *\n *      let concatValues = (k, l, r) => k == 'values' ? R.concat(l, r) : r\n *      R.mergeDeepWithKey(concatValues,\n *                         { a: true, c: { thing: 'foo', values: [10, 20] }},\n *                         { b: true, c: { thing: 'bar', values: [15, 35] }});\n *      //=> { a: true, b: true, c: { thing: 'bar', values: [10, 20, 15, 35] }}\n */var mergeDeepWithKey=/*#__PURE__*/_curry3(function mergeDeepWithKey(fn,lObj,rObj){return mergeWithKey(function(k,lVal,rVal){if(_isObject(lVal)&&_isObject(rVal)){return mergeDeepWithKey(fn,lVal,rVal);}else {return fn(k,lVal,rVal);}},lObj,rObj);});\n\n/**\n * Creates a new object with the own properties of the two provided objects.\n * If a key exists in both objects:\n * - and both associated values are also objects then the values will be\n *   recursively merged.\n * - otherwise the provided function is applied to associated values using the\n *   resulting value as the new value associated with the key.\n * If a key only exists in one object, the value will be associated with the key\n * of the resulting object.\n *\n * @func\n * @memberOf R\n * @since v0.24.0\n * @category Object\n * @sig ((a, a) -> a) -> {a} -> {a} -> {a}\n * @param {Function} fn\n * @param {Object} lObj\n * @param {Object} rObj\n * @return {Object}\n * @see R.mergeWith, R.mergeDeepWithKey\n * @example\n *\n *      R.mergeDeepWith(R.concat,\n *                      { a: true, c: { values: [10, 20] }},\n *                      { b: true, c: { values: [15, 35] }});\n *      //=> { a: true, b: true, c: { values: [10, 20, 15, 35] }}\n */var mergeDeepWith=/*#__PURE__*/_curry3(function mergeDeepWith(fn,lObj,rObj){return mergeDeepWithKey(function(k,lVal,rVal){return fn(lVal,rVal);},lObj,rObj);});\n\n/**\n * Retrieves the value at a given path. The nodes of the path can be arbitrary strings or non-negative integers.\n * For anything else, the value is unspecified. Integer paths are meant to index arrays, strings are meant for objects.\n *\n * @func\n * @memberOf R\n * @since v0.2.0\n * @category Object\n * @typedefn Idx = String | Int | Symbol\n * @sig [Idx] -> {a} -> a | Undefined\n * @sig Idx = String | NonNegativeInt\n * @param {Array} path The path to use.\n * @param {Object} obj The object or array to retrieve the nested property from.\n * @return {*} The data at `path`.\n * @see R.prop, R.nth, R.assocPath, R.dissocPath\n * @example\n *\n *      R.path(['a', 'b'], {a: {b: 2}}); //=> 2\n *      R.path(['a', 'b'], {c: {b: 2}}); //=> undefined\n *      R.path(['a', 'b', 0], {a: {b: [1, 2, 3]}}); //=> 1\n *      R.path(['a', 'b', -2], {a: {b: [1, 2, 3]}}); //=> 2\n *      R.path([2], {'2': 2}); //=> 2\n *      R.path([-2], {'-2': 'a'}); //=> undefined\n */var path=/*#__PURE__*/_curry2(_path);\n\n/**\n * Returns a partial copy of an object containing only the keys that satisfy\n * the supplied predicate.\n *\n * @func\n * @memberOf R\n * @since v0.8.0\n * @category Object\n * @sig ((v, k) -> Boolean) -> {k: v} -> {k: v}\n * @param {Function} pred A predicate to determine whether or not a key\n *        should be included on the output object.\n * @param {Object} obj The object to copy from\n * @return {Object} A new object with only properties that satisfy `pred`\n *         on it.\n * @see R.pick, R.filter\n * @example\n *\n *      const isUpperCase = (val, key) => key.toUpperCase() === key;\n *      R.pickBy(isUpperCase, {a: 1, b: 2, A: 3, B: 4}); //=> {A: 3, B: 4}\n */var pickBy=/*#__PURE__*/_curry2(function pickBy(test,obj){var result={};for(var prop in obj){if(test(obj[prop],prop,obj)){result[prop]=obj[prop];}}return result;});\n\n/**\n * A function to check given value is a function\n * @param value input value\n * @returns boolean\n */ // eslint-disable-next-line @typescript-eslint/ban-types\nconst isFunction=value=>typeof value==='function'&&Boolean(value.constructor&&value.call&&value.apply);/**\n * A function to check given value is a string\n * @param value input value\n * @returns boolean\n */const isString=value=>typeof value==='string';/**\n * A function to check given value is null or not\n * @param value input value\n * @returns boolean\n */const isNull=value=>value===null;/**\n * A function to check given value is undefined\n * @param value input value\n * @returns boolean\n */const isUndefined=value=>typeof value==='undefined';/**\n * A function to check given value is null or undefined\n * @param value input value\n * @returns boolean\n */const isNullOrUndefined=value=>isNull(value)||isUndefined(value);/**\n * A function to check given value is defined\n * @param value input value\n * @returns boolean\n */const isDefined=value=>!isUndefined(value);/**\n * A function to check given value is defined and not null\n * @param value input value\n * @returns boolean\n */const isDefinedAndNotNull=value=>!isNullOrUndefined(value);/**\n * A function to check given value is defined and not null\n * @param value input value\n * @returns boolean\n */const isDefinedNotNullAndNotEmptyString=value=>isDefinedAndNotNull(value)&&value!=='';/**\n * Determines if the input is an instance of Error\n * @param obj input value\n * @returns true if the input is an instance of Error and false otherwise\n */const isTypeOfError=obj=>obj instanceof Error;\n\nconst getValueByPath=(obj,keyPath)=>{const pathParts=keyPath.split('.');return path(pathParts,obj);};const hasValueByPath=(obj,path)=>Boolean(getValueByPath(obj,path));/**\n * Checks if the input is an object literal or built-in object type and not null\n * @param value Input value\n * @returns true if the input is an object and not null\n */const isObjectAndNotNull=value=>!isNull(value)&&typeof value==='object'&&!Array.isArray(value);/**\n * Checks if the input is an object literal and not null\n * @param value Input value\n * @returns true if the input is an object and not null\n */const isObjectLiteralAndNotNull=value=>!isNull(value)&&Object.prototype.toString.call(value)==='[object Object]';const mergeDeepRightObjectArrays=(leftValue,rightValue)=>{if(!Array.isArray(leftValue)||!Array.isArray(rightValue)){return clone(rightValue);}const mergedArray=clone(leftValue);rightValue.forEach((value,index)=>{mergedArray[index]=Array.isArray(value)||isObjectAndNotNull(value)?// eslint-disable-next-line @typescript-eslint/no-use-before-define\nmergeDeepRight(mergedArray[index],value):value;});return mergedArray;};const mergeDeepRight=(leftObject,rightObject)=>mergeDeepWith(mergeDeepRightObjectArrays,leftObject,rightObject);/**\n Checks if the input is a non-empty object literal type and not undefined or null\n * @param value input any\n * @returns boolean\n */const isNonEmptyObject=value=>isObjectLiteralAndNotNull(value)&&Object.keys(value).length>0;/**\n * A utility to recursively remove undefined values from an object\n * @param obj input object\n * @returns a new object\n */const removeUndefinedValues=obj=>{const result=pickBy(isDefined,obj);Object.keys(result).forEach(key=>{const value=result[key];if(isObjectLiteralAndNotNull(value)){result[key]=removeUndefinedValues(value);}});return result;};/**\n * A utility to recursively remove undefined and null values from an object\n * @param obj input object\n * @returns a new object\n */const removeUndefinedAndNullValues=obj=>{const result=pickBy(isDefinedAndNotNull,obj);Object.keys(result).forEach(key=>{const value=result[key];if(isObjectLiteralAndNotNull(value)){result[key]=removeUndefinedAndNullValues(value);}});return result;};\n\nconst trim=value=>value.replace(/^\\s+|\\s+$/gm,'');const removeDoubleSpaces=value=>value.replace(/ {2,}/g,' ');const removeLeadingPeriod=value=>value.replace(/^\\.+/,'');/**\n * A function to convert values to string\n * @param val input value\n * @returns stringified value\n */const tryStringify=val=>{let retVal=val;if(!isString(val)&&!isNullOrUndefined(val)){try{retVal=JSON.stringify(val);}catch(e){retVal=null;}}return retVal;};// The following text encoding and decoding is done before base64 encoding to prevent\n/**\n * Converts a bytes array to base64 encoded string\n * @param bytes bytes array to be converted to base64\n * @returns base64 encoded string\n */const bytesToBase64=bytes=>{const binString=Array.from(bytes,x=>String.fromCodePoint(x)).join('');return globalThis.btoa(binString);};/**\n * Encodes a string to base64 even with unicode characters\n * @param value input string\n * @returns base64 encoded string\n */const toBase64=value=>bytesToBase64(new TextEncoder().encode(value));\n\n//   if yes make them null instead of omitting in overloaded cases\n/*\n * Normalise the overloaded arguments of the page call facade\n */const pageArgumentsToCallOptions=(category,name,properties,options,callback)=>{const payload={category:category,name:name,properties:properties,options:options};if(isFunction(callback)){payload.callback=callback;}if(isFunction(options)){payload.category=category;payload.name=name;payload.properties=properties;delete payload.options;payload.callback=options;}if(isFunction(properties)){payload.category=category;payload.name=name;delete payload.properties;delete payload.options;payload.callback=properties;}if(isFunction(name)){payload.category=category;delete payload.name;delete payload.properties;delete payload.options;payload.callback=name;}if(isFunction(category)){delete payload.category;delete payload.name;delete payload.properties;delete payload.options;payload.callback=category;}if(isObjectLiteralAndNotNull(category)){delete payload.name;delete payload.category;payload.properties=category;payload.options=name;}else if(isObjectLiteralAndNotNull(name)){delete payload.name;payload.properties=name;payload.options=!isFunction(properties)?properties:null;}// if the category argument alone is provided b/w category and name,\n// use it as name and set category to undefined\nif(isString(category)&&!isString(name)){delete payload.category;payload.name=category;}// Rest of the code is just to clean up undefined values\n// and set some proper defaults\n// Also, to clone the incoming object type arguments\nif(!isDefined(payload.category)){delete payload.category;}if(!isDefined(payload.name)){delete payload.name;}payload.properties=payload.properties?clone(payload.properties):{};if(isDefined(payload.options)){payload.options=clone(payload.options);}else {delete payload.options;}// add name and category to properties\npayload.properties=mergeDeepRight(isObjectLiteralAndNotNull(payload.properties)?payload.properties:{},{name:isString(payload.name)?payload.name:null,category:isString(payload.category)?payload.category:null});return payload;};/*\n * Normalise the overloaded arguments of the track call facade\n */const trackArgumentsToCallOptions=(event,properties,options,callback)=>{const payload={name:event,properties:properties,options:options};if(isFunction(callback)){payload.callback=callback;}if(isFunction(options)){payload.properties=properties;delete payload.options;payload.callback=options;}if(isFunction(properties)){delete payload.properties;delete payload.options;payload.callback=properties;}// Rest of the code is just to clean up undefined values\n// and set some proper defaults\n// Also, to clone the incoming object type arguments\npayload.properties=isDefinedAndNotNull(payload.properties)?clone(payload.properties):{};if(isDefined(payload.options)){payload.options=clone(payload.options);}else {delete payload.options;}return payload;};/*\n * Normalise the overloaded arguments of the identify call facade\n */const identifyArgumentsToCallOptions=(userId,traits,options,callback)=>{const payload={userId:userId,traits:traits,options:options};if(isFunction(callback)){payload.callback=callback;}if(isFunction(options)){payload.userId=userId;payload.traits=traits;delete payload.options;payload.callback=options;}if(isFunction(traits)){payload.userId=userId;delete payload.traits;delete payload.options;payload.callback=traits;}if(isObjectLiteralAndNotNull(userId)||isNull(userId)){// Explicitly set null to prevent resetting the existing value\n// in the Analytics class\npayload.userId=null;payload.traits=userId;payload.options=traits;}// Rest of the code is just to clean up undefined values\n// and set some proper defaults\n// Also, to clone the incoming object type arguments\nif(isDefined(payload.userId)){payload.userId=tryStringify(payload.userId);}else {delete payload.userId;}if(isObjectLiteralAndNotNull(payload.traits)){payload.traits=clone(payload.traits);}else {delete payload.traits;}if(isDefined(payload.options)){payload.options=clone(payload.options);}else {delete payload.options;}return payload;};/*\n * Normalise the overloaded arguments of the alias call facade\n */const aliasArgumentsToCallOptions=(to,from,options,callback)=>{const payload={to:to,from:from,options:options};if(isFunction(callback)){payload.callback=callback;}if(isFunction(options)){payload.to=to;payload.from=from;delete payload.options;payload.callback=options;}if(isFunction(from)){payload.to=to;delete payload.from;delete payload.options;payload.callback=from;}else if(isObjectLiteralAndNotNull(from)||isNull(from)){payload.to=to;delete payload.from;payload.options=from;}if(isFunction(to)){delete payload.to;delete payload.from;delete payload.options;payload.callback=to;}else if(isObjectLiteralAndNotNull(to)||isNull(to)){delete payload.to;delete payload.from;payload.options=to;}// Rest of the code is just to clean up undefined values\n// and set some proper defaults\n// Also, to clone the incoming object type arguments\nif(isDefined(payload.to)){payload.to=tryStringify(payload.to);}else {delete payload.to;}if(isDefined(payload.from)){payload.from=tryStringify(payload.from);}else {delete payload.from;}if(isDefined(payload.options)){payload.options=clone(payload.options);}else {delete payload.options;}return payload;};/*\n * Normalise the overloaded arguments of the group call facade\n */const groupArgumentsToCallOptions=(groupId,traits,options,callback)=>{const payload={groupId:groupId,traits:traits,options:options};if(isFunction(callback)){payload.callback=callback;}if(isFunction(options)){payload.groupId=groupId;payload.traits=traits;delete payload.options;payload.callback=options;}if(isFunction(traits)){payload.groupId=groupId;delete payload.traits;delete payload.options;payload.callback=traits;}// TODO: why do we enable overload for group that only passes callback? is there any use case?\nif(isFunction(groupId)){// Explicitly set null to prevent resetting the existing value\npayload.groupId=null;delete payload.traits;delete payload.options;payload.callback=groupId;}else if(isObjectLiteralAndNotNull(groupId)||isNull(groupId)){// Explicitly set null to prevent resetting the existing value\n// in the Analytics class\npayload.groupId=null;payload.traits=groupId;payload.options=!isFunction(traits)?traits:null;}// Rest of the code is just to clean up undefined values\n// and set some proper defaults\n// Also, to clone the incoming object type arguments\nif(isDefined(payload.groupId)){payload.groupId=tryStringify(payload.groupId);}else {delete payload.groupId;}payload.traits=isObjectLiteralAndNotNull(payload.traits)?clone(payload.traits):{};if(isDefined(payload.options)){payload.options=clone(payload.options);}else {delete payload.options;}return payload;};\n\nconst CAPABILITIES_MANAGER='CapabilitiesManager';const CONFIG_MANAGER='ConfigManager';const EVENT_MANAGER='EventManager';const PLUGINS_MANAGER='PluginsManager';const USER_SESSION_MANAGER='UserSessionManager';const ERROR_HANDLER='ErrorHandler';const PLUGIN_ENGINE='PluginEngine';const STORE_MANAGER='StoreManager';const READY_API='readyApi';const EVENT_REPOSITORY='EventRepository';const EXTERNAL_SRC_LOADER='ExternalSrcLoader';const HTTP_CLIENT='HttpClient';const RS_APP='RudderStackApplication';const ANALYTICS_CORE='AnalyticsCore';\n\nconst APP_NAME='RudderLabs JavaScript SDK';const APP_VERSION='3.6.1';const APP_NAMESPACE='com.rudderlabs.javascript';const MODULE_TYPE='npm';const ADBLOCK_PAGE_CATEGORY='RudderJS-Initiated';const ADBLOCK_PAGE_NAME='ad-block page request';const ADBLOCK_PAGE_PATH='/ad-blocked';const GLOBAL_PRELOAD_BUFFER='preloadedEventsBuffer';const CONSENT_TRACK_EVENT_NAME='Consent Management Interaction';\n\nconst QUERY_PARAM_TRAIT_PREFIX='ajs_trait_';const QUERY_PARAM_PROPERTY_PREFIX='ajs_prop_';const QUERY_PARAM_ANONYMOUS_ID_KEY='ajs_aid';const QUERY_PARAM_USER_ID_KEY='ajs_uid';const QUERY_PARAM_TRACK_EVENT_NAME_KEY='ajs_event';\n\nconst DEFAULT_XHR_TIMEOUT_MS=10*1000;// 10 seconds\nconst DEFAULT_COOKIE_MAX_AGE_MS=31536000*1000;// 1 year\nconst DEFAULT_SESSION_TIMEOUT_MS=30*60*1000;// 30 minutes\nconst MIN_SESSION_TIMEOUT_MS=10*1000;// 10 seconds\nconst DEFAULT_DATA_PLANE_EVENTS_BUFFER_TIMEOUT_MS=10*1000;// 10 seconds\nconst DEBOUNCED_TIMEOUT_MS=250;// 250 milliseconds\n\n/**\n * Create globally accessible RudderStackGlobals object\n */const createExposedGlobals=(analyticsInstanceId='app')=>{if(!globalThis.RudderStackGlobals){globalThis.RudderStackGlobals={};}if(!globalThis.RudderStackGlobals[analyticsInstanceId]){globalThis.RudderStackGlobals[analyticsInstanceId]={};}};/**\n * Add move values to globally accessible RudderStackGlobals object per analytics instance\n */const setExposedGlobal=(keyName,value,analyticsInstanceId='app')=>{createExposedGlobals(analyticsInstanceId);globalThis.RudderStackGlobals[analyticsInstanceId][keyName]=value;};/**\n * Get values from globally accessible RudderStackGlobals object by analytics instance\n */const getExposedGlobal=(keyName,analyticsInstanceId='app')=>{createExposedGlobals(analyticsInstanceId);return globalThis.RudderStackGlobals[analyticsInstanceId][keyName];};function debounce(func,thisArg,delay=DEBOUNCED_TIMEOUT_MS){let timeoutId;return (...args)=>{globalThis.clearTimeout(timeoutId);timeoutId=globalThis.setTimeout(()=>{func.apply(thisArg,args);},delay);};}\n\n/**\n * Parse query string params into object values for keys that start with a defined prefix\n */const getEventDataFromQueryString=(params,dataTypeNamePrefix)=>{const data={};params.forEach((value,key)=>{if(key.startsWith(dataTypeNamePrefix)){// remove prefix from key name\nconst dataKey=key.substring(dataTypeNamePrefix.length);// add new key value pair in generated object\ndata[dataKey]=params.get(key);}});return data;};/**\n * Parse query string into preload buffer events & push into existing array before any other events\n */const retrieveEventsFromQueryString=(argumentsArray=[])=>{// Mapping for trait and properties values based on key prefix\nconst eventArgumentToQueryParamMap={trait:QUERY_PARAM_TRAIT_PREFIX,properties:QUERY_PARAM_PROPERTY_PREFIX};const queryObject=new URLSearchParams(globalThis.location.search);// Add track events with name and properties\nif(queryObject.get(QUERY_PARAM_TRACK_EVENT_NAME_KEY)){argumentsArray.unshift(['track',queryObject.get(QUERY_PARAM_TRACK_EVENT_NAME_KEY),getEventDataFromQueryString(queryObject,eventArgumentToQueryParamMap.properties)]);}// Set userId and user traits\nif(queryObject.get(QUERY_PARAM_USER_ID_KEY)){argumentsArray.unshift(['identify',queryObject.get(QUERY_PARAM_USER_ID_KEY),getEventDataFromQueryString(queryObject,eventArgumentToQueryParamMap.trait)]);}// Set anonymousID\nif(queryObject.get(QUERY_PARAM_ANONYMOUS_ID_KEY)){argumentsArray.unshift(['setAnonymousId',queryObject.get(QUERY_PARAM_ANONYMOUS_ID_KEY)]);}};/**\n * Retrieve an existing buffered load method call and remove from the existing array\n */const getPreloadedLoadEvent=preloadedEventsArray=>{const loadMethodName='load';let loadEvent=[];/**\n   * Iterate the buffered API calls until we find load call and process it separately\n   */let i=0;while(i<preloadedEventsArray.length){if(preloadedEventsArray[i]&&preloadedEventsArray[i][0]===loadMethodName){loadEvent=clone(preloadedEventsArray[i]);preloadedEventsArray.splice(i,1);break;}i+=1;}return loadEvent;};/**\n * Promote consent events to the top of the preloaded events array\n * @param preloadedEventsArray Preloaded events array\n * @returns None\n */const promotePreloadedConsentEventsToTop=preloadedEventsArray=>{const consentMethodName='consent';const consentEvents=preloadedEventsArray.filter(bufferedEvent=>bufferedEvent[0]===consentMethodName);const nonConsentEvents=preloadedEventsArray.filter(bufferedEvent=>bufferedEvent[0]!==consentMethodName);// Remove all elements and add consent events first followed by non consent events\n// eslint-disable-next-line unicorn/no-useless-spread\npreloadedEventsArray.splice(0,preloadedEventsArray.length,...consentEvents,...nonConsentEvents);};/**\n * Retrieve any existing events that were triggered before SDK load and enqueue in buffer\n */const retrievePreloadBufferEvents=instance=>{const preloadedEventsArray=getExposedGlobal(GLOBAL_PRELOAD_BUFFER)||[];// Get events that are pre-populated via query string params\nretrieveEventsFromQueryString(preloadedEventsArray);// Enqueue the non load events in the buffer of the global rudder analytics singleton\nif(preloadedEventsArray.length>0){instance.enqueuePreloadBufferEvents(preloadedEventsArray);setExposedGlobal(GLOBAL_PRELOAD_BUFFER,[]);}};const consumePreloadBufferedEvent=(event,analyticsInstance)=>{const methodName=event.shift();let callOptions;if(isFunction(analyticsInstance[methodName])){switch(methodName){case'page':callOptions=pageArgumentsToCallOptions(...event);break;case'track':callOptions=trackArgumentsToCallOptions(...event);break;case'identify':callOptions=identifyArgumentsToCallOptions(...event);break;case'alias':callOptions=aliasArgumentsToCallOptions(...event);break;case'group':callOptions=groupArgumentsToCallOptions(...event);break;default:analyticsInstance[methodName](...event);break;}if(callOptions){analyticsInstance[methodName](callOptions);}}};\n\nconst DEFAULT_EXT_SRC_LOAD_TIMEOUT_MS=10*1000;// 10 seconds\n\nconst LOG_CONTEXT_SEPARATOR=':: ';const SCRIPT_ALREADY_EXISTS_ERROR=id=>`A script with the id \"${id}\" is already loaded. Skipping the loading of this script to prevent conflicts.`;const SCRIPT_LOAD_ERROR=(id,url)=>`Failed to load the script with the id \"${id}\" from URL \"${url}\".`;const SCRIPT_LOAD_TIMEOUT_ERROR=(id,url,timeout)=>`A timeout of ${timeout} ms occurred while trying to load the script with id \"${id}\" from URL \"${url}\".`;const CIRCULAR_REFERENCE_WARNING=(context,key)=>`${context}${LOG_CONTEXT_SEPARATOR}A circular reference has been detected in the object and the property \"${key}\" has been dropped from the output.`;const JSON_STRINGIFY_WARNING=`Failed to convert the value to a JSON string.`;\n\nconst JSON_STRINGIFY='JSONStringify';const getCircularReplacer=(excludeNull,excludeKeys,logger)=>{const ancestors=[];// Here we do not want to use arrow function to use \"this\" in function context\n// eslint-disable-next-line func-names\nreturn function(key,value){if(excludeKeys?.includes(key)){return undefined;}if(excludeNull&&isNullOrUndefined(value)){return undefined;}if(typeof value!=='object'||isNull(value)){return value;}// `this` is the object that value is contained in, i.e., its direct parent.\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore-next-line\nwhile(ancestors.length>0&&ancestors[ancestors.length-1]!==this){ancestors.pop();}if(ancestors.includes(value)){logger?.warn(CIRCULAR_REFERENCE_WARNING(JSON_STRINGIFY,key));return '[Circular Reference]';}ancestors.push(value);return value;};};/**\n * Utility method for JSON stringify object excluding null values & circular references\n *\n * @param {*} value input\n * @param {boolean} excludeNull if it should exclude nul or not\n * @param {function} logger optional logger methods for warning\n * @returns string\n */const stringifyWithoutCircular=(value,excludeNull,excludeKeys,logger)=>{try{return JSON.stringify(value,getCircularReplacer(excludeNull,excludeKeys,logger));}catch(err){logger?.warn(JSON_STRINGIFY_WARNING,err);return null;}};\n\n/**\n * Get mutated error with issue prepended to error message\n * @param err Original error\n * @param issue Issue to prepend to error message\n * @returns Instance of Error with message prepended with issue\n */const getMutatedError=(err,issue)=>{let finalError=err;if(!isTypeOfError(err)){finalError=new Error(`${issue}: ${stringifyWithoutCircular(err)}`);}else {finalError.message=`${issue}: ${err.message}`;}return finalError;};\n\nconst EXTERNAL_SOURCE_LOAD_ORIGIN='RS_JS_SDK';\n\n/**\n * Create the DOM element to load a script marked as RS SDK originated\n *\n * @param {*} url The URL of the script to be loaded\n * @param {*} id ID for the script tag\n * @param {*} async Whether to load the script in async mode. Defaults to `true` [optional]\n * @param {*} onload callback to invoke onload [optional]\n * @param {*} onerror callback to invoke onerror [optional]\n * @param {*} extraAttributes key/value pair with html attributes to add in html tag [optional]\n *\n * @returns HTMLScriptElement\n */const createScriptElement=(url,id,async=true,onload=null,onerror=null,extraAttributes={})=>{const scriptElement=document.createElement('script');scriptElement.type='text/javascript';scriptElement.onload=onload;scriptElement.onerror=onerror;scriptElement.src=url;scriptElement.id=id;scriptElement.async=async;Object.keys(extraAttributes).forEach(attributeName=>{scriptElement.setAttribute(attributeName,extraAttributes[attributeName]);});scriptElement.setAttribute('data-loader',EXTERNAL_SOURCE_LOAD_ORIGIN);return scriptElement;};/**\n * Add script DOM element to DOM\n *\n * @param {*} newScriptElement the script element to add\n *\n * @returns\n */const insertScript=newScriptElement=>{// First try to add it to the head\nconst headElements=document.getElementsByTagName('head');if(headElements.length>0){headElements[0]?.insertBefore(newScriptElement,headElements[0]?.firstChild);return;}// Else wise add it before the first script tag\nconst scriptElements=document.getElementsByTagName('script');if(scriptElements.length>0&&scriptElements[0]?.parentNode){scriptElements[0]?.parentNode.insertBefore(newScriptElement,scriptElements[0]);return;}// Create a new head element and add the script as fallback\nconst headElement=document.createElement('head');headElement.appendChild(newScriptElement);const htmlElement=document.getElementsByTagName('html')[0];htmlElement?.insertBefore(headElement,htmlElement.firstChild);};/**\n * Loads external js file as a script html tag\n *\n * @param {*} url The URL of the script to be loaded\n * @param {*} id ID for the script tag\n * @param {*} timeout loading timeout\n * @param {*} async Whether to load the script in async mode. Defaults to `true` [optional]\n * @param {*} extraAttributes key/value pair with html attributes to add in html tag [optional]\n *\n * @returns\n */const jsFileLoader=(url,id,timeout,async=true,extraAttributes)=>new Promise((resolve,reject)=>{const scriptExists=document.getElementById(id);if(scriptExists){reject(new Error(SCRIPT_ALREADY_EXISTS_ERROR(id)));}try{let timeoutID;const onload=()=>{globalThis.clearTimeout(timeoutID);resolve(id);};const onerror=()=>{globalThis.clearTimeout(timeoutID);reject(new Error(SCRIPT_LOAD_ERROR(id,url)));};// Create the DOM element to load the script and add it to the DOM\ninsertScript(createScriptElement(url,id,async,onload,onerror,extraAttributes));// Reject on timeout\ntimeoutID=globalThis.setTimeout(()=>{reject(new Error(SCRIPT_LOAD_TIMEOUT_ERROR(id,url,timeout)));},timeout);}catch(err){reject(getMutatedError(err,SCRIPT_LOAD_ERROR(id,url)));}});\n\n/**\n * Service to load external resources/files\n */class ExternalSrcLoader{hasErrorHandler=false;constructor(errorHandler,logger,timeout=DEFAULT_EXT_SRC_LOAD_TIMEOUT_MS){this.errorHandler=errorHandler;this.logger=logger;this.timeout=timeout;this.hasErrorHandler=Boolean(this.errorHandler);this.onError=this.onError.bind(this);}/**\n   * Load external resource of type javascript\n   */loadJSFile(config){const{url,id,timeout,async,callback,extraAttributes}=config;const isFireAndForget=!isFunction(callback);jsFileLoader(url,id,timeout||this.timeout,async,extraAttributes).then(id=>{if(!isFireAndForget){callback(id);}}).catch(err=>{this.onError(err);if(!isFireAndForget){callback();}});}/**\n   * Handle errors\n   */onError(error){if(this.hasErrorHandler){this.errorHandler?.onError(error,EXTERNAL_SRC_LOADER);}else {throw error;}}}\n\nvar i=Symbol.for(\"preact-signals\");function t(){if(!(s>1)){var i,t=!1;while(void 0!==h){var r=h;h=void 0;f++;while(void 0!==r){var o=r.o;r.o=void 0;r.f&=-3;if(!(8&r.f)&&c(r))try{r.c();}catch(r){if(!t){i=r;t=!0;}}r=o;}}f=0;s--;if(t)throw i;}else s--;}function r(i){if(s>0)return i();s++;try{return i();}finally{t();}}var o=void 0;var h=void 0,s=0,f=0,v=0;function e(i){if(void 0!==o){var t=i.n;if(void 0===t||t.t!==o){t={i:0,S:i,p:o.s,n:void 0,t:o,e:void 0,x:void 0,r:t};if(void 0!==o.s)o.s.n=t;o.s=t;i.n=t;if(32&o.f)i.S(t);return t;}else if(-1===t.i){t.i=0;if(void 0!==t.n){t.n.p=t.p;if(void 0!==t.p)t.p.n=t.n;t.p=o.s;t.n=void 0;o.s.n=t;o.s=t;}return t;}}}function u(i){this.v=i;this.i=0;this.n=void 0;this.t=void 0;}u.prototype.brand=i;u.prototype.h=function(){return !0;};u.prototype.S=function(i){if(this.t!==i&&void 0===i.e){i.x=this.t;if(void 0!==this.t)this.t.e=i;this.t=i;}};u.prototype.U=function(i){if(void 0!==this.t){var t=i.e,r=i.x;if(void 0!==t){t.x=r;i.e=void 0;}if(void 0!==r){r.e=t;i.x=void 0;}if(i===this.t)this.t=r;}};u.prototype.subscribe=function(i){var t=this;return E(function(){var r=t.value,n=o;o=void 0;try{i(r);}finally{o=n;}});};u.prototype.valueOf=function(){return this.value;};u.prototype.toString=function(){return this.value+\"\";};u.prototype.toJSON=function(){return this.value;};u.prototype.peek=function(){var i=o;o=void 0;try{return this.value;}finally{o=i;}};Object.defineProperty(u.prototype,\"value\",{get:function(){var i=e(this);if(void 0!==i)i.i=this.i;return this.v;},set:function(i){if(i!==this.v){if(f>100)throw new Error(\"Cycle detected\");this.v=i;this.i++;v++;s++;try{for(var r=this.t;void 0!==r;r=r.x)r.t.N();}finally{t();}}}});function d(i){return new u(i);}function c(i){for(var t=i.s;void 0!==t;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return !0;return !1;}function a(i){for(var t=i.s;void 0!==t;t=t.n){var r=t.S.n;if(void 0!==r)t.r=r;t.S.n=t;t.i=-1;if(void 0===t.n){i.s=t;break;}}}function l(i){var t=i.s,r=void 0;while(void 0!==t){var o=t.p;if(-1===t.i){t.S.U(t);if(void 0!==o)o.n=t.n;if(void 0!==t.n)t.n.p=o;}else r=t;t.S.n=t.r;if(void 0!==t.r)t.r=void 0;t=o;}i.s=r;}function y(i){u.call(this,void 0);this.x=i;this.s=void 0;this.g=v-1;this.f=4;}(y.prototype=new u()).h=function(){this.f&=-3;if(1&this.f)return !1;if(32==(36&this.f))return !0;this.f&=-5;if(this.g===v)return !0;this.g=v;this.f|=1;if(this.i>0&&!c(this)){this.f&=-2;return !0;}var i=o;try{a(this);o=this;var t=this.x();if(16&this.f||this.v!==t||0===this.i){this.v=t;this.f&=-17;this.i++;}}catch(i){this.v=i;this.f|=16;this.i++;}o=i;l(this);this.f&=-2;return !0;};y.prototype.S=function(i){if(void 0===this.t){this.f|=36;for(var t=this.s;void 0!==t;t=t.n)t.S.S(t);}u.prototype.S.call(this,i);};y.prototype.U=function(i){if(void 0!==this.t){u.prototype.U.call(this,i);if(void 0===this.t){this.f&=-33;for(var t=this.s;void 0!==t;t=t.n)t.S.U(t);}}};y.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var i=this.t;void 0!==i;i=i.x)i.t.N();}};Object.defineProperty(y.prototype,\"value\",{get:function(){if(1&this.f)throw new Error(\"Cycle detected\");var i=e(this);this.h();if(void 0!==i)i.i=this.i;if(16&this.f)throw this.v;return this.v;}});function _(i){var r=i.u;i.u=void 0;if(\"function\"==typeof r){s++;var n=o;o=void 0;try{r();}catch(t){i.f&=-2;i.f|=8;g(i);throw t;}finally{o=n;t();}}}function g(i){for(var t=i.s;void 0!==t;t=t.n)t.S.U(t);i.x=void 0;i.s=void 0;_(i);}function p(i){if(o!==this)throw new Error(\"Out-of-order effect\");l(this);o=i;this.f&=-2;if(8&this.f)g(this);t();}function b(i){this.x=i;this.u=void 0;this.s=void 0;this.o=void 0;this.f=32;}b.prototype.c=function(){var i=this.S();try{if(8&this.f)return;if(void 0===this.x)return;var t=this.x();if(\"function\"==typeof t)this.u=t;}finally{i();}};b.prototype.S=function(){if(1&this.f)throw new Error(\"Cycle detected\");this.f|=1;this.f&=-9;_(this);a(this);s++;var i=o;o=this;return p.bind(this,i);};b.prototype.N=function(){if(!(2&this.f)){this.f|=2;this.o=h;h=this;}};b.prototype.d=function(){this.f|=8;if(!(1&this.f))g(this);};function E(i){var t=new b(i);try{t.c();}catch(i){t.d();throw i;}return t.d.bind(t);}\n\n/**\n * A buffer queue to serve as a store for any type of data\n */class BufferQueue{constructor(){this.items=[];}enqueue(item){this.items.push(item);}dequeue(){if(this.items.length===0){return null;}return this.items.shift();}isEmpty(){return this.items.length===0;}size(){return this.items.length;}clear(){this.items=[];}}\n\nconst LOG_LEVEL_MAP={LOG:0,INFO:1,DEBUG:2,WARN:3,ERROR:4,NONE:5};const DEFAULT_LOG_LEVEL='ERROR';const LOG_MSG_PREFIX='RS SDK';const LOG_MSG_PREFIX_STYLE='font-weight: bold; background: black; color: white;';const LOG_MSG_STYLE='font-weight: normal;';/**\n * Service to log messages/data to output provider, default is console\n */class Logger{constructor(minLogLevel=DEFAULT_LOG_LEVEL,scope='',logProvider=console){this.minLogLevel=LOG_LEVEL_MAP[minLogLevel];this.scope=scope;this.logProvider=logProvider;}log(...data){this.outputLog('LOG',data);}info(...data){this.outputLog('INFO',data);}debug(...data){this.outputLog('DEBUG',data);}warn(...data){this.outputLog('WARN',data);}error(...data){this.outputLog('ERROR',data);}outputLog(logMethod,data){if(this.minLogLevel<=LOG_LEVEL_MAP[logMethod]){this.logProvider[logMethod.toLowerCase()]?.(...this.formatLogData(data));}}setScope(scopeVal){this.scope=scopeVal||this.scope;}// TODO: should we allow to change the level via global variable on run time\n//  to assist on the fly debugging?\nsetMinLogLevel(logLevel){this.minLogLevel=LOG_LEVEL_MAP[logLevel];if(isUndefined(this.minLogLevel)){this.minLogLevel=LOG_LEVEL_MAP[DEFAULT_LOG_LEVEL];}}/**\n   * Formats the console message using `scope` and styles\n   */formatLogData(data){if(Array.isArray(data)&&data.length>0){// prefix SDK identifier\nlet msg=`%c ${LOG_MSG_PREFIX}`;// format the log message using `scope`\nif(this.scope){msg=`${msg} - ${this.scope}`;}// trim whitespaces for original message\nconst originalMsg=isString(data[0])?data[0].trim():'';// prepare the final message\nmsg=`${msg} %c ${originalMsg}`;const styledLogArgs=[msg,LOG_MSG_PREFIX_STYLE,// add style for the prefix\nLOG_MSG_STYLE// reset the style for the actual message\n];// add first it if it was not a string msg\nif(!isString(data[0])){styledLogArgs.push(data[0]);}// append rest of the original arguments\nstyledLogArgs.push(...data.slice(1));return styledLogArgs;}return data;}}const defaultLogger=new Logger();\n\n// default is v3\nconst SUPPORTED_STORAGE_TYPES=['localStorage','memoryStorage','cookieStorage','sessionStorage','none'];const DEFAULT_STORAGE_TYPE='cookieStorage';\n\nconst SOURCE_CONFIG_OPTION_ERROR=`\"getSourceConfig\" must be a function. Please make sure that it is defined and returns a valid source configuration object.`;const SOURCE_CONFIG_RESOLUTION_ERROR=`Unable to process/parse source configuration response.`;const SOURCE_DISABLED_ERROR=`The source is disabled. Please enable the source in the dashboard to send events.`;const XHR_PAYLOAD_PREP_ERROR=`Failed to prepare data for the request.`;const EVENT_OBJECT_GENERATION_ERROR=`Failed to generate the event object.`;const PLUGIN_EXT_POINT_MISSING_ERROR=`Failed to invoke plugin because the extension point name is missing.`;const PLUGIN_EXT_POINT_INVALID_ERROR=`Failed to invoke plugin because the extension point name is invalid.`;const COMPONENT_BASE_URL_ERROR=component=>`Failed to load the SDK as the base URL for ${component} is not valid.`;// ERROR\nconst UNSUPPORTED_CONSENT_MANAGER_ERROR=(context,selectedConsentManager,consentManagersToPluginNameMap)=>`${context}${LOG_CONTEXT_SEPARATOR}The consent manager \"${selectedConsentManager}\" is not supported. Please choose one of the following supported consent managers: \"${Object.keys(consentManagersToPluginNameMap)}\".`;const REPORTING_PLUGIN_INIT_FAILURE_ERROR=context=>`${context}${LOG_CONTEXT_SEPARATOR}Failed to initialize the error reporting plugin.`;const NOTIFY_FAILURE_ERROR=context=>`${context}${LOG_CONTEXT_SEPARATOR}Failed to notify the error.`;const PLUGIN_NAME_MISSING_ERROR=context=>`${context}${LOG_CONTEXT_SEPARATOR}Plugin name is missing.`;const PLUGIN_ALREADY_EXISTS_ERROR=(context,pluginName)=>`${context}${LOG_CONTEXT_SEPARATOR}Plugin \"${pluginName}\" already exists.`;const PLUGIN_NOT_FOUND_ERROR=(context,pluginName)=>`${context}${LOG_CONTEXT_SEPARATOR}Plugin \"${pluginName}\" not found.`;const PLUGIN_ENGINE_BUG_ERROR=(context,pluginName)=>`${context}${LOG_CONTEXT_SEPARATOR}Plugin \"${pluginName}\" not found in plugins but found in byName. This indicates a bug in the plugin engine. Please report this issue to the development team.`;const PLUGIN_DEPS_ERROR=(context,pluginName,notExistDeps)=>`${context}${LOG_CONTEXT_SEPARATOR}Plugin \"${pluginName}\" could not be loaded because some of its dependencies \"${notExistDeps}\" do not exist.`;const PLUGIN_INVOCATION_ERROR=(context,extPoint,pluginName)=>`${context}${LOG_CONTEXT_SEPARATOR}Failed to invoke the \"${extPoint}\" extension point of plugin \"${pluginName}\".`;const STORAGE_UNAVAILABILITY_ERROR_PREFIX=(context,storageType)=>`${context}${LOG_CONTEXT_SEPARATOR}The \"${storageType}\" storage type is `;const SOURCE_CONFIG_FETCH_ERROR=reason=>`Failed to fetch the source config. Reason: ${reason}`;const WRITE_KEY_VALIDATION_ERROR=writeKey=>`The write key \"${writeKey}\" is invalid. It must be a non-empty string. Please check that the write key is correct and try again.`;const DATA_PLANE_URL_VALIDATION_ERROR=dataPlaneUrl=>`The data plane URL \"${dataPlaneUrl}\" is invalid. It must be a valid URL string. Please check that the data plane URL is correct and try again.`;const READY_API_CALLBACK_ERROR=context=>`${context}${LOG_CONTEXT_SEPARATOR}The callback is not a function.`;const XHR_DELIVERY_ERROR=(prefix,status,statusText,url)=>`${prefix} with status: ${status}, ${statusText} for URL: ${url}.`;const XHR_REQUEST_ERROR=(prefix,e,url)=>`${prefix} due to timeout or no connection (${e?e.type:''}) for URL: ${url}.`;const XHR_SEND_ERROR=(prefix,url)=>`${prefix} for URL: ${url}`;const STORE_DATA_SAVE_ERROR=key=>`Failed to save the value for \"${key}\" to storage`;const STORE_DATA_FETCH_ERROR=key=>`Failed to retrieve or parse data for \"${key}\" from storage`;const DATA_SERVER_REQUEST_FAIL_ERROR=status=>`The server responded with status ${status} while setting the cookies. As a fallback, the cookies will be set client side.`;const FAILED_SETTING_COOKIE_FROM_SERVER_ERROR=key=>`The server failed to set the ${key} cookie. As a fallback, the cookies will be set client side.`;const FAILED_SETTING_COOKIE_FROM_SERVER_GLOBAL_ERROR=`Failed to set/remove cookies via server. As a fallback, the cookies will be managed client side.`;// WARNING\nconst STORAGE_TYPE_VALIDATION_WARNING=(context,storageType,defaultStorageType)=>`${context}${LOG_CONTEXT_SEPARATOR}The storage type \"${storageType}\" is not supported. Please choose one of the following supported types: \"${SUPPORTED_STORAGE_TYPES}\". The default type \"${defaultStorageType}\" will be used instead.`;const UNSUPPORTED_ERROR_REPORTING_PROVIDER_WARNING=(context,selectedErrorReportingProvider,errorReportingProvidersToPluginNameMap,defaultProvider)=>`${context}${LOG_CONTEXT_SEPARATOR}The error reporting provider \"${selectedErrorReportingProvider}\" is not supported. Please choose one of the following supported providers: \"${Object.keys(errorReportingProvidersToPluginNameMap)}\". The default provider \"${defaultProvider}\" will be used instead.`;const UNSUPPORTED_STORAGE_ENCRYPTION_VERSION_WARNING=(context,selectedStorageEncryptionVersion,storageEncryptionVersionsToPluginNameMap,defaultVersion)=>`${context}${LOG_CONTEXT_SEPARATOR}The storage encryption version \"${selectedStorageEncryptionVersion}\" is not supported. Please choose one of the following supported versions: \"${Object.keys(storageEncryptionVersionsToPluginNameMap)}\". The default version \"${defaultVersion}\" will be used instead.`;const STORAGE_DATA_MIGRATION_OVERRIDE_WARNING=(context,storageEncryptionVersion,defaultVersion)=>`${context}${LOG_CONTEXT_SEPARATOR}The storage data migration has been disabled because the configured storage encryption version (${storageEncryptionVersion}) is not the latest (${defaultVersion}). To enable storage data migration, please update the storage encryption version to the latest version.`;const SERVER_SIDE_COOKIE_FEATURE_OVERRIDE_WARNING=(context,providedCookieDomain,currentCookieDomain)=>`${context}${LOG_CONTEXT_SEPARATOR}The provided cookie domain (${providedCookieDomain}) does not match the current webpage's domain (${currentCookieDomain}). Hence, the cookies will be set client-side.`;const RESERVED_KEYWORD_WARNING=(context,property,parentKeyPath,reservedElements)=>`${context}${LOG_CONTEXT_SEPARATOR}The \"${property}\" property defined under \"${parentKeyPath}\" is a reserved keyword. Please choose a different property name to avoid conflicts with reserved keywords (${reservedElements}).`;const UNSUPPORTED_BEACON_API_WARNING=context=>`${context}${LOG_CONTEXT_SEPARATOR}The Beacon API is not supported by your browser. The events will be sent using XHR instead.`;const TIMEOUT_NOT_NUMBER_WARNING=(context,timeout,defaultValue)=>`${context}${LOG_CONTEXT_SEPARATOR}The session timeout value \"${timeout}\" is not a number. The default timeout of ${defaultValue} ms will be used instead.`;const TIMEOUT_ZERO_WARNING=context=>`${context}${LOG_CONTEXT_SEPARATOR}The session timeout value is 0, which disables the automatic session tracking feature. If you want to enable session tracking, please provide a positive integer value for the timeout.`;const TIMEOUT_NOT_RECOMMENDED_WARNING=(context,timeout,minTimeout)=>`${context}${LOG_CONTEXT_SEPARATOR}The session timeout value ${timeout} ms is less than the recommended minimum of ${minTimeout} ms. Please consider increasing the timeout value to ensure optimal performance and reliability.`;const INVALID_SESSION_ID_WARNING=(context,sessionId,minSessionIdLength)=>`${context}${LOG_CONTEXT_SEPARATOR}The provided session ID (${sessionId}) is either invalid, not a positive integer, or not at least \"${minSessionIdLength}\" digits long. A new session ID will be auto-generated instead.`;const STORAGE_QUOTA_EXCEEDED_WARNING=context=>`${context}${LOG_CONTEXT_SEPARATOR}The storage is either full or unavailable, so the data will not be persisted. Switching to in-memory storage.`;const STORAGE_UNAVAILABLE_WARNING=(context,entry,selectedStorageType,finalStorageType)=>`${context}${LOG_CONTEXT_SEPARATOR}The storage type \"${selectedStorageType}\" is not available for entry \"${entry}\". The SDK will initialize the entry with \"${finalStorageType}\" storage type instead.`;const WRITE_KEY_NOT_A_STRING_ERROR=(context,writeKey)=>`${context}${LOG_CONTEXT_SEPARATOR}The write key \"${writeKey}\" is not a string. Please check that the write key is correct and try again.`;const EMPTY_GROUP_CALL_ERROR=context=>`${context}${LOG_CONTEXT_SEPARATOR}The group() method must be called with at least one argument.`;const READY_CALLBACK_INVOKE_ERROR=`Failed to invoke the ready callback`;const API_CALLBACK_INVOKE_ERROR=`API Callback Invocation Failed`;const NATIVE_DEST_PLUGIN_INITIALIZE_ERROR=`NativeDestinationQueuePlugin initialization failed`;const DATAPLANE_PLUGIN_INITIALIZE_ERROR=`XhrQueuePlugin initialization failed`;const DMT_PLUGIN_INITIALIZE_ERROR=`DeviceModeTransformationPlugin initialization failed`;const NATIVE_DEST_PLUGIN_ENQUEUE_ERROR=`NativeDestinationQueuePlugin event enqueue failed`;const DATAPLANE_PLUGIN_ENQUEUE_ERROR=`XhrQueuePlugin event enqueue failed`;const INVALID_CONFIG_URL_WARNING=(context,configUrl)=>`${context}${LOG_CONTEXT_SEPARATOR}The provided source config URL \"${configUrl}\" is invalid. Using the default source config URL instead.`;const POLYFILL_SCRIPT_LOAD_ERROR=(scriptId,url)=>`Failed to load the polyfill script with ID \"${scriptId}\" from URL ${url}.`;const UNSUPPORTED_PRE_CONSENT_STORAGE_STRATEGY=(context,selectedStrategy,defaultStrategy)=>`${context}${LOG_CONTEXT_SEPARATOR}The pre-consent storage strategy \"${selectedStrategy}\" is not supported. Please choose one of the following supported strategies: \"none, session, anonymousId\". The default strategy \"${defaultStrategy}\" will be used instead.`;const UNSUPPORTED_PRE_CONSENT_EVENTS_DELIVERY_TYPE=(context,selectedDeliveryType,defaultDeliveryType)=>`${context}${LOG_CONTEXT_SEPARATOR}The pre-consent events delivery type \"${selectedDeliveryType}\" is not supported. Please choose one of the following supported types: \"immediate, buffer\". The default type \"${defaultDeliveryType}\" will be used instead.`;const generateMisconfiguredPluginsWarning=(context,configurationStatus,missingPlugins,shouldAddMissingPlugins)=>{const isSinglePlugin=missingPlugins.length===1;const pluginsString=isSinglePlugin?` '${missingPlugins[0]}' plugin was`:` ['${missingPlugins.join(\"', '\")}'] plugins were`;const baseWarning=`${context}${LOG_CONTEXT_SEPARATOR}${configurationStatus}, but${pluginsString} not configured to load.`;if(shouldAddMissingPlugins){return `${baseWarning} So, ${isSinglePlugin?'the plugin':'those plugins'} will be loaded automatically.`;}return `${baseWarning} Ignore if this was intentional. Otherwise, consider adding ${isSinglePlugin?'it':'them'} to the 'plugins' load API option.`;};const INVALID_POLYFILL_URL_WARNING=(context,customPolyfillUrl)=>`${context}${LOG_CONTEXT_SEPARATOR}The provided polyfill URL \"${customPolyfillUrl}\" is invalid. The default polyfill URL will be used instead.`;// DEBUG\n\nconst CDN_INT_DIR='js-integrations';const CDN_PLUGINS_DIR='plugins';const URL_PATTERN=new RegExp('^(https?:\\\\/\\\\/)'+// protocol\n'('+'((([a-zA-Z\\\\d]([a-zA-Z\\\\d-]*[a-zA-Z\\\\d])*)\\\\.)+[a-zA-Z]{2,}|'+// domain name\n'localhost|'+// localhost\n'((25[0-5]|2[0-4][0-9]|[0-1]?[0-9]?[0-9]?)\\\\.){3}'+// OR IP (v4) address first 3 octets\n'(25[0-5]|2[0-4][0-9]|[0-1]?[0-9]?[0-9]?))'+// last octet of IP address\n')'+'(\\\\:\\\\d+)?'+// port\n'(\\\\/[-a-zA-Z\\\\d%_.~+]*)*'+// path\n'(\\\\?[;&a-zA-Z\\\\d%_.~+=-]*)?'+// query string\n'(\\\\#[-a-zA-Z\\\\d_]*)?$')// fragment locator\n;\n\nconst BUILD_TYPE='modern';const SDK_CDN_BASE_URL='https://cdn.rudderlabs.com';const CDN_ARCH_VERSION_DIR='v3';const DEST_SDK_BASE_URL=`${SDK_CDN_BASE_URL}/${CDN_ARCH_VERSION_DIR}/${BUILD_TYPE}/${CDN_INT_DIR}`;const PLUGINS_BASE_URL=`${SDK_CDN_BASE_URL}/${CDN_ARCH_VERSION_DIR}/${BUILD_TYPE}/${CDN_PLUGINS_DIR}`;const DEFAULT_CONFIG_BE_URL='https://api.rudderstack.com';\n\nconst DEFAULT_ERROR_REPORTING_PROVIDER='bugsnag';const DEFAULT_STORAGE_ENCRYPTION_VERSION='v3';const DEFAULT_DATA_PLANE_EVENTS_TRANSPORT='xhr';const ConsentManagersToPluginNameMap={oneTrust:'OneTrustConsentManager',ketch:'KetchConsentManager',custom:'CustomConsentManager'};const ErrorReportingProvidersToPluginNameMap={[DEFAULT_ERROR_REPORTING_PROVIDER]:'Bugsnag'};const StorageEncryptionVersionsToPluginNameMap={[DEFAULT_STORAGE_ENCRYPTION_VERSION]:'StorageEncryption',legacy:'StorageEncryptionLegacy'};const DataPlaneEventsTransportToPluginNameMap={[DEFAULT_DATA_PLANE_EVENTS_TRANSPORT]:'XhrQueue',beacon:'BeaconQueue'};const DEFAULT_DATA_SERVICE_ENDPOINT='rsaRequest';\n\nconst defaultLoadOptions={logLevel:'ERROR',configUrl:DEFAULT_CONFIG_BE_URL,loadIntegration:true,sessions:{autoTrack:true,timeout:DEFAULT_SESSION_TIMEOUT_MS},sameSiteCookie:'Lax',polyfillIfRequired:true,integrations:{All:true},useBeacon:false,beaconQueueOptions:{},destinationsQueueOptions:{},queueOptions:{},lockIntegrationsVersion:false,lockPluginsVersion:false,uaChTrackLevel:'none',plugins:[],useGlobalIntegrationsConfigInEvents:false,bufferDataPlaneEventsUntilReady:false,dataPlaneEventsBufferTimeout:DEFAULT_DATA_PLANE_EVENTS_BUFFER_TIMEOUT_MS,storage:{encryption:{version:DEFAULT_STORAGE_ENCRYPTION_VERSION},migrate:true},sendAdblockPageOptions:{},useServerSideCookies:false};const loadOptionsState=d(clone(defaultLoadOptions));\n\nconst DEFAULT_USER_SESSION_VALUES={userId:'',userTraits:{},anonymousId:'',groupId:'',groupTraits:{},initialReferrer:'',initialReferringDomain:'',sessionInfo:{},authToken:null};const SERVER_SIDE_COOKIES_DEBOUNCE_TIME=10;// milliseconds\n\nconst defaultSessionConfiguration={autoTrack:true,timeout:DEFAULT_SESSION_TIMEOUT_MS};const sessionState={userId:d(DEFAULT_USER_SESSION_VALUES.userId),userTraits:d(DEFAULT_USER_SESSION_VALUES.userTraits),anonymousId:d(DEFAULT_USER_SESSION_VALUES.anonymousId),groupId:d(DEFAULT_USER_SESSION_VALUES.groupId),groupTraits:d(DEFAULT_USER_SESSION_VALUES.groupTraits),initialReferrer:d(DEFAULT_USER_SESSION_VALUES.initialReferrer),initialReferringDomain:d(DEFAULT_USER_SESSION_VALUES.initialReferringDomain),sessionInfo:d(DEFAULT_USER_SESSION_VALUES.sessionInfo),authToken:d(DEFAULT_USER_SESSION_VALUES.authToken)};\n\nconst capabilitiesState={isOnline:d(true),storage:{isLocalStorageAvailable:d(false),isCookieStorageAvailable:d(false),isSessionStorageAvailable:d(false)},isBeaconAvailable:d(false),isLegacyDOM:d(false),isUaCHAvailable:d(false),isCryptoAvailable:d(false),isIE11:d(false),isAdBlocked:d(false)};\n\nconst reportingState={isErrorReportingEnabled:d(false),isMetricsReportingEnabled:d(false),errorReportingProviderPluginName:d(undefined),isErrorReportingPluginLoaded:d(false)};\n\nconst sourceConfigState=d(undefined);\n\nconst lifecycleState={activeDataplaneUrl:d(undefined),integrationsCDNPath:d(DEST_SDK_BASE_URL),pluginsCDNPath:d(PLUGINS_BASE_URL),sourceConfigUrl:d(undefined),status:d(undefined),initialized:d(false),logLevel:d('ERROR'),loaded:d(false),readyCallbacks:d([]),writeKey:d(undefined),dataPlaneUrl:d(undefined)};\n\nconst consentsState={enabled:d(false),initialized:d(false),data:d({}),activeConsentManagerPluginName:d(undefined),preConsent:d({enabled:false}),postConsent:d({}),resolutionStrategy:d('and'),provider:d(undefined),metadata:d(undefined)};\n\nconst metricsState={retries:d(0),dropped:d(0),sent:d(0),queued:d(0),triggered:d(0)};\n\nconst contextState={app:d({name:APP_NAME,namespace:APP_NAMESPACE,version:APP_VERSION,installType:MODULE_TYPE}),traits:d(null),library:d({name:APP_NAME,version:APP_VERSION,snippetVersion:globalThis.RudderSnippetVersion}),userAgent:d(''),device:d(null),network:d(null),os:d({name:'',version:''}),locale:d(null),screen:d({density:0,width:0,height:0,innerWidth:0,innerHeight:0}),'ua-ch':d(undefined),timezone:d(undefined)};\n\nconst nativeDestinationsState={configuredDestinations:d([]),activeDestinations:d([]),loadOnlyIntegrations:d({}),failedDestinations:d([]),loadIntegration:d(true),initializedDestinations:d([]),clientDestinationsReady:d(false),integrationsConfig:d({})};\n\nconst eventBufferState={toBeProcessedArray:d([]),readyCallbacksArray:d([])};\n\nconst pluginsState={ready:d(false),loadedPlugins:d([]),failedPlugins:d([]),pluginsToLoadFromConfig:d([]),activePlugins:d([]),totalPluginsToLoad:d(0)};\n\nconst storageState={encryptionPluginName:d(undefined),migrate:d(false),type:d(undefined),cookie:d(undefined),entries:d({}),trulyAnonymousTracking:d(false)};\n\nconst serverSideCookiesState={isEnabledServerSideCookies:d(false),dataServiceUrl:d(undefined)};\n\nconst dataPlaneEventsState={eventsQueuePluginName:d(undefined),deliveryEnabled:d(true)// Delivery should always happen\n};\n\nconst defaultStateValues={capabilities:capabilitiesState,consents:consentsState,context:contextState,eventBuffer:eventBufferState,lifecycle:lifecycleState,loadOptions:loadOptionsState,metrics:metricsState,nativeDestinations:nativeDestinationsState,plugins:pluginsState,reporting:reportingState,session:sessionState,source:sourceConfigState,storage:storageState,serverCookies:serverSideCookiesState,dataPlaneEvents:dataPlaneEventsState};const state={...clone(defaultStateValues)};\n\n//  to next or return the value if it is the last one instead of an array per\n//  plugin that is the normal invoke\n// TODO: add invoke method for extension point that we know only one plugin can be used. add invokeMultiple and invokeSingle methods\nclass PluginEngine{plugins=[];byName={};cache={};config={throws:true};constructor(options={},logger){this.config={throws:true,...options};this.logger=logger;}register(plugin,state){if(!plugin.name){const errorMessage=PLUGIN_NAME_MISSING_ERROR(PLUGIN_ENGINE);if(this.config.throws){throw new Error(errorMessage);}else {this.logger?.error(errorMessage,plugin);}}if(this.byName[plugin.name]){const errorMessage=PLUGIN_ALREADY_EXISTS_ERROR(PLUGIN_ENGINE,plugin.name);if(this.config.throws){throw new Error(errorMessage);}else {this.logger?.error(errorMessage);}}this.cache={};this.plugins=this.plugins.slice();let pos=this.plugins.length;this.plugins.forEach((pluginItem,index)=>{if(pluginItem.deps?.includes(plugin.name)){pos=Math.min(pos,index);}});this.plugins.splice(pos,0,plugin);this.byName[plugin.name]=plugin;if(isFunction(plugin.initialize)){plugin.initialize(state);}}unregister(name){const plugin=this.byName[name];if(!plugin){const errorMessage=PLUGIN_NOT_FOUND_ERROR(PLUGIN_ENGINE,name);if(this.config.throws){throw new Error(errorMessage);}else {this.logger?.error(errorMessage);}}const index=this.plugins.indexOf(plugin);if(index===-1){const errorMessage=PLUGIN_ENGINE_BUG_ERROR(PLUGIN_ENGINE,name);if(this.config.throws){throw new Error(errorMessage);}else {this.logger?.error(errorMessage);}}this.cache={};delete this.byName[name];this.plugins=this.plugins.slice();this.plugins.splice(index,1);}getPlugin(name){return this.byName[name];}getPlugins(extPoint){const lifeCycleName=extPoint??'.';if(!this.cache[lifeCycleName]){this.cache[lifeCycleName]=this.plugins.filter(plugin=>{if(plugin.deps?.some(dependency=>!this.byName[dependency])){// If deps not exist, then not load it.\nconst notExistDeps=plugin.deps.filter(dependency=>!this.byName[dependency]);this.logger?.error(PLUGIN_DEPS_ERROR(PLUGIN_ENGINE,plugin.name,notExistDeps));return false;}return lifeCycleName==='.'?true:hasValueByPath(plugin,lifeCycleName);});}return this.cache[lifeCycleName];}// This method allows to process this.plugins so that it could\n// do some unified pre-process before application starts.\nprocessRawPlugins(callback){callback(this.plugins);this.cache={};}invoke(extPoint,allowMultiple=true,...args){let extensionPointName=extPoint;if(!extensionPointName){throw new Error(PLUGIN_EXT_POINT_MISSING_ERROR);}const noCall=extensionPointName.startsWith('!');const throws=this.config.throws??extensionPointName.endsWith('!');// eslint-disable-next-line unicorn/better-regex\nextensionPointName=extensionPointName.replace(/(^!|!$)/g,'');if(!extensionPointName){throw new Error(PLUGIN_EXT_POINT_INVALID_ERROR);}const extensionPointNameParts=extensionPointName.split('.');extensionPointNameParts.pop();const pluginMethodPath=extensionPointNameParts.join('.');const pluginsToInvoke=allowMultiple?this.getPlugins(extensionPointName):[this.getPlugins(extensionPointName)[0]];return pluginsToInvoke.map(plugin=>{const method=getValueByPath(plugin,extensionPointName);if(!isFunction(method)||noCall){return method;}try{return method.apply(getValueByPath(plugin,pluginMethodPath),args);}catch(err){// When a plugin failed, doesn't break the app\nif(throws){throw err;}else {this.logger?.error(PLUGIN_INVOCATION_ERROR(PLUGIN_ENGINE,extensionPointName,plugin.name),err);}}return null;});}invokeSingle(extPoint,...args){return this.invoke(extPoint,false,...args)[0];}invokeMultiple(extPoint,...args){return this.invoke(extPoint,true,...args);}}const defaultPluginEngine=new PluginEngine({throws:true},defaultLogger);\n\nconst FAILED_REQUEST_ERR_MSG_PREFIX='The request failed';const ERROR_MESSAGES_TO_BE_FILTERED=[FAILED_REQUEST_ERR_MSG_PREFIX];\n\nconst LOAD_ORIGIN='RS_JS_SDK';\n\n/**\n * Utility method to normalise errors\n */const processError=error=>{let errorMessage;try{if(isString(error)){errorMessage=error;}else if(error instanceof Error){errorMessage=error.message;}else if(error instanceof ErrorEvent){errorMessage=error.message;}// TODO: remove this block once all device mode integrations start using the v3 script loader module (TS)\nelse if(error instanceof Event){const eventTarget=error.target;// Discard all the non-script loading errors\nif(eventTarget&&eventTarget.localName!=='script'){return '';}// Discard script errors that are not originated at SDK or from native SDKs\nif(eventTarget?.dataset&&(eventTarget.dataset.loader!==LOAD_ORIGIN||eventTarget.dataset.isnonnativesdk!=='true')){return '';}errorMessage=`Error in loading a third-party script from URL ${eventTarget?.src} with ID ${eventTarget?.id}.`;}else {errorMessage=error.message?error.message:stringifyWithoutCircular(error);}}catch(e){errorMessage=`Unknown error: ${e.message}`;}return errorMessage;};/**\n * A function to determine whether the error should be promoted to notify or not\n * @param {Error} error\n * @returns\n */const isAllowedToBeNotified=error=>{if(error.message){return !ERROR_MESSAGES_TO_BE_FILTERED.some(e=>error.message.includes(e));}return true;};\n\n/**\n * A service to handle errors\n */class ErrorHandler{// If no logger is passed errors will be thrown as unhandled error\nconstructor(logger,pluginEngine){this.logger=logger;this.pluginEngine=pluginEngine;this.errorBuffer=new BufferQueue();this.attachEffect();}attachEffect(){if(state.reporting.isErrorReportingPluginLoaded.value===true){while(this.errorBuffer.size()>0){this.errorBuffer.dequeue();}}}attachErrorListeners(){if('addEventListener'in globalThis){globalThis.addEventListener('error',event=>{this.onError(event,undefined,undefined,undefined,'unhandledException');});globalThis.addEventListener('unhandledrejection',event=>{this.onError(event,undefined,undefined,undefined,'unhandledPromiseRejection');});}else {this.logger?.debug(`Failed to attach global error listeners.`);}}init(externalSrcLoader){if(!this.pluginEngine){return;}try{const extPoint='errorReporting.init';const errReportingInitVal=this.pluginEngine.invokeSingle(extPoint,state,this.pluginEngine,externalSrcLoader,this.logger);if(errReportingInitVal instanceof Promise){errReportingInitVal.then(client=>{this.errReportingClient=client;}).catch(err=>{this.logger?.error(REPORTING_PLUGIN_INIT_FAILURE_ERROR(ERROR_HANDLER),err);});}}catch(err){this.onError(err,ERROR_HANDLER);}}onError(error,context='',customMessage='',shouldAlwaysThrow=false,errorType='handled'){// Error handling is already implemented in processError method\nlet errorMessage=processError(error);// If no error message after we normalize, then we swallow/ignore the errors\nif(!errorMessage){return;}// eslint-disable-next-line @typescript-eslint/no-unused-vars\nerrorMessage=removeDoubleSpaces(`${context}${LOG_CONTEXT_SEPARATOR}${customMessage} ${errorMessage}`);let normalizedError=new Error(errorMessage);if(isTypeOfError(error)){normalizedError=Object.create(error,{message:{value:errorMessage}});}if(errorType==='handled'){// TODO: Remove the below line once the new Reporting plugin is ready\nthis.notifyError(normalizedError);if(this.logger){this.logger.error(errorMessage);if(shouldAlwaysThrow){throw normalizedError;}}else {throw normalizedError;}}// eslint-disable-next-line sonarjs/no-all-duplicated-branches\nif(state.reporting.isErrorReportingEnabled.value&&!state.reporting.isErrorReportingPluginLoaded.value);}/**\n   * Add breadcrumbs to add insight of a user's journey before an error\n   * occurred and send to external error monitoring service via a plugin\n   *\n   * @param {string} breadcrumb breadcrumbs message\n   */leaveBreadcrumb(breadcrumb){if(this.pluginEngine){try{this.pluginEngine.invokeSingle('errorReporting.breadcrumb',this.pluginEngine,this.errReportingClient,breadcrumb,this.logger);}catch(err){this.onError(err,ERROR_HANDLER,'errorReporting.breadcrumb');}}}/**\n   * Send handled errors to external error monitoring service via a plugin\n   *\n   * @param {Error} error Error instance from handled error\n   */notifyError(error){if(this.errReportingClient&&isAllowedToBeNotified(error)){try{this.pluginEngine?.invokeSingle('errorReporting.notify',this.pluginEngine,this.errReportingClient,error,state,this.logger);}catch(err){// Not calling onError here as we don't want to go into infinite loop\nthis.logger?.error(NOTIFY_FAILURE_ERROR(ERROR_HANDLER),err);}}}}const defaultErrorHandler=new ErrorHandler(defaultLogger,defaultPluginEngine);\n\n/**\n * A function to filter and return non cloud mode destinations\n * @param destination\n *\n * @returns boolean\n */const isNonCloudDestination=destination=>Boolean(destination.config.connectionMode!=='cloud'||destination.config.useNativeSDKToSend===true||// this is the older flag for hybrid mode destinations\ndestination.config.useNativeSDK===true);const isHybridModeDestination=destination=>Boolean(destination.config.connectionMode==='hybrid'||destination.config.useNativeSDKToSend===true);/**\n * A function to filter and return non cloud mode destinations\n * @param destinations\n *\n * @returns destinations\n */const getNonCloudDestinations=destinations=>destinations.filter(isNonCloudDestination);\n\n/**\n * List of plugin names that are loaded as dynamic imports in modern builds\n */const pluginNamesList=['BeaconQueue','Bugsnag','CustomConsentManager','DeviceModeDestinations','DeviceModeTransformation','ErrorReporting','ExternalAnonymousId','GoogleLinker','KetchConsentManager','NativeDestinationQueue','OneTrustConsentManager','StorageEncryption','StorageEncryptionLegacy','StorageMigrator','XhrQueue'];\n\nconst remotesMap = {\n'rudderAnalyticsRemotePlugins':{url:()=>Promise.resolve(window.RudderStackGlobals && window.RudderStackGlobals.app && window.RudderStackGlobals.app.pluginsCDNPath ? \"\" + window.RudderStackGlobals.app.pluginsCDNPath + \"/rsa-plugins.js\" : \"https://cdn.rudderlabs.com/v3/modern/plugins/rsa-plugins.js\"),format:'esm',from:'vite'}\n};\n                const loadJS = async (url, fn) => {\n                    const resolvedUrl = typeof url === 'function' ? await url() : url;\n                    const script = document.createElement('script');\n                    script.type = 'text/javascript';\n                    script.onload = fn;\n                    script.src = resolvedUrl;\n                    document.getElementsByTagName('head')[0].appendChild(script);\n                };\n                \n                function merge(obj1, obj2) {\n                  const mergedObj = Object.assign(obj1, obj2);\n                  for (const key of Object.keys(mergedObj)) {\n                    if (typeof mergedObj[key] === 'object' && typeof obj2[key] === 'object') {\n                      mergedObj[key] = merge(mergedObj[key], obj2[key]);\n                    }\n                  }\n                  return mergedObj;\n                }\n\n                const wrapShareModule = remoteFrom => {\n                  return merge({\n                    \n                  }, (globalThis.__federation_shared__ || {})['default'] || {});\n                };\n\n                async function __federation_method_ensure(remoteId) {\n                    const remote = remotesMap[remoteId];\n                    if (!remote.inited) {\n                        if ('var' === remote.format) {\n                            // loading js with script tag\n                            return new Promise(resolve => {\n                                const callback = () => {\n                                    if (!remote.inited) {\n                                        remote.lib = window[remoteId];\n                                        remote.lib.init(wrapShareModule(remote.from));\n                                        remote.inited = true;\n                                    }\n                                    resolve(remote.lib);\n                                };\n                                return loadJS(remote.url, callback);\n                            });\n                        } else if (['esm', 'systemjs'].includes(remote.format)) {\n                            // loading js with import(...)\n                            return new Promise((resolve, reject) => {\n                                const getUrl = typeof remote.url === 'function' ? remote.url : () => Promise.resolve(remote.url);\n                                getUrl().then(url => {\n                                    import(/* webpackIgnore: true */ /* @vite-ignore */ url).then(lib => {\n                                        if (!remote.inited) {\n                                            const shareScope = wrapShareModule(remote.from);\n                                            lib.init(shareScope);\n                                            remote.lib = lib;\n                                            remote.lib.init(shareScope);\n                                            remote.inited = true;\n                                        }\n                                        resolve(remote.lib);\n                                    }).catch(reject);\n                                });\n                            })\n                        }\n                    } else {\n                        return remote.lib;\n                    }\n                }\n\n                function __federation_method_wrapDefault(module, need) {\n                    if (!module?.default && need) {\n                        let obj = Object.create(null);\n                        obj.default = module;\n                        obj.__esModule = true;\n                        return obj;\n                    }\n                    return module;\n                }\n\n                function __federation_method_getRemote(remoteName, componentName) {\n                    return __federation_method_ensure(remoteName).then((remote) => remote.get(componentName).then(factory => factory()));\n                }\n\n/**\n * Get the lazy loaded dynamic import for a plugin name\n */const getFederatedModuleImport=pluginName=>{switch(pluginName){case'BeaconQueue':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./BeaconQueue\").then(module=>__federation_method_wrapDefault(module, true));case'Bugsnag':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./Bugsnag\").then(module=>__federation_method_wrapDefault(module, true));case'CustomConsentManager':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./CustomConsentManager\").then(module=>__federation_method_wrapDefault(module, true));case'DeviceModeDestinations':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./DeviceModeDestinations\").then(module=>__federation_method_wrapDefault(module, true));case'DeviceModeTransformation':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./DeviceModeTransformation\").then(module=>__federation_method_wrapDefault(module, true));case'ErrorReporting':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./ErrorReporting\").then(module=>__federation_method_wrapDefault(module, true));case'ExternalAnonymousId':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./ExternalAnonymousId\").then(module=>__federation_method_wrapDefault(module, true));case'GoogleLinker':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./GoogleLinker\").then(module=>__federation_method_wrapDefault(module, true));case'KetchConsentManager':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./KetchConsentManager\").then(module=>__federation_method_wrapDefault(module, true));case'NativeDestinationQueue':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./NativeDestinationQueue\").then(module=>__federation_method_wrapDefault(module, true));case'OneTrustConsentManager':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./OneTrustConsentManager\").then(module=>__federation_method_wrapDefault(module, true));case'StorageEncryption':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./StorageEncryption\").then(module=>__federation_method_wrapDefault(module, true));case'StorageEncryptionLegacy':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./StorageEncryptionLegacy\").then(module=>__federation_method_wrapDefault(module, true));case'StorageMigrator':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./StorageMigrator\").then(module=>__federation_method_wrapDefault(module, true));case'XhrQueue':return ()=>__federation_method_getRemote(\"rudderAnalyticsRemotePlugins\" , \"./XhrQueue\").then(module=>__federation_method_wrapDefault(module, true));default:return undefined;}};/**\n * Map of active plugin names to their dynamic import\n */const federatedModulesBuildPluginImports=activePluginNames=>{const remotePlugins={};activePluginNames.forEach(pluginName=>{if(pluginNamesList.includes(pluginName)){const lazyLoadImport=getFederatedModuleImport(pluginName);if(lazyLoadImport){remotePlugins[pluginName]=lazyLoadImport;}}});return remotePlugins;};\n\n/**\n * Map of mandatory plugin names and direct imports\n */const getMandatoryPluginsMap=()=>({});/**\n * Map of optional plugin names and direct imports for legacy builds\n */const getOptionalPluginsMap=()=>{{return {};}};/**\n * Map of optional plugin names and dynamic imports for modern builds\n */const getRemotePluginsMap=activePluginNames=>{return federatedModulesBuildPluginImports?.(activePluginNames)||{};};const pluginsInventory={...getMandatoryPluginsMap(),...getOptionalPluginsMap()};const remotePluginsInventory=activePluginNames=>({...getRemotePluginsMap(activePluginNames)});\n\n// TODO: add retry mechanism for getting remote plugins\n// TODO: add timeout error mechanism for marking remote plugins that failed to load as failed in state\nclass PluginsManager{constructor(engine,errorHandler,logger){this.engine=engine;this.errorHandler=errorHandler;this.logger=logger;this.onError=this.onError.bind(this);}/**\n   * Orchestrate the plugin loading and registering\n   */init(){state.lifecycle.status.value='pluginsLoading';// Expose pluginsCDNPath to global object, so it can be used in the promise that determines\n// remote plugin cdn path to support proxied plugin remotes\n{setExposedGlobal('pluginsCDNPath',state.lifecycle.pluginsCDNPath.value);}this.setActivePlugins();this.registerLocalPlugins();this.registerRemotePlugins();this.attachEffects();}/**\n   * Update state based on plugin loaded status\n   */ // eslint-disable-next-line class-methods-use-this\nattachEffects(){E(()=>{const isAllPluginsReady=state.plugins.activePlugins.value.length===0||state.plugins.loadedPlugins.value.length+state.plugins.failedPlugins.value.length===state.plugins.totalPluginsToLoad.value;if(isAllPluginsReady){r(()=>{state.plugins.ready.value=true;// TODO: decide what to do if a plugin fails to load for any reason.\n//  Should we stop here or should we progress?\nstate.lifecycle.status.value='pluginsReady';});}});}/**\n   * Determine the list of plugins that should be loaded based on sourceConfig & load options\n   */ // eslint-disable-next-line class-methods-use-this\ngetPluginsToLoadBasedOnConfig(){// This contains the default plugins if load option has been omitted by user\nlet pluginsToLoadFromConfig=state.plugins.pluginsToLoadFromConfig.value;if(!pluginsToLoadFromConfig){return [];}const pluginGroupsToProcess=[{configurationStatus:()=>isDefined(state.dataPlaneEvents.eventsQueuePluginName.value),configurationStatusStr:'Data plane events delivery is enabled',activePluginName:state.dataPlaneEvents.eventsQueuePluginName.value,supportedPlugins:Object.values(DataPlaneEventsTransportToPluginNameMap),shouldAddMissingPlugins:true},{configurationStatus:()=>isDefined(state.reporting.errorReportingProviderPluginName.value),configurationStatusStr:'Error reporting is enabled',activePluginName:state.reporting.errorReportingProviderPluginName.value,basePlugins:['ErrorReporting'],supportedPlugins:Object.values(ErrorReportingProvidersToPluginNameMap)},{configurationStatus:()=>getNonCloudDestinations(state.nativeDestinations.configuredDestinations.value).length>0,configurationStatusStr:'Device mode destinations are connected to the source',supportedPlugins:['DeviceModeDestinations','NativeDestinationQueue']},{configurationStatus:()=>getNonCloudDestinations(state.nativeDestinations.configuredDestinations.value).some(destination=>destination.shouldApplyDeviceModeTransformation),configurationStatusStr:'Device mode transformations are enabled for at least one destination',supportedPlugins:['DeviceModeTransformation']},{configurationStatus:()=>isDefined(state.consents.activeConsentManagerPluginName.value),configurationStatusStr:'Consent management is enabled',activePluginName:state.consents.activeConsentManagerPluginName.value,supportedPlugins:Object.values(ConsentManagersToPluginNameMap)},{configurationStatus:()=>isDefined(state.storage.encryptionPluginName.value),configurationStatusStr:'Storage encryption is enabled',activePluginName:state.storage.encryptionPluginName.value,supportedPlugins:Object.values(StorageEncryptionVersionsToPluginNameMap)},{configurationStatus:()=>state.storage.migrate.value,configurationStatusStr:'Storage migration is enabled',supportedPlugins:['StorageMigrator']}];const addMissingPlugins=false;pluginGroupsToProcess.forEach(group=>{if(group.configurationStatus()){pluginsToLoadFromConfig=pluginsToLoadFromConfig.filter(group.activePluginName?pluginName=>!(pluginName!==group.activePluginName&&group.supportedPlugins.includes(pluginName)):pluginName=>isDefined(pluginName)// pass through\n);this.addMissingPlugins(group,addMissingPlugins,pluginsToLoadFromConfig);}else {pluginsToLoadFromConfig=pluginsToLoadFromConfig.filter(group.basePlugins!==undefined?pluginName=>!(group.basePlugins.includes(pluginName)||group.supportedPlugins.includes(pluginName)):pluginName=>!group.supportedPlugins.includes(pluginName));}});return [...Object.keys(getMandatoryPluginsMap()),...pluginsToLoadFromConfig];}addMissingPlugins(group,addMissingPlugins,pluginsToLoadFromConfig){const shouldAddMissingPlugins=group.shouldAddMissingPlugins||addMissingPlugins;let pluginsToConfigure;if(group.activePluginName){pluginsToConfigure=[...(group.basePlugins||[]),group.activePluginName];}else {pluginsToConfigure=[...group.supportedPlugins];}const missingPlugins=pluginsToConfigure.filter(pluginName=>!pluginsToLoadFromConfig.includes(pluginName));if(missingPlugins.length>0){if(shouldAddMissingPlugins){pluginsToLoadFromConfig.push(...missingPlugins);}this.logger?.warn(generateMisconfiguredPluginsWarning(PLUGINS_MANAGER,group.configurationStatusStr,missingPlugins,shouldAddMissingPlugins));}}/**\n   * Determine the list of plugins that should be activated\n   */setActivePlugins(){const pluginsToLoad=this.getPluginsToLoadBasedOnConfig();// Merging available mandatory and optional plugin name list\nconst availablePlugins=[...Object.keys(pluginsInventory),...pluginNamesList];const activePlugins=[];const failedPlugins=[];pluginsToLoad.forEach(pluginName=>{if(availablePlugins.includes(pluginName)){activePlugins.push(pluginName);}else {failedPlugins.push(pluginName);}});if(failedPlugins.length>0){this.onError(new Error(`Ignoring loading of unknown plugins: ${failedPlugins.join(',')}. Mandatory plugins: ${Object.keys(getMandatoryPluginsMap()).join(',')}. Load option plugins: ${state.plugins.pluginsToLoadFromConfig.value.join(',')}`));}r(()=>{state.plugins.totalPluginsToLoad.value=pluginsToLoad.length;state.plugins.activePlugins.value=activePlugins;state.plugins.failedPlugins.value=failedPlugins;});}/**\n   * Register plugins that are direct imports to PluginEngine\n   */registerLocalPlugins(){Object.values(pluginsInventory).forEach(localPlugin=>{if(isFunction(localPlugin)&&state.plugins.activePlugins.value.includes(localPlugin().name)){this.register([localPlugin()]);}});}/**\n   * Register plugins that are dynamic imports to PluginEngine\n   */registerRemotePlugins(){const remotePluginsList=remotePluginsInventory(state.plugins.activePlugins.value);Promise.all(Object.keys(remotePluginsList).map(async remotePluginKey=>{await remotePluginsList[remotePluginKey]().then(remotePluginModule=>this.register([remotePluginModule.default()])).catch(err=>{// TODO: add retry here if dynamic import fails\nstate.plugins.failedPlugins.value=[...state.plugins.failedPlugins.value,remotePluginKey];this.onError(err,remotePluginKey);});})).catch(err=>{this.onError(err);});}/**\n   * Extension point invoke that allows multiple plugins to be registered to it with error handling\n   */invokeMultiple(extPoint,...args){try{return this.engine.invokeMultiple(extPoint,...args);}catch(e){this.onError(e,extPoint);return [];}}/**\n   * Extension point invoke that allows a single plugin to be registered to it with error handling\n   */invokeSingle(extPoint,...args){try{return this.engine.invokeSingle(extPoint,...args);}catch(e){this.onError(e,extPoint);return null;}}/**\n   * Plugin engine register with error handling\n   */register(plugins){plugins.forEach(plugin=>{try{this.engine.register(plugin,state);}catch(e){state.plugins.failedPlugins.value=[...state.plugins.failedPlugins.value,plugin.name];this.onError(e);}});}// TODO: Implement reset API instead\nunregisterLocalPlugins(){Object.values(pluginsInventory).forEach(localPlugin=>{try{this.engine.unregister(localPlugin().name);}catch(e){this.onError(e);}});}/**\n   * Handle errors\n   */onError(error,customMessage){if(this.errorHandler){this.errorHandler.onError(error,PLUGINS_MANAGER,customMessage);}else {throw error;}}}\n\n/**\n * Utility to parse XHR JSON response\n */const responseTextToJson=(responseText,onError)=>{try{return JSON.parse(responseText||'');}catch(err){const error=getMutatedError(err,'Failed to parse response data');if(isFunction(onError)){onError(error);}else {throw error;}}return undefined;};\n\nconst DEFAULT_XHR_REQUEST_OPTIONS={headers:{Accept:'application/json','Content-Type':'application/json;charset=UTF-8'},method:'GET'};/**\n * Utility to create request configuration based on default options\n */const createXhrRequestOptions=(url,options,basicAuthHeader)=>{const requestOptions=mergeDeepRight(DEFAULT_XHR_REQUEST_OPTIONS,options||{});if(basicAuthHeader){requestOptions.headers=mergeDeepRight(requestOptions.headers,{Authorization:basicAuthHeader});}requestOptions.url=url;return requestOptions;};/**\n * Utility implementation of XHR, fetch cannot be used as it requires explicit\n * origin allowed values and not wildcard for CORS requests with credentials and\n * this is not supported by our sourceConfig API\n */const xhrRequest=(options,timeout=DEFAULT_XHR_TIMEOUT_MS,logger)=>new Promise((resolve,reject)=>{let payload;if(options.sendRawData===true){payload=options.data;}else {payload=stringifyWithoutCircular(options.data,false,[],logger);if(isNull(payload)){reject({error:new Error(XHR_PAYLOAD_PREP_ERROR),undefined,options});// return and don't process further if the payload could not be stringified\nreturn;}}const xhr=new XMLHttpRequest();// eslint-disable-next-line @typescript-eslint/no-unused-vars\nconst xhrReject=e=>{reject({error:new Error(XHR_DELIVERY_ERROR(FAILED_REQUEST_ERR_MSG_PREFIX,xhr.status,xhr.statusText,options.url)),xhr,options});};const xhrError=e=>{reject({error:new Error(XHR_REQUEST_ERROR(FAILED_REQUEST_ERR_MSG_PREFIX,e,options.url)),xhr,options});};xhr.ontimeout=xhrError;xhr.onerror=xhrError;xhr.onload=()=>{if(xhr.status>=200&&xhr.status<400){resolve({response:xhr.responseText,xhr,options});}else {xhrReject();}};xhr.open(options.method,options.url);if(options.withCredentials===true){xhr.withCredentials=true;}// The timeout property may be set only in the time interval between a call to the open method\n// and the first call to the send method in legacy browsers\nxhr.timeout=timeout;Object.keys(options.headers).forEach(headerName=>{if(options.headers[headerName]){xhr.setRequestHeader(headerName,options.headers[headerName]);}});try{xhr.send(payload);}catch(err){reject({error:getMutatedError(err,XHR_SEND_ERROR(FAILED_REQUEST_ERR_MSG_PREFIX,options.url)),xhr,options});}});\n\n/**\n * Service to handle data communication with APIs\n */class HttpClient{hasErrorHandler=false;constructor(errorHandler,logger){this.errorHandler=errorHandler;this.logger=logger;this.hasErrorHandler=Boolean(this.errorHandler);this.onError=this.onError.bind(this);}/**\n   * Implement requests in a blocking way\n   */async getData(config){const{url,options,timeout,isRawResponse}=config;try{const data=await xhrRequest(createXhrRequestOptions(url,options,this.basicAuthHeader),timeout,this.logger);return {data:isRawResponse?data.response:responseTextToJson(data.response,this.onError),details:data};}catch(reason){this.onError(reason.error??reason);return {data:undefined,details:reason};}}/**\n   * Implement requests in a non-blocking way\n   */getAsyncData(config){const{callback,url,options,timeout,isRawResponse}=config;const isFireAndForget=!isFunction(callback);xhrRequest(createXhrRequestOptions(url,options,this.basicAuthHeader),timeout,this.logger).then(data=>{if(!isFireAndForget){callback(isRawResponse?data.response:responseTextToJson(data.response,this.onError),data);}}).catch(data=>{this.onError(data.error??data);if(!isFireAndForget){callback(undefined,data);}});}/**\n   * Handle errors\n   */onError(error){if(this.hasErrorHandler){this.errorHandler?.onError(error,HTTP_CLIENT);}else {throw error;}}/**\n   * Set basic authentication header (eg writekey)\n   */setAuthHeader(value,noBtoa=false){const authVal=noBtoa?value:toBase64(`${value}:`);this.basicAuthHeader=`Basic ${authVal}`;}/**\n   * Clear basic authentication header\n   */resetAuthHeader(){this.basicAuthHeader=undefined;}}const defaultHttpClient=new HttpClient(defaultErrorHandler,defaultLogger);\n\nconst COOKIE_STORAGE='cookieStorage';const LOCAL_STORAGE='localStorage';const SESSION_STORAGE='sessionStorage';const MEMORY_STORAGE='memoryStorage';const NO_STORAGE='none';\n\nconst userIdKey='rl_user_id';const userTraitsKey='rl_trait';const anonymousUserIdKey='rl_anonymous_id';const groupIdKey='rl_group_id';const groupTraitsKey='rl_group_trait';const pageInitialReferrerKey='rl_page_init_referrer';const pageInitialReferringDomainKey='rl_page_init_referring_domain';const sessionInfoKey='rl_session';const authTokenKey='rl_auth_token';const COOKIE_KEYS={userId:userIdKey,userTraits:userTraitsKey,anonymousId:anonymousUserIdKey,groupId:groupIdKey,groupTraits:groupTraitsKey,initialReferrer:pageInitialReferrerKey,initialReferringDomain:pageInitialReferringDomainKey,sessionInfo:sessionInfoKey,authToken:authTokenKey};\n\nconst STORAGE_TEST_COOKIE='test_rudder_cookie';const STORAGE_TEST_LOCAL_STORAGE='test_rudder_ls';const STORAGE_TEST_SESSION_STORAGE='test_rudder_ss';const STORAGE_TEST_TOP_LEVEL_DOMAIN='__tld__';const CLIENT_DATA_STORE_COOKIE='clientDataInCookie';const CLIENT_DATA_STORE_LS='clientDataInLocalStorage';const CLIENT_DATA_STORE_MEMORY='clientDataInMemory';const CLIENT_DATA_STORE_SESSION='clientDataInSessionStorage';const USER_SESSION_KEYS=['userId','userTraits','anonymousId','groupId','groupTraits','initialReferrer','initialReferringDomain','sessionInfo','authToken'];\n\nconst storageClientDataStoreNameMap={[COOKIE_STORAGE]:CLIENT_DATA_STORE_COOKIE,[LOCAL_STORAGE]:CLIENT_DATA_STORE_LS,[MEMORY_STORAGE]:CLIENT_DATA_STORE_MEMORY,[SESSION_STORAGE]:CLIENT_DATA_STORE_SESSION};\n\nconst COOKIE_DATA_ENCODING_ERROR=`Failed to encode the cookie data.`;\n\n/**\n * Encode.\n */const encode=(value,logger)=>{try{return encodeURIComponent(value);}catch(err){logger?.error(COOKIE_DATA_ENCODING_ERROR,err);return undefined;}};/**\n * Decode\n */const decode=value=>{try{return decodeURIComponent(value);}catch(err){// Do nothing as non-RS SDK cookies may not be URI encoded\nreturn undefined;}};/**\n * Parse cookie `str`\n */const parse=str=>{const obj={};const pairs=str.split(/\\s*;\\s*/);let pair;if(!pairs[0]){return obj;}// TODO: Decode only the cookies that are needed by the SDK\npairs.forEach(pairItem=>{pair=pairItem.split('=');const keyName=pair[0]?decode(pair[0]):undefined;if(keyName){obj[keyName]=pair[1]?decode(pair[1]):undefined;}});return obj;};/**\n * Set cookie `name` to `value`\n */const set=(name,value,optionsConfig,logger)=>{const options={...(optionsConfig||{})};let cookieString=`${encode(name,logger)}=${encode(value,logger)}`;if(isNull(value)){options.maxage=-1;}if(options.maxage){options.expires=new Date(+new Date()+options.maxage);}if(options.path){cookieString+=`; path=${options.path}`;}if(options.domain){cookieString+=`; domain=${options.domain}`;}if(options.expires){cookieString+=`; expires=${options.expires.toUTCString()}`;}if(options.samesite){cookieString+=`; samesite=${options.samesite}`;}if(options.secure){cookieString+=`; secure`;}globalThis.document.cookie=cookieString;};/**\n * Return all cookies\n */const all=()=>{const cookieStringValue=globalThis.document.cookie;return parse(cookieStringValue);};/**\n * Get cookie `name`\n */const get=name=>all()[name];/**\n * Set or get cookie `name` with `value` and `options` object\n */ // eslint-disable-next-line func-names\nconst cookie=function(name,value,options,logger){switch(arguments.length){case 4:case 3:case 2:return set(name,value,options,logger);case 1:if(name){return get(name);}return all();default:return all();}};\n\nconst detectAdBlockers=(errorHandler,logger)=>{// Apparently, '?view=ad' is a query param that is blocked by majority of adblockers\n// Use source config URL here as it is very unlikely to be blocked by adblockers\n// Only the extra query param should make it vulnerable to adblockers\n// This will work even if the users proxies it.\n// The edge case where this doesn't work is when HEAD method is not allowed by the server (user's)\nconst baseUrl=new URL(state.lifecycle.sourceConfigUrl.value);const url=`${baseUrl.origin}${baseUrl.pathname}?view=ad`;const httpClient=new HttpClient(errorHandler,logger);httpClient.setAuthHeader(state.lifecycle.writeKey.value);httpClient.getAsyncData({url,options:{// We actually don't need the response from the request, so we are using HEAD\nmethod:'HEAD',headers:{'Content-Type':undefined}},isRawResponse:true,callback:(result,details)=>{// not ad blocked if the request is successful or it is not internally redirected on the client side\n// Often adblockers instead of blocking the request, they redirect it to an internal URL\nstate.capabilities.isAdBlocked.value=details?.error!==undefined||details?.xhr?.responseURL!==url;}});};\n\nconst hasCrypto$1=()=>!isNullOrUndefined(globalThis.crypto)&&isFunction(globalThis.crypto.getRandomValues);// eslint-disable-next-line compat/compat -- We are checking for the existence of navigator.userAgentData\nconst hasUAClientHints=()=>!isNullOrUndefined(globalThis.navigator.userAgentData);const hasBeacon=()=>!isNullOrUndefined(globalThis.navigator.sendBeacon)&&isFunction(globalThis.navigator.sendBeacon);const isIE11=()=>Boolean(globalThis.navigator.userAgent.match(/Trident.*rv:11\\./));\n\nconst getUserAgentClientHint=(callback,level='none')=>{if(level==='none'){callback(undefined);}if(level==='default'){callback(navigator.userAgentData);}if(level==='full'){navigator.userAgentData?.getHighEntropyValues(['architecture','bitness','brands','mobile','model','platform','platformVersion','uaFullVersion','fullVersionList','wow64']).then(ua=>{callback(ua);}).catch(()=>{callback();});}};\n\nconst isDatasetAvailable=()=>{const testElement=globalThis.document.createElement('div');testElement.setAttribute('data-a-b','c');return testElement.dataset?testElement.dataset.aB==='c':false;};const legacyJSEngineRequiredPolyfills={// Ideally, we should separate the checks for URL and URLSearchParams but\n// the polyfill service serves them under the same feature name, \"URL\".\nURL:()=>!isFunction(globalThis.URL)||!isFunction(globalThis.URLSearchParams),Promise:()=>!isFunction(globalThis.Promise),'Number.isNaN':()=>!isFunction(globalThis.Number.isNaN),'Number.isInteger':()=>!isFunction(globalThis.Number.isInteger),'Array.from':()=>!isFunction(globalThis.Array.from),'Array.prototype.find':()=>!isFunction(globalThis.Array.prototype.find),'Array.prototype.includes':()=>!isFunction(globalThis.Array.prototype.includes),'String.prototype.endsWith':()=>!isFunction(globalThis.String.prototype.endsWith),'String.prototype.startsWith':()=>!isFunction(globalThis.String.prototype.startsWith),'String.prototype.includes':()=>!isFunction(globalThis.String.prototype.includes),'String.prototype.replaceAll':()=>!isFunction(globalThis.String.prototype.replaceAll),'String.fromCodePoint':()=>!isFunction(globalThis.String.fromCodePoint),'Object.entries':()=>!isFunction(globalThis.Object.entries),'Object.values':()=>!isFunction(globalThis.Object.values),'Object.assign':()=>!isFunction(globalThis.Object.assign),'Object.fromEntries':()=>!isFunction(globalThis.Object.fromEntries),'Element.prototype.dataset':()=>!isDatasetAvailable(),// Ideally, we should separate the checks for TextEncoder and TextDecoder but\n// the polyfill service serves them under the same feature name, \"TextEncoder\".\nTextEncoder:()=>!isFunction(globalThis.TextEncoder)||!isFunction(globalThis.TextDecoder),requestAnimationFrame:()=>!isFunction(globalThis.requestAnimationFrame)||!isFunction(globalThis.cancelAnimationFrame),CustomEvent:()=>!isFunction(globalThis.CustomEvent),'navigator.sendBeacon':()=>!isFunction(globalThis.navigator.sendBeacon),// Note, the polyfill service serves both ArrayBuffer and Uint8Array under the same feature name, \"ArrayBuffer\".\nArrayBuffer:()=>!isFunction(globalThis.Uint8Array),Set:()=>!isFunction(globalThis.Set),atob:()=>!isFunction(globalThis.atob)};const isLegacyJSEngine=()=>{const requiredCapabilitiesList=Object.keys(legacyJSEngineRequiredPolyfills);let needsPolyfill=false;/* eslint-disable-next-line unicorn/no-for-loop */for(let i=0;i<requiredCapabilitiesList.length;i++){const isCapabilityMissing=legacyJSEngineRequiredPolyfills[requiredCapabilitiesList[i]];if(isFunction(isCapabilityMissing)&&isCapabilityMissing()){needsPolyfill=true;break;}}return needsPolyfill;};\n\nconst getScreenDetails=()=>{let screenDetails={density:0,width:0,height:0,innerWidth:0,innerHeight:0};screenDetails={width:globalThis.screen.width,height:globalThis.screen.height,density:globalThis.devicePixelRatio,innerWidth:globalThis.innerWidth,innerHeight:globalThis.innerHeight};return screenDetails;};\n\nconst isStorageQuotaExceeded=e=>{const matchingNames=['QuotaExceededError','NS_ERROR_DOM_QUOTA_REACHED'];// [everything except Firefox, Firefox]\nconst matchingCodes=[22,1014];// [everything except Firefox, Firefox]\nconst isQuotaExceededError=matchingNames.includes(e.name)||matchingCodes.includes(e.code);return e instanceof DOMException&&isQuotaExceededError;};// TODO: also check for SecurityErrors\n//  https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage#exceptions\nconst isStorageAvailable=(type=LOCAL_STORAGE,storageInstance,logger)=>{let storage;let testData;try{switch(type){case MEMORY_STORAGE:return true;case COOKIE_STORAGE:storage=storageInstance;testData=STORAGE_TEST_COOKIE;break;case LOCAL_STORAGE:storage=storageInstance??globalThis.localStorage;testData=STORAGE_TEST_LOCAL_STORAGE;// was STORAGE_TEST_LOCAL_STORAGE in ours and generateUUID() in segment retry one\nbreak;case SESSION_STORAGE:storage=storageInstance??globalThis.sessionStorage;testData=STORAGE_TEST_SESSION_STORAGE;break;default:return false;}if(!storage){return false;}storage.setItem(testData,'true');if(storage.getItem(testData)){storage.removeItem(testData);return true;}return false;}catch(err){const msgPrefix=STORAGE_UNAVAILABILITY_ERROR_PREFIX(CAPABILITIES_MANAGER,type);let reason='unavailable';if(isStorageQuotaExceeded(err)){reason='full';}logger?.warn(`${msgPrefix}${reason}.`,err);return false;}};\n\nconst legacyGetHostname=href=>{const l=document.createElement('a');l.href=href;return l.hostname;};/**\n * Levels returns all levels of the given url\n *\n * The method returns an empty array when the hostname is an ip.\n */const levelsFunc=url=>{// This is called before the polyfills load thus new URL cannot be used\nconst host=typeof globalThis.URL!=='function'?legacyGetHostname(url):new URL(url).hostname;const parts=host?.split('.')??[];const last=parts[parts.length-1];const levels=[];// Ip address.\nif(parts.length===4&&last&&last===parseInt(last,10).toString()){return levels;}// Localhost.\nif(parts.length<=1){// Fix to support localhost\nif(parts[0]&&parts[0].indexOf('localhost')!==-1){return ['localhost'];}return levels;}// Create levels.\nfor(let i=parts.length-2;i>=0;i-=1){levels.push(parts.slice(i).join('.'));}return levels;};/**\n * Get the top domain.\n *\n * The function constructs the levels of domain and attempts to set a global\n * cookie on each one when it succeeds it returns the top level domain.\n *\n * The method returns an empty string when the hostname is an ip.\n */const domain=url=>{const levels=levelsFunc(url);// Lookup the real top level one.\n// eslint-disable-next-line unicorn/no-for-loop\nfor(let i=0;i<levels.length;i+=1){const domain=levels[i];const cname=STORAGE_TEST_TOP_LEVEL_DOMAIN;const opts={domain:`${domain.indexOf('localhost')!==-1?'':'.'}${domain}`};// Set cookie on domain\ncookie(cname,1,opts);// If successful\nif(cookie(cname)){// Remove cookie from domain\ncookie(cname,null,opts);return domain;}}return '';};\n\nconst getDefaultCookieOptions=()=>{const topDomain=`.${domain(globalThis.location.href)}`;return {maxage:DEFAULT_COOKIE_MAX_AGE_MS,path:'/',domain:!topDomain||topDomain==='.'?undefined:topDomain,samesite:'Lax',enabled:true};};const getDefaultLocalStorageOptions=()=>({enabled:true});const getDefaultSessionStorageOptions=()=>({enabled:true});const getDefaultInMemoryStorageOptions=()=>({enabled:true});\n\n/**\n * A storage utility to persist values in cookies via Storage interface\n */class CookieStorage{static globalSingleton=null;isSupportAvailable=true;isEnabled=true;length=0;constructor(options={},logger){if(CookieStorage.globalSingleton){// eslint-disable-next-line no-constructor-return\nreturn CookieStorage.globalSingleton;}this.options=getDefaultCookieOptions();this.logger=logger;this.configure(options);CookieStorage.globalSingleton=this;}configure(options){this.options=mergeDeepRight(this.options??{},options);if(options.sameDomainCookiesOnly){delete this.options.domain;}this.isSupportAvailable=isStorageAvailable(COOKIE_STORAGE,this,this.logger);this.isEnabled=Boolean(this.options.enabled&&this.isSupportAvailable);return this.options;}setItem(key,value){cookie(key,value,this.options,this.logger);this.length=Object.keys(cookie()).length;return true;}// eslint-disable-next-line class-methods-use-this\ngetItem(key){const value=cookie(key);return isUndefined(value)?null:value;}removeItem(key){const result=this.setItem(key,null);this.length=Object.keys(cookie()).length;return result;}// eslint-disable-next-line class-methods-use-this\nclear(){// Not implemented\n// getting a list of all cookie storage keys and remove all values\n// sounds risky to do as it will take on all top domain cookies\n// better to explicitly clear specific ones if needed\n}key(index){const curKeys=this.keys();return curKeys[index]??null;}// eslint-disable-next-line class-methods-use-this\nkeys(){return Object.keys(cookie());}}\n\n/**\n * A storage utility to retain values in memory via Storage interface\n */class InMemoryStorage{isEnabled=true;length=0;data={};constructor(options,logger){this.options=getDefaultInMemoryStorageOptions();this.logger=logger;this.configure(options??{});}configure(options){this.options=mergeDeepRight(this.options,options);this.isEnabled=Boolean(this.options.enabled);return this.options;}setItem(key,value){this.data[key]=value;this.length=Object.keys(this.data).length;return value;}getItem(key){if(key in this.data){return this.data[key];}return null;}removeItem(key){if(key in this.data){delete this.data[key];}this.length=Object.keys(this.data).length;return null;}clear(){this.data={};this.length=0;}key(index){const curKeys=this.keys();return curKeys[index]??null;}keys(){return Object.keys(this.data);}}const defaultInMemoryStorage=new InMemoryStorage({},defaultLogger);\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction getDefaultExportFromCjs (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nvar store$1 = {exports: {}};\n\n(function(module,exports){(function(global,factory){module.exports=factory();})(commonjsGlobal,function(){function isJSON(obj){obj=JSON.stringify(obj);if(!/^\\{[\\s\\S]*\\}$/.test(obj)){return false;}return true;}function stringify(val){return val===undefined||typeof val===\"function\"?val+'':JSON.stringify(val);}function deserialize(value){if(typeof value!=='string'){return undefined;}try{return JSON.parse(value);}catch(e){return value;}}function isFunction(value){return {}.toString.call(value)===\"[object Function]\";}function isArray(value){return Object.prototype.toString.call(value)===\"[object Array]\";}// https://github.com/jaywcjlove/store.js/pull/8\n// Error: QuotaExceededError\nfunction dealIncognito(storage){var _KEY='_Is_Incognit',_VALUE='yes';try{// NOTE: set default storage when not passed in\nif(!storage){storage=window.localStorage;}storage.setItem(_KEY,_VALUE);storage.removeItem(_KEY);}catch(e){var inMemoryStorage={};inMemoryStorage._data={};inMemoryStorage.setItem=function(id,val){return inMemoryStorage._data[id]=String(val);};inMemoryStorage.getItem=function(id){return inMemoryStorage._data.hasOwnProperty(id)?inMemoryStorage._data[id]:undefined;};inMemoryStorage.removeItem=function(id){return delete inMemoryStorage._data[id];};inMemoryStorage.clear=function(){return inMemoryStorage._data={};};storage=inMemoryStorage;}finally{if(storage.getItem(_KEY)===_VALUE)storage.removeItem(_KEY);}return storage;}// deal QuotaExceededError if user use incognito mode in browser\nvar storage=dealIncognito();function Store(){if(!(this instanceof Store)){return new Store();}}Store.prototype={set:function set(key,val){if(key&&!isJSON(key)){storage.setItem(key,stringify(val));}else if(isJSON(key)){for(var a in key)this.set(a,key[a]);}return this;},get:function get(key){// Return all entries if no key\nif(key===undefined){var ret={};this.forEach(function(key,val){return ret[key]=val;});return ret;}if(key.charAt(0)==='?'){return this.has(key.substr(1));}var args=arguments;if(args.length>1){var dt={};for(var i=0,len=args.length;i<len;i++){var value=deserialize(storage.getItem(args[i]));if(this.has(args[i])){dt[args[i]]=value;}}return dt;}return deserialize(storage.getItem(key));},clear:function clear(){storage.clear();return this;},remove:function remove(key){var val=this.get(key);storage.removeItem(key);return val;},has:function has(key){return {}.hasOwnProperty.call(this.get(),key);},keys:function keys(){var d=[];this.forEach(function(k){d.push(k);});return d;},forEach:function forEach(callback){for(var i=0,len=storage.length;i<len;i++){var key=storage.key(i);callback(key,this.get(key));}return this;},search:function search(str){var arr=this.keys(),dt={};for(var i=0,len=arr.length;i<len;i++){if(arr[i].indexOf(str)>-1)dt[arr[i]]=this.get(arr[i]);}return dt;},len:function len(){return storage.length;}};var _Store=null;function store(key,data){var argm=arguments;var dt=null;if(!_Store)_Store=Store();if(argm.length===0)return _Store.get();if(argm.length===1){if(typeof key===\"string\")return _Store.get(key);if(isJSON(key))return _Store.set(key);}if(argm.length===2&&typeof key===\"string\"){if(!data)return _Store.remove(key);if(data&&typeof data===\"string\")return _Store.set(key,data);if(data&&isFunction(data)){dt=null;dt=data(key,_Store.get(key));store.set(key,dt);}}if(argm.length===2&&isArray(key)&&isFunction(data)){for(var i=0,len=key.length;i<len;i++){dt=data(key[i],_Store.get(key[i]));store.set(key[i],dt);}}return store;}for(var a in Store.prototype)store[a]=Store.prototype[a];return store;});})(store$1);var storeExports=store$1.exports;const store = /*@__PURE__*/getDefaultExportFromCjs(storeExports);\n\n//  check if the get, set overloads and search methods are used at all\n//  if we do, ensure we provide types to support overloads as per storejs docs\n//  https://www.npmjs.com/package/storejs\n/**\n * A storage utility to persist values in localstorage via Storage interface\n */class LocalStorage{isSupportAvailable=true;isEnabled=true;length=0;constructor(options={},logger){this.options=getDefaultLocalStorageOptions();this.logger=logger;this.configure(options);}configure(options){this.options=mergeDeepRight(this.options,options);this.isSupportAvailable=isStorageAvailable(LOCAL_STORAGE,this,this.logger);this.isEnabled=Boolean(this.options.enabled&&this.isSupportAvailable);return this.options;}setItem(key,value){store.set(key,value);this.length=store.len();}// eslint-disable-next-line class-methods-use-this\ngetItem(key){const value=store.get(key);return isUndefined(value)?null:value;}removeItem(key){store.remove(key);this.length=store.len();}clear(){store.clear();this.length=0;}key(index){const curKeys=this.keys();return curKeys[index]??null;}// eslint-disable-next-line class-methods-use-this\nkeys(){return store.keys();}}const defaultLocalStorage=new LocalStorage({},defaultLogger);\n\n/**\n * A storage utility to persist values in SessionStorage via Storage interface\n */class SessionStorage{isSupportAvailable=true;isEnabled=true;length=0;store=globalThis.sessionStorage;constructor(options={},logger){this.options=getDefaultSessionStorageOptions();this.logger=logger;this.configure(options);}configure(options){this.options=mergeDeepRight(this.options,options);this.isSupportAvailable=isStorageAvailable(SESSION_STORAGE,this,this.logger);this.isEnabled=Boolean(this.options.enabled&&this.isSupportAvailable);return this.options;}setItem(key,value){this.store.setItem(key,value);this.length=this.store.length;}getItem(key){const value=this.store.getItem(key);return isUndefined(value)?null:value;}removeItem(key){this.store.removeItem(key);this.length=this.store.length;}clear(){this.store.clear();this.length=0;}key(index){return this.store.key(index);}keys(){const keys=[];for(let i=0;i<this.store.length;i+=1){const key=this.store.key(i);if(key!==null){keys.push(key);}}return keys;}}const defaultSessionStorage=new SessionStorage({},defaultLogger);\n\n/**\n * A utility to retrieve the storage singleton instance by type\n */const getStorageEngine=type=>{switch(type){case LOCAL_STORAGE:return defaultLocalStorage;case SESSION_STORAGE:return defaultSessionStorage;case MEMORY_STORAGE:return defaultInMemoryStorage;case COOKIE_STORAGE:return new CookieStorage({},defaultLogger);default:return defaultInMemoryStorage;}};/**\n * Configure cookie storage singleton\n */const configureCookieStorageEngine=options=>{const cookieStorageOptions=new CookieStorage({},defaultLogger).configure(options);state.storage.cookie.value={maxage:cookieStorageOptions.maxage,path:cookieStorageOptions.path,domain:cookieStorageOptions.domain,samesite:cookieStorageOptions.samesite,expires:cookieStorageOptions.expires,secure:cookieStorageOptions.secure};};/**\n * Configure local storage singleton\n */const configureLocalStorageEngine=options=>{defaultLocalStorage.configure(options);};/**\n * Configure in memory storage singleton\n */const configureInMemoryStorageEngine=options=>{defaultInMemoryStorage.configure(options);};/**\n * Configure session storage singleton\n */const configureSessionStorageEngine=options=>{defaultSessionStorage.configure(options);};/**\n * Configure all storage singleton instances\n */const configureStorageEngines=(cookieStorageOptions={},localStorageOptions={},inMemoryStorageOptions={},sessionStorageOptions={})=>{configureCookieStorageEngine(cookieStorageOptions);configureLocalStorageEngine(localStorageOptions);configureInMemoryStorageEngine(inMemoryStorageOptions);configureSessionStorageEngine(sessionStorageOptions);};\n\n/**\n * Store Implementation with dedicated storage\n */class Store{hasErrorHandler=false;constructor(config,engine,pluginsManager){this.id=config.id;this.name=config.name;this.isEncrypted=config.isEncrypted??false;this.validKeys=config.validKeys??{};this.engine=engine??getStorageEngine(LOCAL_STORAGE);this.noKeyValidation=Object.keys(this.validKeys).length===0;this.noCompoundKey=config.noCompoundKey;this.originalEngine=this.engine;this.errorHandler=config.errorHandler??defaultErrorHandler;this.hasErrorHandler=Boolean(this.errorHandler);this.logger=config.logger??defaultLogger;this.pluginsManager=pluginsManager;}/**\n   * Ensure the key is valid and with correct format\n   */createValidKey(key){const{name,id,validKeys,noKeyValidation,noCompoundKey}=this;if(noKeyValidation){return noCompoundKey?key:[name,id,key].join('.');}// validate and return undefined if invalid key\nlet compoundKey;Object.values(validKeys).forEach(validKeyName=>{if(validKeyName===key){compoundKey=noCompoundKey?key:[name,id,key].join('.');}});return compoundKey;}/**\n   * Switch to inMemoryEngine, bringing any existing data with.\n   */swapQueueStoreToInMemoryEngine(){const{name,id,validKeys,noCompoundKey}=this;const inMemoryStorage=getStorageEngine(MEMORY_STORAGE);// grab existing data, but only for this page's queue instance, not all\n// better to keep other queues in localstorage to be flushed later\n// than to pull them into memory and remove them from durable storage\nObject.keys(validKeys).forEach(key=>{const value=this.get(validKeys[key]);const validKey=noCompoundKey?key:[name,id,key].join('.');inMemoryStorage.setItem(validKey,value);// TODO: are we sure we want to drop clientData\n//  if cookies are not available and localstorage is full?\nthis.remove(key);});this.engine=inMemoryStorage;}/**\n   * Set value by key.\n   */set(key,value){const validKey=this.createValidKey(key);if(!validKey){return;}try{// storejs that is used in localstorage engine already stringifies json\nthis.engine.setItem(validKey,this.encrypt(stringifyWithoutCircular(value,false,[],this.logger)));}catch(err){if(isStorageQuotaExceeded(err)){this.logger?.warn(STORAGE_QUOTA_EXCEEDED_WARNING(`Store ${this.id}`));// switch to inMemory engine\nthis.swapQueueStoreToInMemoryEngine();// and save it there\nthis.set(key,value);}else {this.onError(getMutatedError(err,STORE_DATA_SAVE_ERROR(key)));}}}/**\n   * Get by Key.\n   */get(key){const validKey=this.createValidKey(key);try{if(!validKey){return null;}const str=this.decrypt(this.engine.getItem(validKey));if(isNullOrUndefined(str)){return null;}// storejs that is used in localstorage engine already deserializes json strings but swallows errors\nreturn JSON.parse(str);}catch(err){this.onError(new Error(`${STORE_DATA_FETCH_ERROR(key)}: ${err.message}`));return null;}}/**\n   * Remove by Key.\n   */remove(key){const validKey=this.createValidKey(key);if(validKey){this.engine.removeItem(validKey);}}/**\n   * Get original engine\n   */getOriginalEngine(){return this.originalEngine;}/**\n   * Decrypt values\n   */decrypt(value){if(isNullOrUndefined(value)){return null;}return this.crypto(value,'decrypt');}/**\n   * Encrypt value\n   */encrypt(value){return this.crypto(value,'encrypt');}/**\n   * Extension point to use with encryption plugins\n   */crypto(value,mode){const noEncryption=!this.isEncrypted||!value||typeof value!=='string'||trim(value)==='';if(noEncryption){return value;}const extensionPointName=`storage.${mode}`;const formattedValue=this.pluginsManager?this.pluginsManager.invokeSingle(extensionPointName,value):value;return typeof formattedValue==='undefined'?value:formattedValue??'';}/**\n   * Handle errors\n   */onError(error){if(this.hasErrorHandler){this.errorHandler?.onError(error,`Store ${this.id}`);}else {throw error;}}}\n\nconst getStorageTypeFromPreConsentIfApplicable=(state,sessionKey)=>{let overriddenStorageType;if(state.consents.preConsent.value.enabled){switch(state.consents.preConsent.value.storage?.strategy){case'none':overriddenStorageType=NO_STORAGE;break;case'session':if(sessionKey!=='sessionInfo'){overriddenStorageType=NO_STORAGE;}break;case'anonymousId':if(sessionKey!=='anonymousId'){overriddenStorageType=NO_STORAGE;}break;}}return overriddenStorageType;};\n\n/**\n * A service to manage stores & available storage client configurations\n */class StoreManager{stores={};isInitialized=false;hasErrorHandler=false;constructor(pluginsManager,errorHandler,logger){this.errorHandler=errorHandler;this.logger=logger;this.hasErrorHandler=Boolean(this.errorHandler);this.pluginsManager=pluginsManager;this.onError=this.onError.bind(this);}/**\n   * Configure available storage client instances\n   */init(){if(this.isInitialized){return;}const loadOptions=state.loadOptions.value;const config={cookieStorageOptions:{samesite:loadOptions.sameSiteCookie,secure:loadOptions.secureCookie,domain:loadOptions.setCookieDomain,sameDomainCookiesOnly:loadOptions.sameDomainCookiesOnly,enabled:true},localStorageOptions:{enabled:true},inMemoryStorageOptions:{enabled:true},sessionStorageOptions:{enabled:true}};configureStorageEngines(removeUndefinedValues(mergeDeepRight(config.cookieStorageOptions??{},state.storage.cookie?.value??{})),removeUndefinedValues(config.localStorageOptions),removeUndefinedValues(config.inMemoryStorageOptions),removeUndefinedValues(config.sessionStorageOptions));this.initClientDataStores();this.isInitialized=true;}/**\n   * Create store to persist data used by the SDK like session, used details etc\n   */initClientDataStores(){this.initializeStorageState();// TODO: fill in extra config values and bring them in from StoreManagerOptions if needed\n// TODO: should we pass the keys for all in order to validate or leave free as v1.1?\n// Initializing all the enabled store because previous user data might be in different storage\n// that needs auto migration\nconst storageTypes=[MEMORY_STORAGE,LOCAL_STORAGE,COOKIE_STORAGE,SESSION_STORAGE];storageTypes.forEach(storageType=>{if(getStorageEngine(storageType)?.isEnabled){this.setStore({id:storageClientDataStoreNameMap[storageType],name:storageClientDataStoreNameMap[storageType],isEncrypted:true,noCompoundKey:true,type:storageType});}});}initializeStorageState(){let globalStorageType=state.storage.type.value;let entriesOptions=state.loadOptions.value.storage?.entries;// Use the storage options from post consent if anything is defined\nconst postConsentStorageOpts=state.consents.postConsent.value.storage;if(isDefined(postConsentStorageOpts?.type)||isDefined(postConsentStorageOpts?.entries)){globalStorageType=postConsentStorageOpts?.type;entriesOptions=postConsentStorageOpts?.entries;}let trulyAnonymousTracking=true;let storageEntries={};USER_SESSION_KEYS.forEach(sessionKey=>{const key=sessionKey;const storageKey=sessionKey;const configuredStorageType=entriesOptions?.[key]?.type;const preConsentStorageType=getStorageTypeFromPreConsentIfApplicable(state,sessionKey);// Storage type precedence order: pre-consent strategy > entry type > global type > default\nconst storageType=preConsentStorageType??configuredStorageType??globalStorageType??DEFAULT_STORAGE_TYPE;const finalStorageType=this.getResolvedStorageTypeForEntry(storageType,sessionKey);if(finalStorageType!==NO_STORAGE){trulyAnonymousTracking=false;}storageEntries={...storageEntries,[sessionKey]:{type:finalStorageType,key:COOKIE_KEYS[storageKey]}};});r(()=>{state.storage.type.value=globalStorageType;state.storage.entries.value=storageEntries;state.storage.trulyAnonymousTracking.value=trulyAnonymousTracking;});}getResolvedStorageTypeForEntry(storageType,sessionKey){let finalStorageType=storageType;switch(storageType){case LOCAL_STORAGE:if(!getStorageEngine(LOCAL_STORAGE)?.isEnabled){finalStorageType=MEMORY_STORAGE;}break;case SESSION_STORAGE:if(!getStorageEngine(SESSION_STORAGE)?.isEnabled){finalStorageType=MEMORY_STORAGE;}break;case MEMORY_STORAGE:case NO_STORAGE:break;case COOKIE_STORAGE:default:// First try setting the storage to cookie else to local storage\nif(getStorageEngine(COOKIE_STORAGE)?.isEnabled){finalStorageType=COOKIE_STORAGE;}else if(getStorageEngine(LOCAL_STORAGE)?.isEnabled){finalStorageType=LOCAL_STORAGE;}else if(getStorageEngine(SESSION_STORAGE)?.isEnabled){finalStorageType=SESSION_STORAGE;}else {finalStorageType=MEMORY_STORAGE;}break;}if(finalStorageType!==storageType){this.logger?.warn(STORAGE_UNAVAILABLE_WARNING(STORE_MANAGER,sessionKey,storageType,finalStorageType));}return finalStorageType;}/**\n   * Create a new store\n   */setStore(storeConfig){const storageEngine=getStorageEngine(storeConfig.type);this.stores[storeConfig.id]=new Store(storeConfig,storageEngine,this.pluginsManager);return this.stores[storeConfig.id];}/**\n   * Retrieve a store\n   */getStore(id){return this.stores[id];}/**\n   * Handle errors\n   */onError(error){if(this.hasErrorHandler){this.errorHandler?.onError(error,STORE_MANAGER);}else {throw error;}}}\n\nconst removeDuplicateSlashes=str=>str.replace(/\\/{2,}/g,'/');/**\n * Checks if provided url is valid or not\n * @param url\n * @returns true if `url` is valid and false otherwise\n */const isValidURL=url=>{if(!isString(url)){return false;}try{// If URL is supported by the browser, we can use it to validate the URL\n// Otherwise, we can at least check if the URL matches the pattern\nif(isFunction(globalThis.URL)){// eslint-disable-next-line no-new\nnew URL(url);}return URL_PATTERN.test(url);}catch(e){return false;}};\n\nconst validateWriteKey=writeKey=>{if(!isString(writeKey)||writeKey.trim().length===0){throw new Error(WRITE_KEY_VALIDATION_ERROR(writeKey));}};const validateDataPlaneUrl=dataPlaneUrl=>{if(!isValidURL(dataPlaneUrl)){throw new Error(DATA_PLANE_URL_VALIDATION_ERROR(dataPlaneUrl));}};const validateLoadArgs=(writeKey,dataPlaneUrl)=>{validateWriteKey(writeKey);validateDataPlaneUrl(dataPlaneUrl);};const isValidSourceConfig=res=>isObjectLiteralAndNotNull(res)&&isObjectLiteralAndNotNull(res.source)&&!isNullOrUndefined(res.source.id)&&isObjectLiteralAndNotNull(res.source.config)&&Array.isArray(res.source.destinations);const isValidStorageType=storageType=>typeof storageType==='string'&&SUPPORTED_STORAGE_TYPES.includes(storageType);const getTopDomain=url=>{// Create a URL object\nconst urlObj=new URL(url);// Extract the host and protocol\nconst{host,protocol}=urlObj;// Split the host into parts\nconst parts=host.split('.');let topDomain;// Handle different cases, especially for co.uk or similar TLDs\nif(parts.length>2){// Join the last two parts for the top-level domain\ntopDomain=`${parts[parts.length-2]}.${parts[parts.length-1]}`;}else {// If only two parts or less, return as it is\ntopDomain=host;}return {topDomain,protocol};};const getTopDomainUrl=url=>{const{topDomain,protocol}=getTopDomain(url);return `${protocol}//${topDomain}`;};const getDataServiceUrl=(endpoint,useExactDomain)=>{const url=useExactDomain?window.location.origin:getTopDomainUrl(window.location.href);const formattedEndpoint=endpoint.startsWith('/')?endpoint.substring(1):endpoint;return `${url}/${formattedEndpoint}`;};const isWebpageTopLevelDomain=providedDomain=>{const{topDomain}=getTopDomain(window.location.href);return topDomain===providedDomain;};\n\n/**\n * A function to filter enabled destinations and map to required properties only\n * @param destinations\n *\n * @returns Destination[]\n */const filterEnabledDestination=destinations=>{const nativeDestinations=[];destinations.forEach(destination=>{if(destination.enabled&&!destination.deleted){nativeDestinations.push({id:destination.id,displayName:destination.destinationDefinition.displayName,config:destination.config,shouldApplyDeviceModeTransformation:destination.shouldApplyDeviceModeTransformation||false,propagateEventsUntransformedOnError:destination.propagateEventsUntransformedOnError||false,userFriendlyId:`${destination.destinationDefinition.displayName.replaceAll(' ','-')}___${destination.id}`});}});return nativeDestinations;};\n\n/**\n * Removes trailing slash from url\n * @param url\n * @returns url\n */const removeTrailingSlashes=url=>url?.endsWith('/')?removeTrailingSlashes(url.substring(0,url.length-1)):url;const getDomain=url=>{try{const urlObj=new URL(url);return urlObj.host;}catch(error){return null;}};/**\n * Get the referring domain from the referrer URL\n * @param referrer Page referrer\n * @returns Page referring domain\n */const getReferringDomain=referrer=>getDomain(referrer)??'';/**\n * Extracts UTM parameters from the URL\n * @param url Page URL\n * @returns UTM parameters\n */const extractUTMParameters=url=>{const result={};try{const urlObj=new URL(url);const UTM_PREFIX='utm_';urlObj.searchParams.forEach((value,sParam)=>{if(sParam.startsWith(UTM_PREFIX)){let utmParam=sParam.substring(UTM_PREFIX.length);// Not sure why we're doing this\nif(utmParam==='campaign'){utmParam='name';}result[utmParam]=value;}});}catch(error){// Do nothing\n}return result;};/**\n * To get the URL until the hash\n * @param url The input URL\n * @returns URL until the hash\n */const getUrlWithoutHash=url=>{let urlWithoutHash=url;try{const urlObj=new URL(url);urlWithoutHash=urlObj.origin+urlObj.pathname+urlObj.search;}catch(error){// Do nothing\n}return urlWithoutHash;};\n\n/**\n * Determines if the SDK is running inside a chrome extension\n * @returns boolean\n */const isSDKRunningInChromeExtension=()=>!!(window.chrome&&window.chrome.runtime&&window.chrome.runtime.id);\n\nconst DEFAULT_PRE_CONSENT_STORAGE_STRATEGY='none';const DEFAULT_PRE_CONSENT_EVENTS_DELIVERY_TYPE='immediate';\n\nconst isErrorReportingEnabled=sourceConfig=>sourceConfig?.statsCollection?.errors?.enabled===true;const getErrorReportingProviderNameFromConfig=sourceConfig=>sourceConfig?.statsCollection?.errors?.provider;const isMetricsReportingEnabled=sourceConfig=>sourceConfig?.statsCollection?.metrics?.enabled===true;\n\nconst DEFAULT_INTEGRATIONS_CONFIG={All:true};\n\n/**\n * Validates and normalizes the consent options provided by the user\n * @param options Consent options provided by the user\n * @returns Validated and normalized consent options\n */const getValidPostConsentOptions=options=>{const validOptions={sendPageEvent:false,trackConsent:false,discardPreConsentEvents:false};if(isObjectLiteralAndNotNull(options)){const clonedOptions=clone(options);validOptions.storage=clonedOptions.storage;if(isDefined(clonedOptions.integrations)){validOptions.integrations=isObjectLiteralAndNotNull(clonedOptions.integrations)?clonedOptions.integrations:DEFAULT_INTEGRATIONS_CONFIG;}validOptions.discardPreConsentEvents=clonedOptions.discardPreConsentEvents===true;validOptions.sendPageEvent=clonedOptions.sendPageEvent===true;validOptions.trackConsent=clonedOptions.trackConsent===true;if(isNonEmptyObject(clonedOptions.consentManagement)){// Override enabled value with the current state value\nvalidOptions.consentManagement=mergeDeepRight(clonedOptions.consentManagement,{enabled:state.consents.enabled.value});}}return validOptions;};/**\n * Validates if the input is a valid consents data\n * @param value Input consents data\n * @returns true if the input is a valid consents data else false\n */const isValidConsentsData=value=>isNonEmptyObject(value)||Array.isArray(value);/**\n * Retrieves the corresponding provider and plugin name of the selected consent manager from the supported consent managers\n * @param consentManagementOpts consent management options\n * @param logger logger instance\n * @returns Corresponding provider and plugin name of the selected consent manager from the supported consent managers\n */const getConsentManagerInfo=(consentManagementOpts,logger)=>{let{provider}=consentManagementOpts;const consentManagerPluginName=provider?ConsentManagersToPluginNameMap[provider]:undefined;if(provider&&!consentManagerPluginName){logger?.error(UNSUPPORTED_CONSENT_MANAGER_ERROR(CONFIG_MANAGER,provider,ConsentManagersToPluginNameMap));// Reset the provider value\nprovider=undefined;}return {provider,consentManagerPluginName};};/**\n * Validates and converts the consent management options into a normalized format\n * @param consentManagementOpts Consent management options provided by the user\n * @param logger logger instance\n * @returns An object containing the consent manager plugin name, initialized, enabled and consents data\n */const getConsentManagementData=(consentManagementOpts,logger)=>{let consentManagerPluginName;let allowedConsentIds=[];let deniedConsentIds=[];let initialized=false;let provider;let enabled=consentManagementOpts?.enabled===true;if(isNonEmptyObject(consentManagementOpts)&&enabled){// Get the corresponding plugin name of the selected consent manager from the supported consent managers\n({provider,consentManagerPluginName}=getConsentManagerInfo(consentManagementOpts,logger));if(isValidConsentsData(consentManagementOpts.allowedConsentIds)){allowedConsentIds=consentManagementOpts.allowedConsentIds;initialized=true;}if(isValidConsentsData(consentManagementOpts.deniedConsentIds)){deniedConsentIds=consentManagementOpts.deniedConsentIds;initialized=true;}}const consentsData={allowedConsentIds,deniedConsentIds};// Enable consent management only if consent manager is supported\nenabled=enabled&&Boolean(consentManagerPluginName);return {provider,consentManagerPluginName,initialized,enabled,consentsData};};\n\n/**\n * Determines the SDK URL\n * @returns sdkURL\n */const getSDKUrl=()=>{const scripts=document.getElementsByTagName('script');const sdkFileNameRegex=/(?:^|\\/)rsa(\\.min)?\\.js$/;// eslint-disable-next-line no-restricted-syntax\nfor(const script of scripts){const src=script.getAttribute('src');if(src&&sdkFileNameRegex.test(src)){return src;}}return undefined;};/**\n * Updates the reporting state variables from the source config data\n * @param res Source config\n * @param logger Logger instance\n */const updateReportingState=(res,logger)=>{state.reporting.isErrorReportingEnabled.value=isErrorReportingEnabled(res.source.config)&&!isSDKRunningInChromeExtension();state.reporting.isMetricsReportingEnabled.value=isMetricsReportingEnabled(res.source.config);if(state.reporting.isErrorReportingEnabled.value){const errReportingProvider=getErrorReportingProviderNameFromConfig(res.source.config);// Get the corresponding plugin name of the selected error reporting provider from the supported error reporting providers\nconst errReportingProviderPlugin=errReportingProvider?ErrorReportingProvidersToPluginNameMap[errReportingProvider]:undefined;if(!isUndefined(errReportingProvider)&&!errReportingProviderPlugin){// set the default error reporting provider\nlogger?.warn(UNSUPPORTED_ERROR_REPORTING_PROVIDER_WARNING(CONFIG_MANAGER,errReportingProvider,ErrorReportingProvidersToPluginNameMap,DEFAULT_ERROR_REPORTING_PROVIDER));}state.reporting.errorReportingProviderPluginName.value=errReportingProviderPlugin??ErrorReportingProvidersToPluginNameMap[DEFAULT_ERROR_REPORTING_PROVIDER];}};const updateStorageStateFromLoadOptions=logger=>{const{useServerSideCookies,dataServiceEndpoint,storage:storageOptsFromLoad,setCookieDomain,sameDomainCookiesOnly}=state.loadOptions.value;let storageType=storageOptsFromLoad?.type;if(isDefined(storageType)&&!isValidStorageType(storageType)){logger?.warn(STORAGE_TYPE_VALIDATION_WARNING(CONFIG_MANAGER,storageType,DEFAULT_STORAGE_TYPE));storageType=DEFAULT_STORAGE_TYPE;}let storageEncryptionVersion=storageOptsFromLoad?.encryption?.version;const encryptionPluginName=storageEncryptionVersion&&StorageEncryptionVersionsToPluginNameMap[storageEncryptionVersion];if(!isUndefined(storageEncryptionVersion)&&isUndefined(encryptionPluginName)){// set the default encryption plugin\nlogger?.warn(UNSUPPORTED_STORAGE_ENCRYPTION_VERSION_WARNING(CONFIG_MANAGER,storageEncryptionVersion,StorageEncryptionVersionsToPluginNameMap,DEFAULT_STORAGE_ENCRYPTION_VERSION));storageEncryptionVersion=DEFAULT_STORAGE_ENCRYPTION_VERSION;}else if(isUndefined(storageEncryptionVersion)){storageEncryptionVersion=DEFAULT_STORAGE_ENCRYPTION_VERSION;}// Allow migration only if the configured encryption version is the default encryption version\nconst configuredMigrationValue=storageOptsFromLoad?.migrate;const finalMigrationVal=configuredMigrationValue&&storageEncryptionVersion===DEFAULT_STORAGE_ENCRYPTION_VERSION;if(configuredMigrationValue===true&&finalMigrationVal!==configuredMigrationValue){logger?.warn(STORAGE_DATA_MIGRATION_OVERRIDE_WARNING(CONFIG_MANAGER,storageEncryptionVersion,DEFAULT_STORAGE_ENCRYPTION_VERSION));}r(()=>{state.storage.type.value=storageType;let cookieOptions=storageOptsFromLoad?.cookie??{};if(useServerSideCookies){state.serverCookies.isEnabledServerSideCookies.value=useServerSideCookies;const providedCookieDomain=cookieOptions.domain??setCookieDomain;/**\n       * Based on the following conditions, we decide whether to use the exact domain or not to determine the data service URL:\n       * 1. If the cookie domain is provided and it is not a top-level domain, then use the exact domain\n       * 2. If the sameDomainCookiesOnly flag is set to true, then use the exact domain\n       */const useExactDomain=isDefined(providedCookieDomain)&&!isWebpageTopLevelDomain(removeLeadingPeriod(providedCookieDomain))||sameDomainCookiesOnly;const dataServiceUrl=getDataServiceUrl(dataServiceEndpoint??DEFAULT_DATA_SERVICE_ENDPOINT,useExactDomain??false);if(isValidURL(dataServiceUrl)){state.serverCookies.dataServiceUrl.value=removeTrailingSlashes(dataServiceUrl);const curHost=getDomain(window.location.href);const dataServiceHost=getDomain(dataServiceUrl);// If the current host is different from the data service host, then it is a cross-site request\n// For server-side cookies to work, we need to set the SameSite=None and Secure attributes\n// One round of cookie options manipulation is taking place here\n// Based on these(setCookieDomain/storage.cookie or sameDomainCookiesOnly) two load-options, final cookie options are set in the storage module\n// TODO: Refactor the cookie options manipulation logic in one place\nif(curHost!==dataServiceHost){cookieOptions={...cookieOptions,samesite:'None',secure:true};}/**\n         * If the sameDomainCookiesOnly flag is not set and the cookie domain is provided(not top level domain),\n         * and the data service host is different from the provided cookie domain, then we disable server-side cookies\n         * ex: provided cookie domain: 'random.com', data service host: 'sub.example.com'\n         */if(!sameDomainCookiesOnly&&useExactDomain&&dataServiceHost!==removeLeadingPeriod(providedCookieDomain)){state.serverCookies.isEnabledServerSideCookies.value=false;logger?.warn(SERVER_SIDE_COOKIE_FEATURE_OVERRIDE_WARNING(CONFIG_MANAGER,providedCookieDomain,dataServiceHost));}}else {state.serverCookies.isEnabledServerSideCookies.value=false;}}state.storage.cookie.value=cookieOptions;state.storage.encryptionPluginName.value=StorageEncryptionVersionsToPluginNameMap[storageEncryptionVersion];state.storage.migrate.value=finalMigrationVal;});};const updateConsentsStateFromLoadOptions=logger=>{const{provider,consentManagerPluginName,initialized,enabled,consentsData}=getConsentManagementData(state.loadOptions.value.consentManagement,logger);// Pre-consent\nconst preConsentOpts=state.loadOptions.value.preConsent;let storageStrategy=preConsentOpts?.storage?.strategy??DEFAULT_PRE_CONSENT_STORAGE_STRATEGY;const StorageStrategies=['none','session','anonymousId'];if(isDefined(storageStrategy)&&!StorageStrategies.includes(storageStrategy)){storageStrategy=DEFAULT_PRE_CONSENT_STORAGE_STRATEGY;logger?.warn(UNSUPPORTED_PRE_CONSENT_STORAGE_STRATEGY(CONFIG_MANAGER,preConsentOpts?.storage?.strategy,DEFAULT_PRE_CONSENT_STORAGE_STRATEGY));}let eventsDeliveryType=preConsentOpts?.events?.delivery??DEFAULT_PRE_CONSENT_EVENTS_DELIVERY_TYPE;const deliveryTypes=['immediate','buffer'];if(isDefined(eventsDeliveryType)&&!deliveryTypes.includes(eventsDeliveryType)){eventsDeliveryType=DEFAULT_PRE_CONSENT_EVENTS_DELIVERY_TYPE;logger?.warn(UNSUPPORTED_PRE_CONSENT_EVENTS_DELIVERY_TYPE(CONFIG_MANAGER,preConsentOpts?.events?.delivery,DEFAULT_PRE_CONSENT_EVENTS_DELIVERY_TYPE));}r(()=>{state.consents.activeConsentManagerPluginName.value=consentManagerPluginName;state.consents.initialized.value=initialized;state.consents.enabled.value=enabled;state.consents.data.value=consentsData;state.consents.provider.value=provider;state.consents.preConsent.value={// Only enable pre-consent if it is explicitly enabled and\n// if it is not already initialized and\n// if consent management is enabled\nenabled:state.loadOptions.value.preConsent?.enabled===true&&initialized===false&&enabled===true,storage:{strategy:storageStrategy},events:{delivery:eventsDeliveryType}};});};/**\n * Determines the consent management state variables from the source config data\n * @param resp Source config response\n * @param logger Logger instance\n */const updateConsentsState=resp=>{let resolutionStrategy=state.consents.resolutionStrategy.value;let cmpMetadata;if(isObjectLiteralAndNotNull(resp.consentManagementMetadata)){if(state.consents.provider.value){resolutionStrategy=resp.consentManagementMetadata.providers.find(p=>p.provider===state.consents.provider.value)?.resolutionStrategy??state.consents.resolutionStrategy.value;}cmpMetadata=resp.consentManagementMetadata;}// If the provider is custom, then the resolution strategy is not applicable\nif(state.consents.provider.value==='custom'){resolutionStrategy=undefined;}r(()=>{state.consents.metadata.value=clone(cmpMetadata);state.consents.resolutionStrategy.value=resolutionStrategy;});};const updateDataPlaneEventsStateFromLoadOptions=logger=>{if(state.dataPlaneEvents.deliveryEnabled.value){const defaultEventsQueuePluginName='XhrQueue';let eventsQueuePluginName=defaultEventsQueuePluginName;if(state.loadOptions.value.useBeacon){if(state.capabilities.isBeaconAvailable.value){eventsQueuePluginName='BeaconQueue';}else {eventsQueuePluginName=defaultEventsQueuePluginName;logger?.warn(UNSUPPORTED_BEACON_API_WARNING(CONFIG_MANAGER));}}r(()=>{state.dataPlaneEvents.eventsQueuePluginName.value=eventsQueuePluginName;});}};const getSourceConfigURL=(configUrl,writeKey,lockIntegrationsVersion,lockPluginsVersion,logger)=>{const defSearchParams=new URLSearchParams({p:MODULE_TYPE,v:APP_VERSION,build:BUILD_TYPE,writeKey,lockIntegrationsVersion:lockIntegrationsVersion.toString(),lockPluginsVersion:lockPluginsVersion.toString()});let origin=DEFAULT_CONFIG_BE_URL;let searchParams=defSearchParams;let pathname='/sourceConfig/';let hash='';if(isValidURL(configUrl)){const configUrlInstance=new URL(configUrl);if(!removeTrailingSlashes(configUrlInstance.pathname).endsWith('/sourceConfig')){configUrlInstance.pathname=`${removeTrailingSlashes(configUrlInstance.pathname)}/sourceConfig/`;}configUrlInstance.pathname=removeDuplicateSlashes(configUrlInstance.pathname);defSearchParams.forEach((value,key)=>{if(configUrlInstance.searchParams.get(key)===null){configUrlInstance.searchParams.set(key,value);}});origin=configUrlInstance.origin;pathname=configUrlInstance.pathname;searchParams=configUrlInstance.searchParams;hash=configUrlInstance.hash;}else {logger?.warn(INVALID_CONFIG_URL_WARNING(CONFIG_MANAGER,configUrl));}return `${origin}${pathname}?${searchParams}${hash}`;};\n\nconst getSDKComponentBaseURL=(componentType,pathSuffix,baseURL,currentVersion,lockVersion,customURL)=>{let sdkComponentURL='';if(customURL){if(!isValidURL(customURL)){throw new Error(COMPONENT_BASE_URL_ERROR(componentType));}return removeTrailingSlashes(customURL);}const sdkURL=getSDKUrl();sdkComponentURL=sdkURL?sdkURL.split('/').slice(0,-1).concat(pathSuffix).join('/'):baseURL;if(lockVersion){sdkComponentURL=sdkComponentURL.replace(`/${CDN_ARCH_VERSION_DIR}/${BUILD_TYPE}/${pathSuffix}`,`/${currentVersion}/${BUILD_TYPE}/${pathSuffix}`);}return sdkComponentURL;};/**\n * A function that determines integration SDK loading path\n * @param currentVersion\n * @param lockIntegrationsVersion\n * @param customIntegrationsCDNPath\n * @returns\n */const getIntegrationsCDNPath=(currentVersion,lockIntegrationsVersion,customIntegrationsCDNPath)=>getSDKComponentBaseURL('integrations',CDN_INT_DIR,DEST_SDK_BASE_URL,currentVersion,lockIntegrationsVersion,customIntegrationsCDNPath);/**\n * A function that determines plugins SDK loading path\n * @param currentVersion Current SDK version\n * @param lockPluginsVersion Flag to lock the plugins version\n * @param customPluginsCDNPath URL to load the plugins from\n * @returns Final plugins CDN path\n */const getPluginsCDNPath=(currentVersion,lockPluginsVersion,customPluginsCDNPath)=>getSDKComponentBaseURL('plugins',CDN_PLUGINS_DIR,PLUGINS_BASE_URL,currentVersion,lockPluginsVersion,customPluginsCDNPath);\n\nclass ConfigManager{hasErrorHandler=false;constructor(httpClient,errorHandler,logger){this.errorHandler=errorHandler;this.logger=logger;this.httpClient=httpClient;this.hasErrorHandler=Boolean(this.errorHandler);this.onError=this.onError.bind(this);this.processConfig=this.processConfig.bind(this);}attachEffects(){E(()=>{this.logger?.setMinLogLevel(state.lifecycle.logLevel.value);});}/**\n   * A function to validate, construct and store loadOption, lifecycle, source and destination\n   * config related information in global state\n   */init(){this.attachEffects();validateLoadArgs(state.lifecycle.writeKey.value,state.lifecycle.dataPlaneUrl.value);const{logLevel,configUrl,lockIntegrationsVersion,lockPluginsVersion,destSDKBaseURL,pluginsSDKBaseURL}=state.loadOptions.value;state.lifecycle.activeDataplaneUrl.value=removeTrailingSlashes(state.lifecycle.dataPlaneUrl.value);// determine the path to fetch integration SDK from\nconst intgCdnUrl=getIntegrationsCDNPath(APP_VERSION,lockIntegrationsVersion,destSDKBaseURL);// determine the path to fetch remote plugins from\nconst pluginsCDNPath=getPluginsCDNPath(APP_VERSION,lockPluginsVersion,pluginsSDKBaseURL);updateStorageStateFromLoadOptions(this.logger);updateConsentsStateFromLoadOptions(this.logger);updateDataPlaneEventsStateFromLoadOptions(this.logger);// set application lifecycle state in global state\nr(()=>{state.lifecycle.integrationsCDNPath.value=intgCdnUrl;state.lifecycle.pluginsCDNPath.value=pluginsCDNPath;if(logLevel){state.lifecycle.logLevel.value=logLevel;}state.lifecycle.sourceConfigUrl.value=getSourceConfigURL(configUrl,state.lifecycle.writeKey.value,lockIntegrationsVersion,lockPluginsVersion,this.logger);});this.getConfig();}/**\n   * Handle errors\n   */onError(error,customMessage,shouldAlwaysThrow){if(this.hasErrorHandler){this.errorHandler?.onError(error,CONFIG_MANAGER,customMessage,shouldAlwaysThrow);}else {throw error;}}/**\n   * A callback function that is executed once we fetch the source config response.\n   * Use to construct and store information that are dependent on the sourceConfig.\n   */processConfig(response,details){// TODO: add retry logic with backoff based on rejectionDetails.xhr.status\n// We can use isErrRetryable utility method\nif(!response){this.onError(SOURCE_CONFIG_FETCH_ERROR(details?.error));return;}let res;try{if(isString(response)){res=JSON.parse(response);}else {res=response;}}catch(err){this.onError(err,SOURCE_CONFIG_RESOLUTION_ERROR,true);return;}if(!isValidSourceConfig(res)){this.onError(new Error(SOURCE_CONFIG_RESOLUTION_ERROR),undefined,true);return;}// Log error and abort if source is disabled\nif(res.source.enabled===false){this.logger?.error(SOURCE_DISABLED_ERROR);return;}// set the values in state for reporting slice\nupdateReportingState(res,this.logger);const nativeDestinations=res.source.destinations.length>0?filterEnabledDestination(res.source.destinations):[];// set in the state --> source, destination, lifecycle, reporting\nr(()=>{// set source related information in state\nstate.source.value={config:res.source.config,id:res.source.id,workspaceId:res.source.workspaceId};// set device mode destination related information in state\nstate.nativeDestinations.configuredDestinations.value=nativeDestinations;// set the desired optional plugins\nstate.plugins.pluginsToLoadFromConfig.value=state.loadOptions.value.plugins??[];updateConsentsState(res);// set application lifecycle state\nstate.lifecycle.status.value='configured';});}/**\n   * A function to fetch source config either from /sourceConfig endpoint\n   * or from getSourceConfig load option\n   * @returns\n   */getConfig(){const sourceConfigFunc=state.loadOptions.value.getSourceConfig;if(sourceConfigFunc){if(!isFunction(sourceConfigFunc)){throw new Error(SOURCE_CONFIG_OPTION_ERROR);}// Fetch source config from the function\nconst res=sourceConfigFunc();if(res instanceof Promise){res.then(pRes=>this.processConfig(pRes)).catch(err=>{this.onError(err,'SourceConfig');});}else {this.processConfig(res);}}else {// Fetch source configuration from the configured URL\nthis.httpClient.getAsyncData({url:state.lifecycle.sourceConfigUrl.value,options:{headers:{'Content-Type':undefined}},callback:this.processConfig});}}}\n\n/**\n * To get the timezone of the user\n *\n * @returns string\n */const getTimezone=()=>{const timezone=new Date().toString().match(/([A-Z]+[+-]\\d+)/);return timezone&&timezone[1]?timezone[1]:'NA';};\n\n/**\n * Get the referrer URL\n * @returns The referrer URL\n */const getReferrer=()=>document?.referrer||'$direct';/**\n * To get the canonical URL of the page\n * @returns canonical URL\n */const getCanonicalUrl=()=>{const tags=document.getElementsByTagName('link');let canonicalUrl='';for(let i=0;tags[i];i+=1){const tag=tags[i];if(tag.getAttribute('rel')==='canonical'&&!canonicalUrl){canonicalUrl=tag.getAttribute('href')??'';break;}}return canonicalUrl;};const getUserAgent=()=>{if(isUndefined(globalThis.navigator)){return null;}let{userAgent}=globalThis.navigator;const{brave}=globalThis.navigator;// For supporting Brave browser detection,\n// add \"Brave/<version>\" to the user agent with the version value from the Chrome component\nif(brave&&Object.getPrototypeOf(brave).isBrave){// Example:\n// Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.5060.114 Safari/537.36\nconst matchedArr=userAgent.match(/(chrome)\\/([\\w.]+)/i);if(matchedArr){userAgent=`${userAgent} Brave/${matchedArr[2]}`;}}return userAgent;};const getLanguage=()=>{if(isUndefined(globalThis.navigator)){return null;}return globalThis.navigator.language??globalThis.navigator.browserLanguage;};/**\n * Default page properties\n * @returns Default page properties\n */const getDefaultPageProperties=()=>{const canonicalUrl=getCanonicalUrl();let path=globalThis.location.pathname;const{href:tabUrl}=globalThis.location;let pageUrl=tabUrl;const{search}=globalThis.location;// If valid canonical URL is provided use this as page URL.\nif(canonicalUrl){try{const urlObj=new URL(canonicalUrl);// If existing, query params of canonical URL will be used instead of the location.search ones\nif(urlObj.search===''){pageUrl=canonicalUrl+search;}else {pageUrl=canonicalUrl;}path=urlObj.pathname;}catch(err){// Do nothing\n}}const url=getUrlWithoutHash(pageUrl);const{title}=document;const referrer=getReferrer();return {path,referrer,referring_domain:getReferringDomain(referrer),search,title,url,tab_url:tabUrl};};\n\nconst POLYFILL_URL=`https://polyfill-fastly.io/v3/polyfill.min.js?version=3.111.0&features=${Object.keys(legacyJSEngineRequiredPolyfills).join('%2C')}`;const POLYFILL_LOAD_TIMEOUT=10*1000;// 10 seconds\nconst POLYFILL_SCRIPT_ID='rudderstackPolyfill';\n\nclass CapabilitiesManager{constructor(errorHandler,logger){this.logger=logger;this.errorHandler=errorHandler;this.externalSrcLoader=new ExternalSrcLoader(this.errorHandler,this.logger);this.onError=this.onError.bind(this);this.onReady=this.onReady.bind(this);}init(){try{this.prepareBrowserCapabilities();this.attachWindowListeners();}catch(err){this.onError(err);}}/**\n   * Detect supported capabilities and set values in state\n   */ // eslint-disable-next-line class-methods-use-this\ndetectBrowserCapabilities(){r(()=>{// Storage related details\nstate.capabilities.storage.isCookieStorageAvailable.value=isStorageAvailable(COOKIE_STORAGE,getStorageEngine(COOKIE_STORAGE),this.logger);state.capabilities.storage.isLocalStorageAvailable.value=isStorageAvailable(LOCAL_STORAGE,undefined,this.logger);state.capabilities.storage.isSessionStorageAvailable.value=isStorageAvailable(SESSION_STORAGE,undefined,this.logger);// Browser feature detection details\nstate.capabilities.isBeaconAvailable.value=hasBeacon();state.capabilities.isUaCHAvailable.value=hasUAClientHints();state.capabilities.isCryptoAvailable.value=hasCrypto$1();state.capabilities.isIE11.value=isIE11();state.capabilities.isOnline.value=globalThis.navigator.onLine;// Get page context details\nstate.context.userAgent.value=getUserAgent();state.context.locale.value=getLanguage();state.context.screen.value=getScreenDetails();state.context.timezone.value=getTimezone();if(hasUAClientHints()){getUserAgentClientHint(uach=>{state.context['ua-ch'].value=uach;},state.loadOptions.value.uaChTrackLevel);}});// Ad blocker detection\nE(()=>{if(state.loadOptions.value.sendAdblockPage===true&&state.lifecycle.sourceConfigUrl.value!==undefined){detectAdBlockers(this.errorHandler,this.logger);}});}/**\n   * Detect if polyfills are required and then load script from polyfill URL\n   */prepareBrowserCapabilities(){state.capabilities.isLegacyDOM.value=isLegacyJSEngine();const customPolyfillUrl=state.loadOptions.value.polyfillURL;let polyfillUrl=POLYFILL_URL;if(isDefinedAndNotNull(customPolyfillUrl)){if(isValidURL(customPolyfillUrl)){polyfillUrl=customPolyfillUrl;}else {this.logger?.warn(INVALID_POLYFILL_URL_WARNING(CAPABILITIES_MANAGER,customPolyfillUrl));}}const shouldLoadPolyfill=state.loadOptions.value.polyfillIfRequired&&state.capabilities.isLegacyDOM.value&&isValidURL(polyfillUrl);if(shouldLoadPolyfill){const isDefaultPolyfillService=polyfillUrl!==state.loadOptions.value.polyfillURL;if(isDefaultPolyfillService){// write key specific callback\n// NOTE: we're not putting this into RudderStackGlobals as providing the property path to the callback function in the polyfill URL is not possible\nconst polyfillCallbackName=`RS_polyfillCallback_${state.lifecycle.writeKey.value}`;const polyfillCallback=()=>{this.onReady();// Remove the entry from window so we don't leave room for calling it again\ndelete globalThis[polyfillCallbackName];};globalThis[polyfillCallbackName]=polyfillCallback;polyfillUrl=`${polyfillUrl}&callback=${polyfillCallbackName}`;}this.externalSrcLoader.loadJSFile({url:polyfillUrl,id:POLYFILL_SCRIPT_ID,async:true,timeout:POLYFILL_LOAD_TIMEOUT,callback:scriptId=>{if(!scriptId){this.onError(new Error(POLYFILL_SCRIPT_LOAD_ERROR(POLYFILL_SCRIPT_ID,polyfillUrl)));}else if(!isDefaultPolyfillService){this.onReady();}}});}else {this.onReady();}}/**\n   * Attach listeners to window to observe event that update capabilities state values\n   */attachWindowListeners(){globalThis.addEventListener('offline',()=>{state.capabilities.isOnline.value=false;});globalThis.addEventListener('online',()=>{state.capabilities.isOnline.value=true;});globalThis.addEventListener('resize',debounce(()=>{state.context.screen.value=getScreenDetails();},this));}/**\n   * Set the lifecycle status to next phase\n   */ // eslint-disable-next-line class-methods-use-this\nonReady(){this.detectBrowserCapabilities();state.lifecycle.status.value='browserCapabilitiesReady';}/**\n   * Handles error\n   * @param error The error object\n   */onError(error){if(this.errorHandler){this.errorHandler.onError(error,CAPABILITIES_MANAGER);}else {throw error;}}}\n\nfunction random(len){return crypto.getRandomValues(new Uint8Array(len));}\n\nvar SIZE=4096,HEX$1=[],IDX$1=0,BUFFER$1;for(;IDX$1<256;IDX$1++){HEX$1[IDX$1]=(IDX$1+256).toString(16).substring(1);}function v4$1(){if(!BUFFER$1||IDX$1+16>SIZE){BUFFER$1=random(SIZE);IDX$1=0;}var i=0,tmp,out='';for(;i<16;i++){tmp=BUFFER$1[IDX$1+i];if(i==6)out+=HEX$1[tmp&15|64];else if(i==8)out+=HEX$1[tmp&63|128];else out+=HEX$1[tmp];if(i&1&&i>1&&i<11)out+='-';}IDX$1+=16;return out;}\n\nvar IDX=256,HEX=[],BUFFER;while(IDX--)HEX[IDX]=(IDX+256).toString(16).substring(1);function v4(){var i=0,num,out='';if(!BUFFER||IDX+16>256){BUFFER=Array(i=256);while(i--)BUFFER[i]=256*Math.random()|0;i=IDX=0;}for(;i<16;i++){num=BUFFER[IDX+i];if(i==6)out+=HEX[num&15|64];else if(i==8)out+=HEX[num&63|128];else out+=HEX[num];if(i&1&&i>1&&i<11)out+='-';}IDX++;return out;}\n\nconst hasCrypto=()=>!isNullOrUndefined(globalThis.crypto)&&isFunction(globalThis.crypto.getRandomValues);\n\nconst generateUUID=()=>{if(hasCrypto()){return v4$1();}return v4();};\n\n/**\n * To get the current timestamp in ISO string format\n * @returns ISO formatted timestamp string\n */const getCurrentTimeFormatted=()=>{const curDateTime=new Date().toISOString();return curDateTime;};\n\nconst CHANNEL='web';// These are the top-level elements in the standard RudderStack event spec\nconst TOP_LEVEL_ELEMENTS=['integrations','anonymousId','originalTimestamp'];// Reserved elements in the context of standard RudderStack event spec\n// Typically, these elements are not allowed to be overridden by the user\nconst CONTEXT_RESERVED_ELEMENTS=['library','consentManagement','userAgent','ua-ch','screen'];// Reserved elements in the standard RudderStack event spec\nconst RESERVED_ELEMENTS=['id','anonymous_id','user_id','sent_at','timestamp','received_at','original_timestamp','event','event_text','channel','context_ip','context_request_ip','context_passed_ip','group_id','previous_id'];\n\n/**\n * A function to check given value is a number or not\n * @param num input value\n * @returns boolean\n */const isNumber=num=>typeof num==='number'&&!Number.isNaN(num);/**\n * A function to check given number has minimum length or not\n * @param minimumLength     minimum length\n * @param num               input number\n * @returns boolean\n */const hasMinLength=(minimumLength,num)=>num.toString().length>=minimumLength;/**\n * A function to check given value is a positive integer or not\n * @param num input value\n * @returns boolean\n */const isPositiveInteger=num=>isNumber(num)&&num>=0&&Number.isInteger(num);\n\nconst MIN_SESSION_ID_LENGTH=10;/**\n * A function to validate current session and return true/false depending on that\n * @returns boolean\n */const hasSessionExpired=expiresAt=>{const timestamp=Date.now();return Boolean(!expiresAt||timestamp>expiresAt);};/**\n * A function to generate session id\n * @returns number\n */const generateSessionId=()=>Date.now();/**\n * Function to validate user provided sessionId\n * @param {number} sessionId\n * @param logger logger\n * @returns\n */const isManualSessionIdValid=(sessionId,logger)=>{if(!sessionId||!isPositiveInteger(sessionId)||!hasMinLength(MIN_SESSION_ID_LENGTH,sessionId)){logger?.warn(INVALID_SESSION_ID_WARNING(USER_SESSION_MANAGER,sessionId,MIN_SESSION_ID_LENGTH));return false;}return true;};/**\n * A function to generate new auto tracking session\n * @param sessionTimeout current timestamp\n * @returns SessionInfo\n */const generateAutoTrackingSession=sessionTimeout=>{const timestamp=Date.now();const timeout=sessionTimeout||DEFAULT_SESSION_TIMEOUT_MS;return {id:timestamp,// set the current timestamp\nexpiresAt:timestamp+timeout,// set the expiry time of the session\ntimeout,sessionStart:undefined,autoTrack:true};};/**\n * A function to generate new manual tracking session\n * @param id Provided sessionId\n * @param logger Logger module\n * @returns SessionInfo\n */const generateManualTrackingSession=(id,logger)=>{const sessionId=isManualSessionIdValid(id,logger)?id:generateSessionId();return {id:sessionId,sessionStart:undefined,manualTrack:true};};const isStorageTypeValidForStoringData=storageType=>Boolean(storageType===COOKIE_STORAGE||storageType===LOCAL_STORAGE||storageType===SESSION_STORAGE||storageType===MEMORY_STORAGE);/**\n * Generate a new anonymousId\n * @returns string anonymousID\n */const generateAnonymousId=()=>generateUUID();\n\n/**\n * To get the page properties for context object\n * @param pageProps Page properties\n * @returns page properties object for context\n */const getContextPageProperties=pageProps=>{// Need to get updated page details on each event as an event to notify on SPA URL changes does not seem to exist\nconst curPageProps=getDefaultPageProperties();const ctxPageProps={};Object.keys(curPageProps).forEach(key=>{ctxPageProps[key]=pageProps?.[key]||curPageProps[key];});ctxPageProps.initial_referrer=pageProps?.initial_referrer||state.session.initialReferrer.value;ctxPageProps.initial_referring_domain=pageProps?.initial_referring_domain||state.session.initialReferringDomain.value;return ctxPageProps;};/**\n * Add any missing default page properties using values from options and defaults\n * @param properties Input page properties\n * @param options API options\n */const getUpdatedPageProperties=(properties,options)=>{const optionsPageProps=options?.page||{};const pageProps=properties;// Need to get updated page details on each event as an event to notify on SPA URL changes does not seem to exist\nconst curPageProps=getDefaultPageProperties();Object.keys(curPageProps).forEach(key=>{if(isUndefined(pageProps[key])){pageProps[key]=optionsPageProps[key]||curPageProps[key];}});if(isUndefined(pageProps.initial_referrer)){pageProps.initial_referrer=optionsPageProps.initial_referrer||state.session.initialReferrer.value;}if(isUndefined(pageProps.initial_referring_domain)){pageProps.initial_referring_domain=optionsPageProps.initial_referring_domain||state.session.initialReferringDomain.value;}return pageProps;};/**\n * Utility to check for reserved keys in the input object\n * @param obj Generic object\n * @param parentKeyPath Object's parent key path\n * @param logger Logger instance\n */const checkForReservedElementsInObject=(obj,parentKeyPath,logger)=>{if(isObjectLiteralAndNotNull(obj)){Object.keys(obj).forEach(property=>{if(RESERVED_ELEMENTS.includes(property)||RESERVED_ELEMENTS.includes(property.toLowerCase())){logger?.warn(RESERVED_KEYWORD_WARNING(EVENT_MANAGER,property,parentKeyPath,RESERVED_ELEMENTS));}});}};/**\n * Checks for reserved keys in traits, properties, and contextual traits\n * @param rudderEvent Generated rudder event\n * @param logger Logger instance\n */const checkForReservedElements=(rudderEvent,logger)=>{//  properties, traits, contextualTraits are either undefined or object\nconst{properties,traits,context}=rudderEvent;const{traits:contextualTraits}=context;checkForReservedElementsInObject(properties,'properties',logger);checkForReservedElementsInObject(traits,'traits',logger);checkForReservedElementsInObject(contextualTraits,'context.traits',logger);};/**\n * Overrides the top-level event properties with data from API options\n * @param rudderEvent Generated rudder event\n * @param options API options\n */const updateTopLevelEventElements=(rudderEvent,options)=>{if(options.anonymousId&&isString(options.anonymousId)){// eslint-disable-next-line no-param-reassign\nrudderEvent.anonymousId=options.anonymousId;}if(isObjectLiteralAndNotNull(options.integrations)){// eslint-disable-next-line no-param-reassign\nrudderEvent.integrations=options.integrations;}if(options.originalTimestamp&&isString(options.originalTimestamp)){// eslint-disable-next-line no-param-reassign\nrudderEvent.originalTimestamp=options.originalTimestamp;}};/**\n * To merge the contextual information in API options with existing data\n * @param rudderContext Generated rudder event\n * @param options API options\n * @param logger Logger instance\n */const getMergedContext=(rudderContext,options,logger)=>{let context=rudderContext;Object.keys(options).forEach(key=>{if(!TOP_LEVEL_ELEMENTS.includes(key)&&!CONTEXT_RESERVED_ELEMENTS.includes(key)){if(key!=='context'){context=mergeDeepRight(context,{[key]:options[key]});}else if(!isUndefined(options[key])&&isObjectLiteralAndNotNull(options[key])){const tempContext={};Object.keys(options[key]).forEach(e=>{if(!CONTEXT_RESERVED_ELEMENTS.includes(e)){tempContext[e]=options[key][e];}});context=mergeDeepRight(context,{...tempContext});}else;}});return context;};/**\n * A function to determine whether SDK should use the integration option provided in load call\n * @returns boolean\n */const shouldUseGlobalIntegrationsConfigInEvents=()=>state.loadOptions.value.useGlobalIntegrationsConfigInEvents&&(isObjectLiteralAndNotNull(state.consents.postConsent.value?.integrations)||isObjectLiteralAndNotNull(state.nativeDestinations.loadOnlyIntegrations.value));/**\n * Updates rudder event object with data from the API options\n * @param rudderEvent Generated rudder event\n * @param options API options\n */const processOptions=(rudderEvent,options)=>{// Only allow object type for options\nif(isObjectLiteralAndNotNull(options)){updateTopLevelEventElements(rudderEvent,options);// eslint-disable-next-line no-param-reassign\nrudderEvent.context=getMergedContext(rudderEvent.context,options);}};/**\n * Returns the final integrations config for the event based on the global config and event's config\n * @param integrationsConfig Event's integrations config\n * @returns Final integrations config\n */const getEventIntegrationsConfig=integrationsConfig=>{let finalIntgConfig;if(shouldUseGlobalIntegrationsConfigInEvents()){finalIntgConfig=clone(state.consents.postConsent.value?.integrations??state.nativeDestinations.loadOnlyIntegrations.value);}else if(isObjectLiteralAndNotNull(integrationsConfig)){finalIntgConfig=integrationsConfig;}else {finalIntgConfig=DEFAULT_INTEGRATIONS_CONFIG;}return finalIntgConfig;};/**\n * Enrich the base event object with data from state and the API options\n * @param rudderEvent RudderEvent object\n * @param options API options\n * @param pageProps Page properties\n * @param logger logger\n * @returns Enriched RudderEvent object\n */const getEnrichedEvent=(rudderEvent,options,pageProps,logger)=>{const commonEventData={channel:CHANNEL,context:{traits:clone(state.session.userTraits.value),sessionId:state.session.sessionInfo.value.id||undefined,sessionStart:state.session.sessionInfo.value.sessionStart||undefined,// Add 'consentManagement' only if consent management is enabled\n...(state.consents.enabled.value&&{consentManagement:{deniedConsentIds:clone(state.consents.data.value.deniedConsentIds),allowedConsentIds:clone(state.consents.data.value.allowedConsentIds),provider:state.consents.provider.value,resolutionStrategy:state.consents.resolutionStrategy.value}}),'ua-ch':state.context['ua-ch'].value,app:state.context.app.value,library:state.context.library.value,userAgent:state.context.userAgent.value,os:state.context.os.value,locale:state.context.locale.value,screen:state.context.screen.value,campaign:extractUTMParameters(globalThis.location.href),page:getContextPageProperties(pageProps),timezone:state.context.timezone.value},originalTimestamp:getCurrentTimeFormatted(),integrations:DEFAULT_INTEGRATIONS_CONFIG,messageId:generateUUID(),userId:rudderEvent.userId||state.session.userId.value};if(!isStorageTypeValidForStoringData(state.storage.entries.value.anonymousId?.type)){// Generate new anonymous id for each request\ncommonEventData.anonymousId=generateAnonymousId();}else {// Type casting to string as the user session manager will take care of initializing the value\ncommonEventData.anonymousId=state.session.anonymousId.value;}// set truly anonymous tracking flag\nif(state.storage.trulyAnonymousTracking.value){commonEventData.context.trulyAnonymousTracking=true;}if(rudderEvent.type==='identify'){commonEventData.context.traits=state.storage.entries.value.userTraits?.type!==NO_STORAGE?clone(state.session.userTraits.value):rudderEvent.context.traits;}if(rudderEvent.type==='group'){if(rudderEvent.groupId||state.session.groupId.value){commonEventData.groupId=rudderEvent.groupId||state.session.groupId.value;}if(rudderEvent.traits||state.session.groupTraits.value){commonEventData.traits=state.storage.entries.value.groupTraits?.type!==NO_STORAGE?clone(state.session.groupTraits.value):rudderEvent.traits;}}const processedEvent=mergeDeepRight(rudderEvent,commonEventData);// Set the default values for the event properties\n// matching with v1.1 payload\nif(processedEvent.event===undefined){processedEvent.event=null;}if(processedEvent.properties===undefined){processedEvent.properties=null;}processOptions(processedEvent,options);checkForReservedElements(processedEvent,logger);// Update the integrations config for the event\nprocessedEvent.integrations=getEventIntegrationsConfig(processedEvent.integrations);return processedEvent;};\n\nclass RudderEventFactory{constructor(logger){this.logger=logger;}/**\n   * Generate a 'page' event based on the user-input fields\n   * @param category Page's category\n   * @param name Page name\n   * @param properties Page properties\n   * @param options API options\n   */generatePageEvent(category,name,properties,options){let props=properties??{};props.name=name;props.category=category;props=getUpdatedPageProperties(props,options);const pageEvent={properties:props,name,category,type:'page'};return getEnrichedEvent(pageEvent,options,props,this.logger);}/**\n   * Generate a 'track' event based on the user-input fields\n   * @param event The event name\n   * @param properties Event properties\n   * @param options API options\n   */generateTrackEvent(event,properties,options){const trackEvent={properties,event,type:'track'};return getEnrichedEvent(trackEvent,options,undefined,this.logger);}/**\n   * Generate an 'identify' event based on the user-input fields\n   * @param userId New user ID\n   * @param traits new traits\n   * @param options API options\n   */generateIdentifyEvent(userId,traits,options){const identifyEvent={userId,type:'identify',context:{traits}};return getEnrichedEvent(identifyEvent,options,undefined,this.logger);}/**\n   * Generate an 'alias' event based on the user-input fields\n   * @param to New user ID\n   * @param from Old user ID\n   * @param options API options\n   */generateAliasEvent(to,from,options){const aliasEvent={previousId:from,type:'alias'};const enrichedEvent=getEnrichedEvent(aliasEvent,options,undefined,this.logger);// override the User ID from the API inputs\nenrichedEvent.userId=to??enrichedEvent.userId;return enrichedEvent;}/**\n   * Generate a 'group' event based on the user-input fields\n   * @param groupId New group ID\n   * @param traits new group traits\n   * @param options API options\n   */generateGroupEvent(groupId,traits,options){const groupEvent={type:'group'};if(groupId){groupEvent.groupId=groupId;}if(traits){groupEvent.traits=traits;}return getEnrichedEvent(groupEvent,options,undefined,this.logger);}/**\n   * Generates a new RudderEvent object based on the user-input fields\n   * @param event API event parameters object\n   * @returns A RudderEvent object\n   */create(event){let eventObj;switch(event.type){case'page':eventObj=this.generatePageEvent(event.category,event.name,event.properties,event.options);break;case'track':eventObj=this.generateTrackEvent(event.name,event.properties,event.options);break;case'identify':eventObj=this.generateIdentifyEvent(event.userId,event.traits,event.options);break;case'alias':eventObj=this.generateAliasEvent(event.to,event.from,event.options);break;case'group':eventObj=this.generateGroupEvent(event.groupId,event.traits,event.options);break;}return eventObj;}}\n\n/**\n * A service to generate valid event payloads and queue them for processing\n */class EventManager{/**\n   *\n   * @param eventRepository Event repository instance\n   * @param userSessionManager UserSession Manager instance\n   * @param errorHandler Error handler object\n   * @param logger Logger object\n   */constructor(eventRepository,userSessionManager,errorHandler,logger){this.eventRepository=eventRepository;this.userSessionManager=userSessionManager;this.errorHandler=errorHandler;this.logger=logger;this.eventFactory=new RudderEventFactory(this.logger);this.onError=this.onError.bind(this);}/**\n   * Initializes the event manager\n   */init(){this.eventRepository.init();}resume(){this.eventRepository.resume();}/**\n   * Consumes a new incoming event\n   * @param event Incoming event data\n   */addEvent(event){this.userSessionManager.refreshSession();const rudderEvent=this.eventFactory.create(event);if(rudderEvent){this.eventRepository.enqueue(rudderEvent,event.callback);}else {this.onError(new Error(EVENT_OBJECT_GENERATION_ERROR));}}/**\n   * Handles error\n   * @param error The error object\n   */onError(error,customMessage,shouldAlwaysThrow){if(this.errorHandler){this.errorHandler.onError(error,EVENT_MANAGER,customMessage,shouldAlwaysThrow);}else {throw error;}}}\n\nclass UserSessionManager{constructor(errorHandler,logger,pluginsManager,storeManager,httpClient){this.storeManager=storeManager;this.pluginsManager=pluginsManager;this.logger=logger;this.errorHandler=errorHandler;this.httpClient=httpClient;this.onError=this.onError.bind(this);this.serverSideCookieDebounceFuncs={};}/**\n   * Initialize User session with values from storage\n   */init(){this.syncStorageDataToState();// Register the effect to sync with storage\nthis.registerEffects();}syncStorageDataToState(){this.migrateStorageIfNeeded();this.migrateDataFromPreviousStorage();// get the values from storage and set it again\nthis.setUserId(this.getUserId());this.setUserTraits(this.getUserTraits());this.setGroupId(this.getGroupId());this.setGroupTraits(this.getGroupTraits());const{externalAnonymousIdCookieName,anonymousIdOptions}=state.loadOptions.value;let externalAnonymousId;if(isDefinedAndNotNull(externalAnonymousIdCookieName)&&typeof externalAnonymousIdCookieName==='string'){externalAnonymousId=this.getExternalAnonymousIdByCookieName(externalAnonymousIdCookieName);}this.setAnonymousId(externalAnonymousId??this.getAnonymousId(anonymousIdOptions));this.setAuthToken(this.getAuthToken());this.setInitialReferrerInfo();this.configureSessionTracking();}configureSessionTracking(){let sessionInfo=this.getSessionInfo();if(this.isPersistenceEnabledForStorageEntry('sessionInfo')){const configuredSessionTrackingInfo=this.getConfiguredSessionTrackingInfo();const initialSessionInfo=sessionInfo??defaultSessionConfiguration;sessionInfo={...initialSessionInfo,...configuredSessionTrackingInfo,autoTrack:configuredSessionTrackingInfo.autoTrack&&initialSessionInfo.manualTrack!==true};}state.session.sessionInfo.value=this.isPersistenceEnabledForStorageEntry('sessionInfo')?sessionInfo:DEFAULT_USER_SESSION_VALUES.sessionInfo;// If auto session tracking is enabled start the session tracking\nif(state.session.sessionInfo.value.autoTrack){this.startOrRenewAutoTracking(state.session.sessionInfo.value);}}setInitialReferrerInfo(){const persistedInitialReferrer=this.getInitialReferrer();const persistedInitialReferringDomain=this.getInitialReferringDomain();if(persistedInitialReferrer&&persistedInitialReferringDomain){this.setInitialReferrer(persistedInitialReferrer);this.setInitialReferringDomain(persistedInitialReferringDomain);}else {const initialReferrer=persistedInitialReferrer||getReferrer();this.setInitialReferrer(initialReferrer);this.setInitialReferringDomain(getReferringDomain(initialReferrer));}}isPersistenceEnabledForStorageEntry(entryName){return isStorageTypeValidForStoringData(state.storage.entries.value[entryName]?.type);}migrateDataFromPreviousStorage(){const entries=state.storage.entries.value;const storageTypesForMigration=[COOKIE_STORAGE,LOCAL_STORAGE,SESSION_STORAGE];Object.keys(entries).forEach(entry=>{const key=entry;const currentStorage=entries[key]?.type;const curStore=this.storeManager?.getStore(storageClientDataStoreNameMap[currentStorage]);if(curStore){storageTypesForMigration.forEach(storage=>{const store=this.storeManager?.getStore(storageClientDataStoreNameMap[storage]);if(store&&storage!==currentStorage){const value=store.get(COOKIE_KEYS[key]);if(isDefinedNotNullAndNotEmptyString(value)){curStore.set(COOKIE_KEYS[key],value);}store.remove(COOKIE_KEYS[key]);}});}});}migrateStorageIfNeeded(){if(!state.storage.migrate.value){return;}const persistentStoreNames=[CLIENT_DATA_STORE_COOKIE,CLIENT_DATA_STORE_LS,CLIENT_DATA_STORE_SESSION];const stores=[];persistentStoreNames.forEach(storeName=>{const store=this.storeManager?.getStore(storeName);if(store){stores.push(store);}});Object.keys(COOKIE_KEYS).forEach(storageKey=>{const storageEntry=COOKIE_KEYS[storageKey];stores.forEach(store=>{const migratedVal=this.pluginsManager?.invokeSingle('storage.migrate',storageEntry,store.engine,this.errorHandler,this.logger);// Skip setting the value if it is null or undefined\n// as those values indicate there is no need for migration or\n// migration failed\nif(!isNullOrUndefined(migratedVal)){store.set(storageEntry,migratedVal);}});});}getConfiguredSessionTrackingInfo(){let autoTrack=state.loadOptions.value.sessions?.autoTrack!==false;// Do not validate any further if autoTrack is disabled\nif(!autoTrack){return {autoTrack};}let timeout;const configuredSessionTimeout=state.loadOptions.value.sessions?.timeout;if(!isPositiveInteger(configuredSessionTimeout)){this.logger?.warn(TIMEOUT_NOT_NUMBER_WARNING(USER_SESSION_MANAGER,configuredSessionTimeout,DEFAULT_SESSION_TIMEOUT_MS));timeout=DEFAULT_SESSION_TIMEOUT_MS;}else {timeout=configuredSessionTimeout;}if(timeout===0){this.logger?.warn(TIMEOUT_ZERO_WARNING(USER_SESSION_MANAGER));autoTrack=false;}// In case user provides a timeout value greater than 0 but less than 10 seconds SDK will show a warning\n// and will proceed with it\nif(timeout>0&&timeout<MIN_SESSION_TIMEOUT_MS){this.logger?.warn(TIMEOUT_NOT_RECOMMENDED_WARNING(USER_SESSION_MANAGER,timeout,MIN_SESSION_TIMEOUT_MS));}return {timeout,autoTrack};}/**\n   * Handles error\n   * @param error The error object\n   */onError(error,customMessage){if(this.errorHandler){this.errorHandler.onError(error,USER_SESSION_MANAGER,customMessage);}else {throw error;}}/**\n   * A function to encrypt the cookie value and return the encrypted data\n   * @param cookiesData\n   * @param store\n   * @returns\n   */getEncryptedCookieData(cookiesData,store){const encryptedCookieData=[];cookiesData.forEach(cData=>{const encryptedValue=store?.encrypt(stringifyWithoutCircular(cData.value,false,[],this.logger));if(isDefinedAndNotNull(encryptedValue)){encryptedCookieData.push({name:cData.name,value:encryptedValue});}});return encryptedCookieData;}/**\n   * A function that makes request to data service to set the cookie\n   * @param encryptedCookieData\n   * @param callback\n   */makeRequestToSetCookie(encryptedCookieData,callback){this.httpClient?.getAsyncData({url:state.serverCookies.dataServiceUrl.value,options:{method:'POST',data:stringifyWithoutCircular({reqType:'setCookies',workspaceId:state.source.value?.workspaceId,data:{options:{maxAge:state.storage.cookie.value?.maxage,path:state.storage.cookie.value?.path,domain:state.storage.cookie.value?.domain,sameSite:state.storage.cookie.value?.samesite,secure:state.storage.cookie.value?.secure,expires:state.storage.cookie.value?.expires},cookies:encryptedCookieData}}),sendRawData:true,withCredentials:true},isRawResponse:true,callback});}/**\n   * A function to make an external request to set the cookie from server side\n   * @param key       cookie name\n   * @param value     encrypted cookie value\n   */setServerSideCookies(cookiesData,cb,store){try{// encrypt cookies values\nconst encryptedCookieData=this.getEncryptedCookieData(cookiesData,store);if(encryptedCookieData.length>0){// make request to data service to set the cookie from server side\nthis.makeRequestToSetCookie(encryptedCookieData,(res,details)=>{if(details?.xhr?.status===200){cookiesData.forEach(cData=>{const cookieValue=store?.get(cData.name);const before=stringifyWithoutCircular(cData.value,false,[]);const after=stringifyWithoutCircular(cookieValue,false,[]);if(after!==before){this.logger?.error(FAILED_SETTING_COOKIE_FROM_SERVER_ERROR(cData.name));if(cb){cb(cData.name,cData.value);}}});}else {this.logger?.error(DATA_SERVER_REQUEST_FAIL_ERROR(details?.xhr?.status));cookiesData.forEach(each=>{if(cb){cb(each.name,each.value);}});}});}}catch(e){this.onError(e,FAILED_SETTING_COOKIE_FROM_SERVER_GLOBAL_ERROR);cookiesData.forEach(each=>{if(cb){cb(each.name,each.value);}});}}/**\n   * A function to sync values in storage\n   * @param sessionKey\n   * @param value\n   */syncValueToStorage(sessionKey,value){const entries=state.storage.entries.value;const storageType=entries[sessionKey]?.type;if(isStorageTypeValidForStoringData(storageType)){const curStore=this.storeManager?.getStore(storageClientDataStoreNameMap[storageType]);const key=entries[sessionKey]?.key;if(value&&(isString(value)||isNonEmptyObject(value))){// if useServerSideCookies load option is set to true\n// set the cookie from server side\nif(state.serverCookies.isEnabledServerSideCookies.value&&storageType===COOKIE_STORAGE){if(this.serverSideCookieDebounceFuncs[sessionKey]){globalThis.clearTimeout(this.serverSideCookieDebounceFuncs[sessionKey]);}this.serverSideCookieDebounceFuncs[sessionKey]=globalThis.setTimeout(()=>{this.setServerSideCookies([{name:key,value}],(cookieName,cookieValue)=>{curStore?.set(cookieName,cookieValue);},curStore);},SERVER_SIDE_COOKIES_DEBOUNCE_TIME);}else {curStore?.set(key,value);}}else {curStore?.remove(key);}}}/**\n   * Function to update storage whenever state value changes\n   */registerEffects(){// This will work as long as the user session entry key names are same as the state keys\nUSER_SESSION_KEYS.forEach(sessionKey=>{E(()=>{this.syncValueToStorage(sessionKey,state.session[sessionKey].value);});});}/**\n   * Sets anonymous id in the following precedence:\n   *\n   * 1. anonymousId: Id directly provided to the function.\n   * 2. rudderAmpLinkerParam: value generated from linker query parm (rudderstack)\n   *    using parseLinker util.\n   * 3. generateUUID: A new unique id is generated and assigned.\n   */setAnonymousId(anonymousId,rudderAmpLinkerParam){let finalAnonymousId=anonymousId;if(this.isPersistenceEnabledForStorageEntry('anonymousId')){if(!finalAnonymousId&&rudderAmpLinkerParam){const linkerPluginsResult=this.pluginsManager?.invokeSingle('userSession.anonymousIdGoogleLinker',rudderAmpLinkerParam);finalAnonymousId=linkerPluginsResult;}finalAnonymousId=finalAnonymousId||generateAnonymousId();}else {finalAnonymousId=DEFAULT_USER_SESSION_VALUES.anonymousId;}state.session.anonymousId.value=finalAnonymousId;}/**\n   * Fetches anonymousId\n   * @param options option to fetch it from external source\n   * @returns anonymousId\n   */getAnonymousId(options){const storage=state.storage.entries.value.anonymousId?.type;// fetch the anonymousId from storage\nif(isStorageTypeValidForStoringData(storage)){let persistedAnonymousId=this.getEntryValue('anonymousId');if(!persistedAnonymousId&&options){// fetch anonymousId from external source\nconst autoCapturedAnonymousId=this.pluginsManager?.invokeSingle('storage.getAnonymousId',getStorageEngine,options);persistedAnonymousId=autoCapturedAnonymousId;}state.session.anonymousId.value=persistedAnonymousId||generateAnonymousId();}return state.session.anonymousId.value;}getEntryValue(sessionKey){const entries=state.storage.entries.value;const storageType=entries[sessionKey]?.type;if(isStorageTypeValidForStoringData(storageType)){const store=this.storeManager?.getStore(storageClientDataStoreNameMap[storageType]);const storageKey=entries[sessionKey]?.key;return store?.get(storageKey)??null;}return null;}getExternalAnonymousIdByCookieName(key){const storageEngine=getStorageEngine(COOKIE_STORAGE);if(storageEngine?.isEnabled){return storageEngine.getItem(key)??null;}return null;}/**\n   * Fetches User Id\n   * @returns\n   */getUserId(){return this.getEntryValue('userId');}/**\n   * Fetches User Traits\n   * @returns\n   */getUserTraits(){return this.getEntryValue('userTraits');}/**\n   * Fetches Group Id\n   * @returns\n   */getGroupId(){return this.getEntryValue('groupId');}/**\n   * Fetches Group Traits\n   * @returns\n   */getGroupTraits(){return this.getEntryValue('groupTraits');}/**\n   * Fetches Initial Referrer\n   * @returns\n   */getInitialReferrer(){return this.getEntryValue('initialReferrer');}/**\n   * Fetches Initial Referring domain\n   * @returns\n   */getInitialReferringDomain(){return this.getEntryValue('initialReferringDomain');}/**\n   * Fetches session tracking information from storage\n   * @returns\n   */getSessionInfo(){return this.getEntryValue('sessionInfo');}/**\n   * Fetches auth token from storage\n   * @returns\n   */getAuthToken(){return this.getEntryValue('authToken');}/**\n   * If session is active it returns the sessionId\n   * @returns\n   */getSessionId(){const sessionInfo=this.getSessionInfo()??DEFAULT_USER_SESSION_VALUES.sessionInfo;if(sessionInfo.autoTrack&&!hasSessionExpired(sessionInfo.expiresAt)||sessionInfo.manualTrack){return sessionInfo.id??null;}return null;}/**\n   * A function to keep the session information up to date in the state\n   * before using it for building event payloads.\n   */refreshSession(){let sessionInfo=this.getSessionInfo()??DEFAULT_USER_SESSION_VALUES.sessionInfo;if(sessionInfo.autoTrack||sessionInfo.manualTrack){if(sessionInfo.autoTrack){this.startOrRenewAutoTracking(sessionInfo);sessionInfo=state.session.sessionInfo.value;}// Note that if sessionStart is false, then it's an active session.\n// So, we needn't update the session info.\n//\n// For other scenarios,\n// 1. If sessionStart is undefined, then it's a new session.\n//   Mark it as sessionStart.\n// 2. If sessionStart is true, then need to flip it for the future events.\nif(sessionInfo.sessionStart===undefined){sessionInfo={...sessionInfo,sessionStart:true};}else if(sessionInfo.sessionStart){sessionInfo={...sessionInfo,sessionStart:false};}}// Always write to state (in-turn to storage) to keep the session info up to date.\nstate.session.sessionInfo.value=sessionInfo;if(state.lifecycle.status.value!=='readyExecuted'){// Force update the storage as the 'effect' blocks are not getting triggered\n// when processing preload buffered requests\nthis.syncValueToStorage('sessionInfo',sessionInfo);}}/**\n   * Reset state values\n   * @param resetAnonymousId\n   * @param noNewSessionStart\n   * @returns\n   */reset(resetAnonymousId,noNewSessionStart){const{session}=state;const{manualTrack,autoTrack}=session.sessionInfo.value;r(()=>{session.userId.value=DEFAULT_USER_SESSION_VALUES.userId;session.userTraits.value=DEFAULT_USER_SESSION_VALUES.userTraits;session.groupId.value=DEFAULT_USER_SESSION_VALUES.groupId;session.groupTraits.value=DEFAULT_USER_SESSION_VALUES.groupTraits;session.authToken.value=DEFAULT_USER_SESSION_VALUES.authToken;if(resetAnonymousId){// This will generate a new anonymous ID\nthis.setAnonymousId();}if(noNewSessionStart){return;}if(autoTrack){session.sessionInfo.value=DEFAULT_USER_SESSION_VALUES.sessionInfo;this.startOrRenewAutoTracking(session.sessionInfo.value);}else if(manualTrack){this.startManualTrackingInternal();}});}/**\n   * Set user Id\n   * @param userId\n   */setUserId(userId){state.session.userId.value=this.isPersistenceEnabledForStorageEntry('userId')&&userId?userId:DEFAULT_USER_SESSION_VALUES.userId;}/**\n   * Set user traits\n   * @param traits\n   */setUserTraits(traits){state.session.userTraits.value=this.isPersistenceEnabledForStorageEntry('userTraits')&&traits?mergeDeepRight(state.session.userTraits.value??DEFAULT_USER_SESSION_VALUES.userTraits,traits):DEFAULT_USER_SESSION_VALUES.userTraits;}/**\n   * Set group Id\n   * @param groupId\n   */setGroupId(groupId){state.session.groupId.value=this.isPersistenceEnabledForStorageEntry('groupId')&&groupId?groupId:DEFAULT_USER_SESSION_VALUES.groupId;}/**\n   * Set group traits\n   * @param traits\n   */setGroupTraits(traits){state.session.groupTraits.value=this.isPersistenceEnabledForStorageEntry('groupTraits')&&traits?mergeDeepRight(state.session.groupTraits.value??DEFAULT_USER_SESSION_VALUES.groupTraits,traits):DEFAULT_USER_SESSION_VALUES.groupTraits;}/**\n   * Set initial referrer\n   * @param referrer\n   */setInitialReferrer(referrer){state.session.initialReferrer.value=this.isPersistenceEnabledForStorageEntry('initialReferrer')&&referrer?referrer:DEFAULT_USER_SESSION_VALUES.initialReferrer;}/**\n   * Set initial referring domain\n   * @param {String} referringDomain\n   */setInitialReferringDomain(referringDomain){state.session.initialReferringDomain.value=this.isPersistenceEnabledForStorageEntry('initialReferringDomain')&&referringDomain?referringDomain:DEFAULT_USER_SESSION_VALUES.initialReferringDomain;}/**\n   * A function to check for existing session details and depending on that create a new session\n   */startOrRenewAutoTracking(sessionInfo){if(hasSessionExpired(sessionInfo.expiresAt)){state.session.sessionInfo.value=generateAutoTrackingSession(sessionInfo.timeout);}else {const timestamp=Date.now();const timeout=sessionInfo.timeout;state.session.sessionInfo.value=mergeDeepRight(sessionInfo,{expiresAt:timestamp+timeout// set the expiry time of the session\n});}}/**\n   * A function method to start a manual session\n   * @param {number} id     session identifier\n   * @returns\n   */start(id){state.session.sessionInfo.value=generateManualTrackingSession(id,this.logger);}/**\n   * An internal function to start manual session\n   */startManualTrackingInternal(){this.start(Date.now());}/**\n   * A public method to end an ongoing session.\n   */end(){state.session.sessionInfo.value=DEFAULT_USER_SESSION_VALUES.sessionInfo;}/**\n   * Set auth token\n   * @param userId\n   */setAuthToken(token){state.session.authToken.value=this.isPersistenceEnabledForStorageEntry('authToken')&&token?token:DEFAULT_USER_SESSION_VALUES.authToken;}}\n\n/**\n * Plugins to be loaded in the plugins loadOption is not defined\n */const defaultOptionalPluginsList=['BeaconQueue','Bugsnag','CustomConsentManager','DeviceModeDestinations','DeviceModeTransformation','ErrorReporting','ExternalAnonymousId','GoogleLinker','KetchConsentManager','NativeDestinationQueue','OneTrustConsentManager','StorageEncryption','StorageEncryptionLegacy','StorageMigrator','XhrQueue'];\n\nconst normalizeLoadOptions=(loadOptionsFromState,loadOptions)=>{// TODO: Maybe add warnings for invalid values\nconst normalizedLoadOpts=clone(loadOptions);if(!isString(normalizedLoadOpts.setCookieDomain)){delete normalizedLoadOpts.setCookieDomain;}const cookieSameSiteValues=['Strict','Lax','None'];if(!cookieSameSiteValues.includes(normalizedLoadOpts.sameSiteCookie)){delete normalizedLoadOpts.sameSiteCookie;}normalizedLoadOpts.secureCookie=normalizedLoadOpts.secureCookie===true;const uaChTrackLevels=['none','default','full'];if(!uaChTrackLevels.includes(normalizedLoadOpts.uaChTrackLevel)){delete normalizedLoadOpts.uaChTrackLevel;}if(!isObjectLiteralAndNotNull(normalizedLoadOpts.integrations)){delete normalizedLoadOpts.integrations;}normalizedLoadOpts.plugins=normalizedLoadOpts.plugins??defaultOptionalPluginsList;normalizedLoadOpts.useGlobalIntegrationsConfigInEvents=normalizedLoadOpts.useGlobalIntegrationsConfigInEvents===true;normalizedLoadOpts.bufferDataPlaneEventsUntilReady=normalizedLoadOpts.bufferDataPlaneEventsUntilReady===true;normalizedLoadOpts.sendAdblockPage=normalizedLoadOpts.sendAdblockPage===true;normalizedLoadOpts.useServerSideCookies=normalizedLoadOpts.useServerSideCookies===true;if(normalizedLoadOpts.dataServiceEndpoint&&typeof normalizedLoadOpts.dataServiceEndpoint!=='string'){delete normalizedLoadOpts.dataServiceEndpoint;}if(!isObjectLiteralAndNotNull(normalizedLoadOpts.sendAdblockPageOptions)){delete normalizedLoadOpts.sendAdblockPageOptions;}if(!isDefined(normalizedLoadOpts.loadIntegration)){delete normalizedLoadOpts.loadIntegration;}else {normalizedLoadOpts.loadIntegration=normalizedLoadOpts.loadIntegration===true;}if(!isObjectLiteralAndNotNull(normalizedLoadOpts.storage)){delete normalizedLoadOpts.storage;}else {normalizedLoadOpts.storage=removeUndefinedAndNullValues(normalizedLoadOpts.storage);normalizedLoadOpts.storage.migrate=normalizedLoadOpts.storage?.migrate===true;}if(!isObjectLiteralAndNotNull(normalizedLoadOpts.beaconQueueOptions)){delete normalizedLoadOpts.beaconQueueOptions;}else {normalizedLoadOpts.beaconQueueOptions=removeUndefinedAndNullValues(normalizedLoadOpts.beaconQueueOptions);}if(!isObjectLiteralAndNotNull(normalizedLoadOpts.destinationsQueueOptions)){delete normalizedLoadOpts.destinationsQueueOptions;}else {normalizedLoadOpts.destinationsQueueOptions=removeUndefinedAndNullValues(normalizedLoadOpts.destinationsQueueOptions);}if(!isObjectLiteralAndNotNull(normalizedLoadOpts.queueOptions)){delete normalizedLoadOpts.queueOptions;}else {normalizedLoadOpts.queueOptions=removeUndefinedAndNullValues(normalizedLoadOpts.queueOptions);}normalizedLoadOpts.lockIntegrationsVersion=normalizedLoadOpts.lockIntegrationsVersion===true;normalizedLoadOpts.lockPluginsVersion=normalizedLoadOpts.lockPluginsVersion===true;if(!isNumber(normalizedLoadOpts.dataPlaneEventsBufferTimeout)){delete normalizedLoadOpts.dataPlaneEventsBufferTimeout;}if(!isObjectLiteralAndNotNull(normalizedLoadOpts.storage?.cookie)){delete normalizedLoadOpts.storage?.cookie;}else {normalizedLoadOpts.storage.cookie=removeUndefinedAndNullValues(normalizedLoadOpts.storage?.cookie);}if(!isObjectLiteralAndNotNull(normalizedLoadOpts.preConsent)){delete normalizedLoadOpts.preConsent;}else {normalizedLoadOpts.preConsent=removeUndefinedAndNullValues(normalizedLoadOpts.preConsent);}const mergedLoadOptions=mergeDeepRight(loadOptionsFromState,normalizedLoadOpts);return mergedLoadOptions;};\n\nconst DATA_PLANE_QUEUE_EXT_POINT_PREFIX='dataplaneEventsQueue';const DESTINATIONS_QUEUE_EXT_POINT_PREFIX='destinationsEventsQueue';const DMT_EXT_POINT_PREFIX='transformEvent';\n\n/**\n * Filters and returns the user supplied integrations config that should take preference over the destination specific integrations config\n * @param eventIntgConfig User supplied integrations config at event level\n * @param destinationsIntgConfig Cumulative integrations config from all destinations\n * @returns Filtered user supplied integrations config\n */const getOverriddenIntegrationOptions=(eventIntgConfig,destinationsIntgConfig)=>Object.keys(eventIntgConfig).filter(intgName=>eventIntgConfig[intgName]!==true||!destinationsIntgConfig[intgName]).reduce((obj,key)=>{const retVal=clone(obj);retVal[key]=eventIntgConfig[key];return retVal;},{});/**\n * Returns the event object with final integrations config\n * @param event RudderEvent object\n * @param state Application state\n * @returns Mutated event with final integrations config\n */const getFinalEvent=(event,state)=>{const finalEvent=clone(event);// Merge the destination specific integrations config with the event's integrations config\n// In general, the preference is given to the event's integrations config\nconst eventIntgConfig=event.integrations??DEFAULT_INTEGRATIONS_CONFIG;const destinationsIntgConfig=state.nativeDestinations.integrationsConfig.value;const overriddenIntgOpts=getOverriddenIntegrationOptions(eventIntgConfig,destinationsIntgConfig);finalEvent.integrations=mergeDeepRight(destinationsIntgConfig,overriddenIntgOpts);return finalEvent;};const shouldBufferEventsForPreConsent=state=>state.consents.preConsent.value.enabled&&state.consents.preConsent.value.events?.delivery==='buffer'&&(state.consents.preConsent.value.storage?.strategy==='session'||state.consents.preConsent.value.storage?.strategy==='none');\n\n/**\n * Event repository class responsible for queuing events for further processing and delivery\n */class EventRepository{/**\n   *\n   * @param pluginsManager Plugins manager instance\n   * @param storeManager Store Manager instance\n   * @param errorHandler Error handler object\n   * @param logger Logger object\n   */constructor(pluginsManager,storeManager,errorHandler,logger){this.pluginsManager=pluginsManager;this.errorHandler=errorHandler;this.logger=logger;this.httpClient=new HttpClient(errorHandler,logger);this.storeManager=storeManager;this.onError=this.onError.bind(this);}/**\n   * Initializes the event repository\n   */init(){try{this.dataplaneEventsQueue=this.pluginsManager.invokeSingle(`${DATA_PLANE_QUEUE_EXT_POINT_PREFIX}.init`,state,this.httpClient,this.storeManager,this.errorHandler,this.logger);}catch(e){this.onError(e,DATAPLANE_PLUGIN_INITIALIZE_ERROR);}try{this.dmtEventsQueue=this.pluginsManager.invokeSingle(`${DMT_EXT_POINT_PREFIX}.init`,state,this.pluginsManager,this.httpClient,this.storeManager,this.errorHandler,this.logger);}catch(e){this.onError(e,DMT_PLUGIN_INITIALIZE_ERROR);}try{this.destinationsEventsQueue=this.pluginsManager.invokeSingle(`${DESTINATIONS_QUEUE_EXT_POINT_PREFIX}.init`,state,this.pluginsManager,this.storeManager,this.dmtEventsQueue,this.errorHandler,this.logger);}catch(e){this.onError(e,NATIVE_DEST_PLUGIN_INITIALIZE_ERROR);}// Start the queue once the client destinations are ready\nE(()=>{if(state.nativeDestinations.clientDestinationsReady.value===true){this.destinationsEventsQueue?.start();this.dmtEventsQueue?.start();}});const bufferEventsBeforeConsent=shouldBufferEventsForPreConsent(state);// Start the queue processing only when the destinations are ready or hybrid mode destinations exist\n// However, events will be enqueued for now.\n// At the time of processing the events, the integrations config data from destinations\n// is merged into the event object\nlet timeoutId;E(()=>{const shouldBufferDpEvents=state.loadOptions.value.bufferDataPlaneEventsUntilReady===true&&state.nativeDestinations.clientDestinationsReady.value===false;const hybridDestExist=state.nativeDestinations.activeDestinations.value.some(dest=>isHybridModeDestination(dest));if((hybridDestExist===false||shouldBufferDpEvents===false)&&!bufferEventsBeforeConsent&&this.dataplaneEventsQueue?.scheduleTimeoutActive!==true){globalThis.clearTimeout(timeoutId);this.dataplaneEventsQueue?.start();}});// Force start the data plane events queue processing after a timeout\nif(state.loadOptions.value.bufferDataPlaneEventsUntilReady===true){timeoutId=globalThis.setTimeout(()=>{if(this.dataplaneEventsQueue?.scheduleTimeoutActive!==true){this.dataplaneEventsQueue?.start();}},state.loadOptions.value.dataPlaneEventsBufferTimeout);}}resume(){if(this.dataplaneEventsQueue?.scheduleTimeoutActive!==true){if(state.consents.postConsent.value.discardPreConsentEvents){this.dataplaneEventsQueue?.clear();this.destinationsEventsQueue?.clear();}this.dataplaneEventsQueue?.start();}}/**\n   * Enqueues the event for processing\n   * @param event RudderEvent object\n   * @param callback API callback function\n   */enqueue(event,callback){let dpQEvent;try{dpQEvent=getFinalEvent(event,state);this.pluginsManager.invokeSingle(`${DATA_PLANE_QUEUE_EXT_POINT_PREFIX}.enqueue`,state,this.dataplaneEventsQueue,dpQEvent,this.errorHandler,this.logger);}catch(e){this.onError(e,DATAPLANE_PLUGIN_ENQUEUE_ERROR);}try{const dQEvent=clone(event);this.pluginsManager.invokeSingle(`${DESTINATIONS_QUEUE_EXT_POINT_PREFIX}.enqueue`,state,this.destinationsEventsQueue,dQEvent,this.errorHandler,this.logger);}catch(e){this.onError(e,NATIVE_DEST_PLUGIN_ENQUEUE_ERROR);}// Invoke the callback if it exists\ntry{// Using the event sent to the data plane queue here\n// to ensure the mutated (if any) event is sent to the callback\ncallback?.(dpQEvent);}catch(error){this.onError(error,API_CALLBACK_INVOKE_ERROR);}}/**\n   * Handles error\n   * @param error The error object\n   * @param customMessage a message\n   * @param shouldAlwaysThrow if it should throw or use logger\n   */onError(error,customMessage,shouldAlwaysThrow){if(this.errorHandler){this.errorHandler.onError(error,EVENT_REPOSITORY,customMessage,shouldAlwaysThrow);}else {throw error;}}}\n\nconst dispatchSDKEvent=event=>{const customEvent=new CustomEvent(event,{detail:{analyticsInstance:globalThis.rudderanalytics},bubbles:true,cancelable:true,composed:true});globalThis.document.dispatchEvent(customEvent);};\n\n/*\n * Analytics class with lifecycle based on state ad user triggered events\n */class Analytics{/**\n   * Initialize services and components or use default ones if singletons\n   */constructor(){this.preloadBuffer=new BufferQueue();this.initialized=false;this.errorHandler=defaultErrorHandler;this.logger=defaultLogger;this.externalSrcLoader=new ExternalSrcLoader(this.errorHandler,this.logger);this.capabilitiesManager=new CapabilitiesManager(this.errorHandler,this.logger);this.httpClient=defaultHttpClient;}/**\n   * Start application lifecycle if not already started\n   */load(writeKey,dataPlaneUrl,loadOptions={}){if(state.lifecycle.status.value){return;}let clonedDataPlaneUrl=clone(dataPlaneUrl);let clonedLoadOptions=clone(loadOptions);// dataPlaneUrl is not provided\nif(isObjectAndNotNull(dataPlaneUrl)){clonedLoadOptions=dataPlaneUrl;clonedDataPlaneUrl=undefined;}// Set initial state values\nr(()=>{state.lifecycle.writeKey.value=writeKey;state.lifecycle.dataPlaneUrl.value=clonedDataPlaneUrl;state.loadOptions.value=normalizeLoadOptions(state.loadOptions.value,clonedLoadOptions);state.lifecycle.status.value='mounted';});// set log level as early as possible\nif(state.loadOptions.value.logLevel){this.logger?.setMinLogLevel(state.loadOptions.value.logLevel);}// Expose state to global objects\nsetExposedGlobal('state',state,writeKey);// Configure initial config of any services or components here\n// State application lifecycle\nthis.startLifecycle();}// Start lifecycle methods\n/**\n   * Orchestrate the lifecycle of the application phases/status\n   */startLifecycle(){E(()=>{try{switch(state.lifecycle.status.value){case'mounted':this.onMounted();break;case'browserCapabilitiesReady':this.onBrowserCapabilitiesReady();break;case'configured':this.onConfigured();break;case'pluginsLoading':break;case'pluginsReady':this.onPluginsReady();break;case'initialized':this.onInitialized();break;case'loaded':this.onLoaded();break;case'destinationsLoading':break;case'destinationsReady':this.onDestinationsReady();break;case'ready':this.onReady();break;case'readyExecuted':default:break;}}catch(err){const issue='Failed to load the SDK';this.errorHandler.onError(getMutatedError(err,issue),ANALYTICS_CORE);}});}onBrowserCapabilitiesReady(){// initialize the preloaded events enqueuing\nretrievePreloadBufferEvents(this);this.prepareInternalServices();this.loadConfig();}onLoaded(){this.processBufferedEvents();// Short-circuit the life cycle and move to the ready state if pre-consent behavior is enabled\nif(state.consents.preConsent.value.enabled===true){state.lifecycle.status.value='ready';}else {this.loadDestinations();}}/**\n   * Load browser polyfill if required\n   */onMounted(){this.capabilitiesManager.init();}/**\n   * Enqueue in SDK preload buffer events, used from preloadBuffer component\n   */enqueuePreloadBufferEvents(bufferedEvents){if(Array.isArray(bufferedEvents)){bufferedEvents.forEach(bufferedEvent=>this.preloadBuffer.enqueue(clone(bufferedEvent)));}}/**\n   * Process the buffer preloaded events by passing their arguments to the respective facade methods\n   */processDataInPreloadBuffer(){while(this.preloadBuffer.size()>0){const eventToProcess=this.preloadBuffer.dequeue();if(eventToProcess){consumePreloadBufferedEvent([...eventToProcess],this);}}}prepareInternalServices(){this.pluginsManager=new PluginsManager(defaultPluginEngine,this.errorHandler,this.logger);this.storeManager=new StoreManager(this.pluginsManager,this.errorHandler,this.logger);this.configManager=new ConfigManager(this.httpClient,this.errorHandler,this.logger);this.userSessionManager=new UserSessionManager(this.errorHandler,this.logger,this.pluginsManager,this.storeManager,this.httpClient);this.eventRepository=new EventRepository(this.pluginsManager,this.storeManager,this.errorHandler,this.logger);this.eventManager=new EventManager(this.eventRepository,this.userSessionManager,this.errorHandler,this.logger);}/**\n   * Load configuration\n   */loadConfig(){if(state.lifecycle.writeKey.value){this.httpClient.setAuthHeader(state.lifecycle.writeKey.value);}this.configManager?.init();}/**\n   * Initialize the storage and event queue\n   */onPluginsReady(){this.errorHandler.init(this.externalSrcLoader);// Initialize storage\nthis.storeManager?.init();this.userSessionManager?.init();// Initialize the appropriate consent manager plugin\nif(state.consents.enabled.value&&!state.consents.initialized.value){this.pluginsManager?.invokeSingle(`consentManager.init`,state,this.logger);if(state.consents.preConsent.value.enabled===false){this.pluginsManager?.invokeSingle(`consentManager.updateConsentsInfo`,state,this.storeManager,this.logger);}}// Initialize event manager\nthis.eventManager?.init();// Mark the SDK as initialized\nstate.lifecycle.status.value='initialized';}/**\n   * Load plugins\n   */onConfigured(){this.pluginsManager?.init();// TODO: are we going to enable custom plugins to be passed as load options?\n// registerCustomPlugins(state.loadOptions.value.customPlugins);\n}/**\n   * Trigger onLoaded callback if any is provided in config & emit initialised event\n   */onInitialized(){// Process any preloaded events\nthis.processDataInPreloadBuffer();// TODO: we need to avoid passing the window object to the callback function\n// as this will prevent us from supporting multiple SDK instances in the same page\n// Execute onLoaded callback if provided in load options\nif(isFunction(state.loadOptions.value.onLoaded)){state.loadOptions.value.onLoaded(globalThis.rudderanalytics);}// Set lifecycle state\nr(()=>{state.lifecycle.loaded.value=true;state.lifecycle.status.value='loaded';});this.initialized=true;// Emit an event to use as substitute to the onLoaded callback\ndispatchSDKEvent('RSA_Initialised');}/**\n   * Emit ready event\n   */ // eslint-disable-next-line class-methods-use-this\nonReady(){state.lifecycle.status.value='readyExecuted';state.eventBuffer.readyCallbacksArray.value.forEach(callback=>{try{callback();}catch(err){this.errorHandler.onError(err,ANALYTICS_CORE,READY_CALLBACK_INVOKE_ERROR);}});// Emit an event to use as substitute to the ready callback\ndispatchSDKEvent('RSA_Ready');}/**\n   * Consume preloaded events buffer\n   */processBufferedEvents(){// This logic has been intentionally implemented without a simple\n// for-loop as the individual events that are processed may\n// add more events to the buffer (this is needed for the consent API)\nlet bufferedEvents=state.eventBuffer.toBeProcessedArray.value;while(bufferedEvents.length>0){const bufferedEvent=bufferedEvents.shift();state.eventBuffer.toBeProcessedArray.value=bufferedEvents;if(bufferedEvent){const methodName=bufferedEvent[0];if(isFunction(this[methodName])){// Send additional arg 'true' to indicate that this is a buffered invocation\nthis[methodName](...bufferedEvent.slice(1),true);}}bufferedEvents=state.eventBuffer.toBeProcessedArray.value;}}/**\n   * Load device mode destinations\n   */loadDestinations(){if(state.nativeDestinations.clientDestinationsReady.value){return;}// Set in state the desired activeDestinations to inject in DOM\nthis.pluginsManager?.invokeSingle('nativeDestinations.setActiveDestinations',state,this.pluginsManager,this.errorHandler,this.logger);const totalDestinationsToLoad=state.nativeDestinations.activeDestinations.value.length;if(totalDestinationsToLoad===0){state.lifecycle.status.value='destinationsReady';return;}// Start loading native integration scripts and create instances\nstate.lifecycle.status.value='destinationsLoading';this.pluginsManager?.invokeSingle('nativeDestinations.load',state,this.externalSrcLoader,this.errorHandler,this.logger);// Progress to next lifecycle phase if all native destinations are initialized or failed\nE(()=>{const areAllDestinationsReady=totalDestinationsToLoad===0||state.nativeDestinations.initializedDestinations.value.length+state.nativeDestinations.failedDestinations.value.length===totalDestinationsToLoad;if(areAllDestinationsReady){r(()=>{state.lifecycle.status.value='destinationsReady';state.nativeDestinations.clientDestinationsReady.value=true;});}});}/**\n   * Move to the ready state\n   */ // eslint-disable-next-line class-methods-use-this\nonDestinationsReady(){// May be do any destination specific actions here\n// Mark the ready status if not already done\nif(state.lifecycle.status.value!=='ready'){state.lifecycle.status.value='ready';}}// End lifecycle methods\n// Start consumer exposed methods\nready(callback,isBufferedInvocation=false){const type='ready';if(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type,callback]];return;}this.errorHandler.leaveBreadcrumb(`New ${type} invocation`);if(!isFunction(callback)){this.logger.error(READY_API_CALLBACK_ERROR(READY_API));return;}/**\n     * If destinations are loaded or no integration is available for loading\n     * execute the callback immediately else push the callbacks to a queue that\n     * will be executed after loading completes\n     */if(state.lifecycle.status.value==='readyExecuted'){try{callback();}catch(err){this.errorHandler.onError(err,ANALYTICS_CORE,READY_CALLBACK_INVOKE_ERROR);}}else {state.eventBuffer.readyCallbacksArray.value=[...state.eventBuffer.readyCallbacksArray.value,callback];}}page(payload,isBufferedInvocation=false){const type='page';if(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type,payload]];return;}this.errorHandler.leaveBreadcrumb(`New ${type} event`);state.metrics.triggered.value+=1;this.eventManager?.addEvent({type:'page',category:payload.category,name:payload.name,properties:payload.properties,options:payload.options,callback:payload.callback});// TODO: Maybe we should alter the behavior to send the ad-block page event even if the SDK is still loaded. It'll be pushed into the to be processed queue.\n// Send automatic ad blocked page event if ad-blockers are detected on the page\n// Check page category to avoid infinite loop\nif(state.capabilities.isAdBlocked.value===true&&payload.category!==ADBLOCK_PAGE_CATEGORY){this.page(pageArgumentsToCallOptions(ADBLOCK_PAGE_CATEGORY,ADBLOCK_PAGE_NAME,{// 'title' is intentionally omitted as it does not make sense\n// in v3 implementation\npath:ADBLOCK_PAGE_PATH},state.loadOptions.value.sendAdblockPageOptions));}}track(payload,isBufferedInvocation=false){const type='track';if(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type,payload]];return;}this.errorHandler.leaveBreadcrumb(`New ${type} event`);state.metrics.triggered.value+=1;this.eventManager?.addEvent({type,name:payload.name||undefined,properties:payload.properties,options:payload.options,callback:payload.callback});}identify(payload,isBufferedInvocation=false){const type='identify';if(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type,payload]];return;}this.errorHandler.leaveBreadcrumb(`New ${type} event`);state.metrics.triggered.value+=1;const shouldResetSession=Boolean(payload.userId&&state.session.userId.value&&payload.userId!==state.session.userId.value);if(shouldResetSession){this.reset();}// `null` value indicates that previous user ID needs to be retained\nif(!isNull(payload.userId)){this.userSessionManager?.setUserId(payload.userId);}this.userSessionManager?.setUserTraits(payload.traits);this.eventManager?.addEvent({type,userId:payload.userId,traits:payload.traits,options:payload.options,callback:payload.callback});}alias(payload,isBufferedInvocation=false){const type='alias';if(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type,payload]];return;}this.errorHandler.leaveBreadcrumb(`New ${type} event`);state.metrics.triggered.value+=1;const previousId=payload.from??this.userSessionManager?.getUserId()??this.userSessionManager?.getAnonymousId();this.eventManager?.addEvent({type,to:payload.to,from:previousId,options:payload.options,callback:payload.callback});}group(payload,isBufferedInvocation=false){const type='group';if(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type,payload]];return;}this.errorHandler.leaveBreadcrumb(`New ${type} event`);state.metrics.triggered.value+=1;// `null` value indicates that previous group ID needs to be retained\nif(!isNull(payload.groupId)){this.userSessionManager?.setGroupId(payload.groupId);}this.userSessionManager?.setGroupTraits(payload.traits);this.eventManager?.addEvent({type,groupId:payload.groupId,traits:payload.traits,options:payload.options,callback:payload.callback});}reset(resetAnonymousId,isBufferedInvocation=false){const type='reset';if(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type,resetAnonymousId]];return;}this.errorHandler.leaveBreadcrumb(`New ${type} invocation, resetAnonymousId: ${resetAnonymousId}`);this.userSessionManager?.reset(resetAnonymousId);}getAnonymousId(options){return this.userSessionManager?.getAnonymousId(options);}setAnonymousId(anonymousId,rudderAmpLinkerParam,isBufferedInvocation=false){const type='setAnonymousId';// Buffering is needed as setting the anonymous ID may require invoking the GoogleLinker plugin\nif(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type,anonymousId,rudderAmpLinkerParam]];return;}this.errorHandler.leaveBreadcrumb(`New ${type} invocation`);this.userSessionManager?.setAnonymousId(anonymousId,rudderAmpLinkerParam);}// eslint-disable-next-line class-methods-use-this\ngetUserId(){return state.session.userId.value;}// eslint-disable-next-line class-methods-use-this\ngetUserTraits(){return state.session.userTraits.value;}// eslint-disable-next-line class-methods-use-this\ngetGroupId(){return state.session.groupId.value;}// eslint-disable-next-line class-methods-use-this\ngetGroupTraits(){return state.session.groupTraits.value;}startSession(sessionId,isBufferedInvocation=false){const type='startSession';if(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type,sessionId]];return;}this.errorHandler.leaveBreadcrumb(`New ${type} invocation`);this.userSessionManager?.start(sessionId);}endSession(isBufferedInvocation=false){const type='endSession';if(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type]];return;}this.errorHandler.leaveBreadcrumb(`New ${type} invocation`);this.userSessionManager?.end();}// eslint-disable-next-line class-methods-use-this\ngetSessionId(){const sessionId=this.userSessionManager?.getSessionId();return sessionId??null;}consent(options,isBufferedInvocation=false){const type='consent';if(!state.lifecycle.loaded.value){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,[type,options]];return;}this.errorHandler.leaveBreadcrumb(`New consent invocation`);r(()=>{state.consents.preConsent.value={...state.consents.preConsent.value,enabled:false};state.consents.postConsent.value=getValidPostConsentOptions(options);const{initialized,consentsData}=getConsentManagementData(state.consents.postConsent.value.consentManagement,this.logger);state.consents.initialized.value=initialized||state.consents.initialized.value;state.consents.data.value=consentsData;});// Update consents data in state\nif(state.consents.enabled.value&&!state.consents.initialized.value){this.pluginsManager?.invokeSingle(`consentManager.updateConsentsInfo`,state,this.storeManager,this.logger);}// Re-init store manager\nthis.storeManager?.initializeStorageState();// Re-init user session manager\nthis.userSessionManager?.syncStorageDataToState();// Resume event manager to process the events to destinations\nthis.eventManager?.resume();this.loadDestinations();this.sendTrackingEvents(isBufferedInvocation);}sendTrackingEvents(isBufferedInvocation){// If isBufferedInvocation is true, then the tracking events will be added to the end of the\n// events buffer array so that any other preload events (mainly from query string API) will be processed first.\nif(state.consents.postConsent.value.trackConsent){const trackOptions=trackArgumentsToCallOptions(CONSENT_TRACK_EVENT_NAME);if(isBufferedInvocation){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,['track',trackOptions]];}else {this.track(trackOptions);}}if(state.consents.postConsent.value.sendPageEvent){const pageOptions=pageArgumentsToCallOptions();if(isBufferedInvocation){state.eventBuffer.toBeProcessedArray.value=[...state.eventBuffer.toBeProcessedArray.value,['page',pageOptions]];}else {this.page(pageOptions);}}}setAuthToken(token){this.userSessionManager?.setAuthToken(token);}// End consumer exposed methods\n}\n\n/*\n * RudderAnalytics facade singleton that is exposed as global object and will:\n * expose overloaded methods\n * handle multiple Analytics instances\n * consume SDK preload event buffer\n */class RudderAnalytics{static globalSingleton=null;analyticsInstances={};defaultAnalyticsKey='';logger=defaultLogger;// Singleton with constructor bind methods\nconstructor(){if(RudderAnalytics.globalSingleton){// START-NO-SONAR-SCAN\n// eslint-disable-next-line no-constructor-return\nreturn RudderAnalytics.globalSingleton;// END-NO-SONAR-SCAN\n}defaultErrorHandler.attachErrorListeners();this.setDefaultInstanceKey=this.setDefaultInstanceKey.bind(this);this.getAnalyticsInstance=this.getAnalyticsInstance.bind(this);this.load=this.load.bind(this);this.ready=this.ready.bind(this);this.triggerBufferedLoadEvent=this.triggerBufferedLoadEvent.bind(this);this.page=this.page.bind(this);this.track=this.track.bind(this);this.identify=this.identify.bind(this);this.alias=this.alias.bind(this);this.group=this.group.bind(this);this.reset=this.reset.bind(this);this.getAnonymousId=this.getAnonymousId.bind(this);this.setAnonymousId=this.setAnonymousId.bind(this);this.getUserId=this.getUserId.bind(this);this.getUserTraits=this.getUserTraits.bind(this);this.getGroupId=this.getGroupId.bind(this);this.getGroupTraits=this.getGroupTraits.bind(this);this.startSession=this.startSession.bind(this);this.endSession=this.endSession.bind(this);this.getSessionId=this.getSessionId.bind(this);this.setAuthToken=this.setAuthToken.bind(this);this.consent=this.consent.bind(this);RudderAnalytics.globalSingleton=this;// start loading if a load event was buffered or wait for explicit load call\nthis.triggerBufferedLoadEvent();// Assign to global \"rudderanalytics\" object after processing the preload buffer (if any exists)\n// for CDN bundling IIFE exports covers this but for npm ESM and CJS bundling has to be done explicitly\nglobalThis.rudderanalytics=this;}/**\n   * Set instance to use if no specific writeKey is provided in methods\n   * automatically for the first created instance\n   * TODO: to support multiple analytics instances in the near future\n   */setDefaultInstanceKey(writeKey){if(writeKey){this.defaultAnalyticsKey=writeKey;}}/**\n   * Retrieve an existing analytics instance\n   */getAnalyticsInstance(writeKey){const instanceId=writeKey??this.defaultAnalyticsKey;const analyticsInstanceExists=Boolean(this.analyticsInstances[instanceId]);if(!analyticsInstanceExists){this.analyticsInstances[instanceId]=new Analytics();}return this.analyticsInstances[instanceId];}/**\n   * Create new analytics instance and trigger application lifecycle start\n   */load(writeKey,dataPlaneUrl,loadOptions){if(!isString(writeKey)){this.logger.error(WRITE_KEY_NOT_A_STRING_ERROR(RS_APP,writeKey));return;}if(this.analyticsInstances[writeKey]){return;}this.setDefaultInstanceKey(writeKey);this.analyticsInstances[writeKey]=new Analytics();this.getAnalyticsInstance(writeKey).load(writeKey,dataPlaneUrl,loadOptions);}/**\n   * Trigger load event in buffer queue if exists and stores the\n   * remaining preloaded events array in global object\n   */triggerBufferedLoadEvent(){const preloadedEventsArray=Array.isArray(globalThis.rudderanalytics)?globalThis.rudderanalytics:[];// The array will be mutated in the below method\npromotePreloadedConsentEventsToTop(preloadedEventsArray);// Get any load method call that is buffered if any\n// BTW, load method is also removed from the array\n// So, the Analytics object can directly consume the remaining events\nconst loadEvent=getPreloadedLoadEvent(preloadedEventsArray);// Set the final preloaded events array in global object\nsetExposedGlobal(GLOBAL_PRELOAD_BUFFER,clone(preloadedEventsArray));// Process load method if present in the buffered requests\nif(loadEvent.length>0){// Remove the event name from the Buffered Event array and keep only arguments\nloadEvent.shift();// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nthis.load.apply(null,loadEvent);}}/**\n   * Get ready callback arguments and forward to ready call\n   */ready(callback){this.getAnalyticsInstance().ready(callback);}/**\n   * Process page arguments and forward to page call\n   */page(category,name,properties,options,callback){this.getAnalyticsInstance().page(pageArgumentsToCallOptions(category,name,properties,options,callback));}/**\n   * Process track arguments and forward to page call\n   */track(event,properties,options,callback){this.getAnalyticsInstance().track(trackArgumentsToCallOptions(event,properties,options,callback));}/**\n   * Process identify arguments and forward to page call\n   */identify(userId,traits,options,callback){this.getAnalyticsInstance().identify(identifyArgumentsToCallOptions(userId,traits,options,callback));}/**\n   * Process alias arguments and forward to page call\n   */alias(to,from,options,callback){this.getAnalyticsInstance().alias(aliasArgumentsToCallOptions(to,from,options,callback));}/**\n   * Process group arguments and forward to page call\n   */group(groupId,traits,options,callback){if(arguments.length===0){this.logger.error(EMPTY_GROUP_CALL_ERROR(RS_APP));return;}this.getAnalyticsInstance().group(groupArgumentsToCallOptions(groupId,traits,options,callback));}reset(resetAnonymousId){this.getAnalyticsInstance().reset(resetAnonymousId);}getAnonymousId(options){return this.getAnalyticsInstance().getAnonymousId(options);}setAnonymousId(anonymousId,rudderAmpLinkerParam){this.getAnalyticsInstance().setAnonymousId(anonymousId,rudderAmpLinkerParam);}getUserId(){return this.getAnalyticsInstance().getUserId();}getUserTraits(){return this.getAnalyticsInstance().getUserTraits();}getGroupId(){return this.getAnalyticsInstance().getGroupId();}getGroupTraits(){return this.getAnalyticsInstance().getGroupTraits();}startSession(sessionId){return this.getAnalyticsInstance().startSession(sessionId);}endSession(){return this.getAnalyticsInstance().endSession();}getSessionId(){return this.getAnalyticsInstance().getSessionId();}setAuthToken(token){return this.getAnalyticsInstance().setAuthToken(token);}consent(options){return this.getAnalyticsInstance().consent(options);}}\n\nexport { RudderAnalytics };\n","export default function checkIfHtmxIsLoaded(count = 0) {\n  if (count > 5) {\n    return false;\n  }\n  setTimeout(() => {\n    if (window.htmx) {\n      return true;\n    } else {\n      checkIfHtmxIsLoaded(count + 1);\n    }\n  }, 500);\n}\n","/* eslint no-console:0 */\nimport { RudderAnalytics } from \"@rudderstack/analytics-js\";\nimport checkIfHtmxIsLoaded from \"./helpers/htmx\";\n\nfunction updateAnonymousIdField() {\n  const anonymousIdField = document.querySelector(\"[name=\\\"fields[anonymous_id]\\\"]\");\n  if (anonymousIdField !== null) {\n    anonymousIdField.value = rudderanalytics.getAnonymousId();\n    console.log(\"RudderStack Field Update complete - \", rudderanalytics.getAnonymousId());\n  } else {\n    console.log(\"anonymousIdField is null\");\n  }\n}\n\nfunction registerEvents() {\n  const anchorLinks = document.getElementsByTagName(\"a\");\n\n  // Internal Sites\n  [...anchorLinks].forEach((anchor) => {\n    anchor.addEventListener(\n      \"click\",\n      (event) => {\n        const element = event.currentTarget;\n        const params = {\n          eventElement: \"a\",\n          target: element.href,\n          title: element.innerText,\n          id_html: element.id,\n          className: element.className.split(\" \"),\n          ariaLabel: element.getAttribute(\"aria-label\"),\n        };\n        rudderanalytics.track(\"Clicked A Link\", params);\n      },\n      { once: true }\n    );\n\n    // If anchor doesn't have a href attribute - exit\n    if (!anchor.href || !anchor.hasAttribute(\"href\")) {\n      return false;\n    }\n\n    const currentUrl = new URL(anchor.href);\n    const updateExternalUrl =\n            currentUrl.origin !== location.origin && !currentUrl.searchParams.get(\"anonymous_id\");\n    if (updateExternalUrl) {\n      currentUrl.searchParams.append(\"anonymous_id\", rudderanalytics.getAnonymousId());\n      anchor.href = currentUrl;\n    }\n  });\n\n  const buttonLinks = document.getElementsByTagName(\"button\");\n  [...buttonLinks].forEach((button) => {\n    button.addEventListener(\n      \"click\",\n      (event) => {\n        const element = event.currentTarget;\n        const params = {\n          eventElement: \"button\",\n          title: element.innerText,\n          id_html: element.id,\n          className: element.className.split(\" \"),\n          ariaLabel: element.getAttribute(\"aria-label\"),\n        };\n        rudderanalytics.track(\"Pressed A Button\", params);\n      },\n      { once: true }\n    );\n  });\n}\n\nconst rudderanalytics = new RudderAnalytics();\n\nrudderanalytics.load(\"2Fivwkm2WzdbgiuTksdgWz729mz\", \"https://conversionwbv.dataplane.rudderstack.com\", {\n  storage: {\n    encryption: {\n      version: \"legacy\"\n    }\n  }\n});\nrudderanalytics.ready(() => {\n  // Register Custom Events\n  checkIfHtmxIsLoaded();\n  rudderanalytics.getAnonymousId();\n\n  // Decrypting AnnoymousId into form field.\n  window.addEventListener(\"onBeforeFormieSubmit\", () => {\n    updateAnonymousIdField();\n  });\n});\nrudderanalytics.page();\n","/* eslint no-console:0 */\nimport Cookies from \"js-cookie\";\n\nfunction socialShareForm() {\n  let socialShareForm = null;\n  let roleOption = null;\n\n  document.addEventListener(\"afterBlitzInjectAll\", function () {\n    socialShareForm = document.getElementById(\"socialShare\");\n    roleOption = document.getElementById(\"referrerSelectInput\");\n\n    // If the form has not been injected into the DOM, exit early.\n    if (!socialShareForm) {\n      return;\n    }\n\n    init();\n  });\n\n  function setCookie(name, value) {\n    const oneYearFromNow = new Date(new Date().getTime() + 365 * 24 * 60 * 60 * 1000);\n    Cookies.set(name, value, { expires: oneYearFromNow });\n  }\n\n  function init() {\n    // Copies job search input values, if they exist, and appends them to the current URL with the respective R value based on the social role selected\n    socialShareForm.addEventListener(\"submit\", function (event) {\n      event.preventDefault();\n\n      const form = document.querySelector(\"#jobSearch input\");\n      const inputs = form ? Array.from(form) : []; // spread into an array only if form is not null\n\n      // Strip current URL of all query parameters\n      const currentURLNoParams = `${window.location.origin}${window.location.pathname}`;\n      const shareURL = new URL(currentURLNoParams);\n\n      inputs\n        .filter(input => input.value !== \"\")\n        .forEach(input => shareURL.searchParams.append(input.name, input.value));\n\n      setCookie(\"social-role\", roleOption.value);\n      shareURL.searchParams.append(\"r\", roleOption.value);\n\n      navigator.clipboard.writeText(shareURL.href)\n        .then(() => {\n          // Create a new element to display the \"copied to clipboard\" message\n          const messageElement = document.createElement(\"div\");\n          messageElement.classList.add(\"clipboard\");\n          messageElement.textContent = \"Copied to clipboard\";\n          // Add the new element to the page\n          document.body.appendChild(messageElement);\n          // Remove the \"copied to clipboard\" message after a short delay\n          setTimeout(() => {\n            document.body.removeChild(messageElement);\n          }, 2000);\n        })\n        .catch(err => {\n          console.error(\"Failed to copy URL: \", err);\n        });\n    });\n  }\n}\n\nexport default socialShareForm();\n","function tracking() {\n  const TRACKING_ELEMENTS = document.querySelectorAll(\"[data-event-trigger]\");\n\n  // Query data attributes if the tracked button is clicked and invoke the respective function\n  function handleEvent(node) {\n    const GOOGLE_EVENT = node.dataset.googleEventCategory;\n    const FACEBOOK_EVENT = node.dataset.facebookEventTrack;\n\n    if (GOOGLE_EVENT && window.hasOwnProperty(\"dataLayer\")) {\n      pushGoogleEvent(GOOGLE_EVENT);\n    }\n\n    if (FACEBOOK_EVENT && window.hasOwnProperty(\"fbq\")) {\n      pushFacebookEvent(FACEBOOK_EVENT);\n    }\n  }\n\n  // Sends event to Google\n  function pushGoogleEvent(event) {\n    let gEvent = {\n      event: \"click\",\n      method: \"\",\n      transport_type: \"beacon\",\n      event_category: event,\n    };\n    window.dataLayer.push(gEvent);\n  }\n\n  // Sends event to Facebook\n  function pushFacebookEvent(event) {\n    window.fbq(\"track\", event);\n  }\n\n  // Adds an event listener to all tracked buttons\n  TRACKING_ELEMENTS.forEach(node => {\n    const EVENT_LISTENER_TYPE = node.dataset.eventTriggerType || \"click\";\n    node.addEventListener(EVENT_LISTENER_TYPE, () => handleEvent(node));\n  });\n}\n\nexport default tracking();\n// Path: src/assets/site/src/js/scripts/tracking.js","function virtualRecruiter() {\n  document.addEventListener(\"DOMContentLoaded\", function () {\n    const virtualRecruiterField = document.querySelector(\"[data-field-handle='virtualRecruiter']\");\n    const isVirtualRecruiterEnabled = virtualRecruiterField !== null;\n\n    if (isVirtualRecruiterEnabled) {\n      const form = document.querySelector(\".fui-form\");\n      const verifiedInput = virtualRecruiterField.querySelector(\"input[type='checkbox']\");\n      const redirectParamInput = form.querySelector(\"[data-field-handle='vrRedirect'] input\");\n\n      registerEventListeners();\n\n      function registerEventListeners() {\n        // Whenever the \"Verified\" field is conditionally hidden or shown, update the redirect input\n        virtualRecruiterField.addEventListener(\"onAfterFormieEvaluateConditions\", function (event) {\n          // Is the target field conditionally hidden? Then it's always not-checked. The \"Verified\" field\n          // could actually be checked, but hidden - we want it to evaluate as if they haven't opted-in.\n          if (event.target.conditionallyHidden) {\n            updateRedirectParam(false);\n          } else {\n            // Otherwise, best to check the state of the \"Verified\" field. Manually trigger the change event\n            verifiedInput.dispatchEvent(new Event(\"change\", { bubbles: true }));\n          }\n        });\n\n        // Whenever the \"Verified\" field is toggled on or off, update the redirect input\n        verifiedInput.addEventListener(\"change\", (event) => {\n          updateRedirectParam(event.target.checked);\n        });\n      }\n\n      function updateRedirectParam(checked) {\n        // Get whether the \"Verified\" input is checked, or conditionally hidden - or not\n        const value = checked ? \"thankyou\" : \"sorry\";\n        // Update the \"Redirect Param\" field\n        redirectParamInput.value = value;\n      }\n    }\n  }, false);\n}\n\nexport default virtualRecruiter();\n","import Cookies from \"js-cookie\";\n\n(function consentBanner() {\n\n  let consent = {\n    // CSS selector for modal\n    modal: \"[data-component='consent-modal']\",\n\n    // Fade transition (in milliseconds)\n    fadeTransition: 300,\n\n    // Name of cookie\n    cookie: \"consent-cookie\",\n\n    // Default status of whether user has accepted\n    accepted: false,\n\n    // Default consent states\n    types: {\n      ad_storage: \"granted\",\n      ad_user_data: \"granted\",\n      ad_personalization: \"granted\",\n      analytics_storage: \"granted\"\n    },\n\n    // Array of callbacks to be executed when consent changes\n    consentListeners: [],\n\n    // Supported actions\n    actions: {\n      show: \"show\",\n      close: \"close\",\n      grant: \"grant\",\n      grantAll: \"grantAll\"\n    },\n\n    // Data attributes assigned to HTML elements to control/manage things\n    data: {\n      action: \"data-consent\",\n      currentView: \"data-current-view\",\n      view: \"data-consent-view\",\n      types: \"data-consent-types\"\n    },\n\n    /** Start consent functions **/\n\n    // Show modal popup\n    show: function (view = 1) {\n      let modal = document.querySelector(this.modal);\n\n      // Swap view\n      document.querySelector(`[${this.data.currentView}]`).setAttribute(this.data.currentView, view);\n\n      // Show it\n      if (modal.style.display === \"none\" || !modal.style.display) {\n        modal.style.display = \"block\";\n        setTimeout(() => {\n          modal.style.opacity = \"1\";\n        }, 10); // To allow transition effect\n        modal.style.transition = `opacity ${this.fadeTransition}ms`;\n      }\n    },\n\n    // Close modal popup\n    close: function () {\n      let modal = document.querySelector(this.modal);\n      modal.style.opacity = \"0\";\n      setTimeout(() => {\n        modal.style.display = \"none\";\n      }, this.fadeTransition);\n    },\n\n    // Update types based on ticked input checkboxes\n    updateTypes: function () {\n      let types = {};\n      let dataType = this.data.types;\n      document.querySelectorAll(`[${dataType}]`).forEach(input => {\n        let inputTypes = input.getAttribute(dataType).split(\",\");\n        inputTypes.forEach(type => {\n          types[type] = input.checked ? \"granted\" : \"denied\";\n        });\n      });\n      this.types = types;\n    },\n\n    // Tick input checkboxes based on given types\n    tickTypes: function (checkAll = false, types = this.types) {\n      let dataType = this.data.types;\n      document.querySelectorAll(`[${this.data.types}]`).forEach(input => {\n        let inputTypes = input.getAttribute(dataType).split(\",\");\n        inputTypes.forEach(type => {\n          input.checked = checkAll || types[type] === \"granted\";\n        });\n      });\n    },\n\n    // Sets info to cookie from current values\n    updateCookie: function (accepted = this.accepted, types = this.types) {\n      let cookie = {\n          accepted: accepted,\n          types: types\n        },\n        consentListeners = this.consentListeners,\n        args = {\n          secure: true,\n\n          // Expires after 30 days\n          expires: 30\n        };\n\n      Cookies.set(this.cookie, JSON.stringify(cookie), args);\n\n\n      /**\n             *   Push updated types to GA by triggering callbacks\n             *   for GTM template to update itself.\n             *\n             *   @param {function} Callback to execute on user consent\n             */\n      consentListeners.forEach(function (callback) {\n        callback(cookie.types);\n      });\n    },\n\n    registerEventListeners: function () {\n      // ✓ -- Save\n      document.querySelectorAll(`[${consent.data.action}=\"${consent.actions.grant}\"]`).forEach(function (element) {\n        element.addEventListener(\"click\", function () {\n          // Update types from ticked checkboxes\n          consent.updateTypes();\n\n          // Update cookie\n          consent.updateCookie(true);\n\n          // Close\n          consent.close();\n        });\n      });\n\n      // ✓ -- Accept all\n      document.querySelectorAll(`[${consent.data.action}=\"${consent.actions.grantAll}\"]`).forEach(function (element) {\n        element.addEventListener(\"click\", function () {\n          // Tick all checkboxes\n          consent.tickTypes(true);\n\n          // Update types from ticked checkboxes\n          consent.updateTypes();\n\n          // Update cookie\n          consent.updateCookie(true);\n\n          // Close\n          consent.close();\n        });\n      });\n\n      // ✓ -- Any of the elements to close pop-up\n      document.querySelectorAll(`[${consent.data.action}=\"${consent.actions.close}\"]`).forEach(function (element) {\n        element.addEventListener(\"click\", function () {\n          consent.close();\n        });\n      });\n\n      // ✓ -- Any of the elements to show\n      document.querySelectorAll(`[${consent.data.action}=\"${consent.actions.show}\"]`).forEach(function (element) {\n        element.addEventListener(\"click\", function () {\n          let view = element.getAttribute(consent.data.view) || 1;\n          consent.show(view);\n        });\n      });\n    },\n\n    init: function () {\n      // check if the modal exists\n      if (!document.querySelector(this.modal)) {\n        return;\n      }\n      this.registerEventListeners();\n      // Update data with cookie\n      let cookie = Cookies.get(this.cookie),\n        consentListeners = [];\n      if (\"undefined\" !== typeof cookie) {\n        cookie = JSON.parse(cookie);\n        this.accepted = cookie.accepted;\n        this.types = cookie.types;\n\n        // Tick checkboxes based on types\n        this.tickTypes();\n      } else {\n        // If there is no cookie data, check all options\n        // Set all types to `granted`\n        this.tickTypes(true);\n\n        // Update types from ticked checkboxes\n        consent.updateTypes();\n      }\n\n      // Show modal if user has not accepted\n      if (!this.accepted) {\n        this.show();\n      }\n\n      /**\n             *   Called from GTM template to set callback to be executed when\n             *   user consent is provided. Then GTM parses `this.cookie` and\n             *   updates itself.\n             *\n             * @param callback\n             */\n      window.addConsentListener = function (callback) {\n        consentListeners.push(callback);\n      };\n      this.consentListeners = consentListeners;\n    }\n  };\n\n  // Initialize consent handling on page load\n  consent.init();\n})();\n"],"file":"js/site.js"}